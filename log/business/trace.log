2023-08-09 21:04:39.349 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 8.0.0.Final
2023-08-09 21:04:39.331 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:04:39.465 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:04:39.511 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :250  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-08-09 21:04:39.883 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:04:39.886 INFO  com.alibaba.nacos.client.utils.ParamUtil          :87   [32m                  [0;39m [settings] [req-serv] nacos-server port:8848
2023-08-09 21:04:39.886 INFO  com.alibaba.nacos.client.utils.ParamUtil          :98   [32m                  [0;39m [settings] [http-client] connect timeout:1000
2023-08-09 21:04:39.888 INFO  com.alibaba.nacos.client.utils.ParamUtil          :105  [32m                  [0;39m PER_TASK_CONFIG_SIZE: 3000.0
2023-08-09 21:04:39.947 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:04:39.948 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:04:39.953 INFO  c.a.n.client.auth.ram.identify.CredentialWatcher  :165  [32m                  [0;39m null No credential found
2023-08-09 21:04:40.961 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:04:40.994 INFO  c.a.n.client.config.impl.LocalConfigInfoProcessor :63   [32m                  [0;39m LOCAL_SNAPSHOT_PATH:C:\Users\Administrator\nacos\config
2023-08-09 21:04:41.003 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of 47b04a22-7572-4dea-a937-cc7e934a05d3_config-0
2023-08-09 21:04:41.085 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [47b04a22-7572-4dea-a937-cc7e934a05d3_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$601/0x0000000800f98a90
2023-08-09 21:04:41.086 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [47b04a22-7572-4dea-a937-cc7e934a05d3_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$602/0x0000000800f98eb0
2023-08-09 21:04:41.087 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [47b04a22-7572-4dea-a937-cc7e934a05d3_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2023-08-09 21:04:41.089 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [47b04a22-7572-4dea-a937-cc7e934a05d3_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2023-08-09 21:04:41.106 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [47b04a22-7572-4dea-a937-cc7e934a05d3_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:04:41.189 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:04:43.020 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [47b04a22-7572-4dea-a937-cc7e934a05d3_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691586282764_127.0.0.1_64135
2023-08-09 21:04:43.021 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [47b04a22-7572-4dea-a937-cc7e934a05d3_config-0] Notify connected event to listeners.
2023-08-09 21:04:43.022 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :639  [32m                  [0;39m [47b04a22-7572-4dea-a937-cc7e934a05d3_config-0] Connected,notify listen context...
2023-08-09 21:04:43.022 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [47b04a22-7572-4dea-a937-cc7e934a05d3_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:04:43.023 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [47b04a22-7572-4dea-a937-cc7e934a05d3_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010ddaf0
2023-08-09 21:04:43.099 INFO  com.alibaba.nacos.client.config.impl.Limiter      :62   [32m                  [0;39m limitTime:5.0
2023-08-09 21:04:43.119 WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder :87   [32m                  [0;39m Ignore the empty nacos configuration and get it based on dataId[business-service] & group[DEFAULT_GROUP]
2023-08-09 21:04:43.150 WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder :87   [32m                  [0;39m Ignore the empty nacos configuration and get it based on dataId[business-service.properties] & group[DEFAULT_GROUP]
2023-08-09 21:04:43.164 WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder :87   [32m                  [0;39m Ignore the empty nacos configuration and get it based on dataId[business-service-dev.properties] & group[DEFAULT_GROUP]
2023-08-09 21:04:43.166 INFO  o.s.c.b.c.PropertySourceBootstrapConfiguration    :108  [32m                  [0;39m Located property source: [BootstrapPropertySource {name='bootstrapProperties-business-service-dev.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-business-service.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-business-service,DEFAULT_GROUP'}]
2023-08-09 21:04:43.204 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:04:43.206 INFO  com.jktickets.BusinessApplication                 :636  [32m                  [0;39m The following 1 profile is active: "dev"
2023-08-09 21:04:45.744 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :294  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode
2023-08-09 21:04:45.750 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :138  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-08-09 21:04:45.809 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :208  [32m                  [0;39m Finished Spring Data repository scanning in 33 ms. Found 0 Redis repository interfaces.
2023-08-09 21:04:45.990 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:04:46.007 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 8.0.0.Final
2023-08-09 21:04:46.090 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:04:46.131 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :250  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-08-09 21:04:46.362 INFO  o.springframework.cloud.context.scope.GenericScope:282  [32m                  [0;39m BeanFactory id=2002ce87-f1ba-3f2d-89b2-7013af69be00
2023-08-09 21:04:46.529 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'com.jktickets.feign.MemberFeign' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:46.551 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:04:46.553 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:46.554 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:46.557 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:46.560 INFO  com.alibaba.nacos.client.utils.ParamUtil          :87   [32m                  [0;39m [settings] [req-serv] nacos-server port:8848
2023-08-09 21:04:46.561 INFO  com.alibaba.nacos.client.utils.ParamUtil          :98   [32m                  [0;39m [settings] [http-client] connect timeout:1000
2023-08-09 21:04:46.563 INFO  com.alibaba.nacos.client.utils.ParamUtil          :105  [32m                  [0;39m PER_TASK_CONFIG_SIZE: 3000.0
2023-08-09 21:04:46.615 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:04:46.616 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:04:46.621 INFO  c.a.n.client.auth.ram.identify.CredentialWatcher  :165  [32m                  [0;39m null No credential found
2023-08-09 21:04:46.640 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:46.645 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:46.647 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:46.648 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$741/0x000000080125e268] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:46.649 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:46.662 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:46.666 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:46.671 INFO  i.s.s.boot.autoconfigure.SeataAutoConfiguration   :63   [32m                  [0;39m Automatically configure Seata
2023-08-09 21:04:46.735 INFO  io.seata.config.ConfigurationFactory              :64   [32m                  [0;39m load Configuration from :Spring Configuration
2023-08-09 21:04:46.740 INFO  io.seata.config.nacos.NacosConfiguration          :233  [32m                  [0;39m Nacos check auth with userName/password.
2023-08-09 21:04:46.750 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:04:46.750 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:04:46.881 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of 62a60323-4b54-4458-8b3f-cb6e87c2a752_config-0
2023-08-09 21:04:46.881 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [62a60323-4b54-4458-8b3f-cb6e87c2a752_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$601/0x0000000800f98a90
2023-08-09 21:04:46.881 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [62a60323-4b54-4458-8b3f-cb6e87c2a752_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$602/0x0000000800f98eb0
2023-08-09 21:04:46.882 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [62a60323-4b54-4458-8b3f-cb6e87c2a752_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2023-08-09 21:04:46.882 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [62a60323-4b54-4458-8b3f-cb6e87c2a752_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2023-08-09 21:04:46.883 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [62a60323-4b54-4458-8b3f-cb6e87c2a752_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:04:46.883 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:04:47.000 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [62a60323-4b54-4458-8b3f-cb6e87c2a752_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691586286889_127.0.0.1_64146
2023-08-09 21:04:47.000 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [62a60323-4b54-4458-8b3f-cb6e87c2a752_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:04:47.000 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [62a60323-4b54-4458-8b3f-cb6e87c2a752_config-0] Notify connected event to listeners.
2023-08-09 21:04:47.000 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [62a60323-4b54-4458-8b3f-cb6e87c2a752_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010ddaf0
2023-08-09 21:04:47.000 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :639  [32m                  [0;39m [62a60323-4b54-4458-8b3f-cb6e87c2a752_config-0] Connected,notify listen context...
2023-08-09 21:04:47.008 INFO  com.alibaba.nacos.client.config.utils.JvmUtil     :54   [32m                  [0;39m isMultiInstance:false
2023-08-09 21:04:47.016 INFO  com.alibaba.nacos.client.config.impl.CacheData    :67   [32m                  [0;39m nacos.cache.data.init.snapshot = true 
2023-08-09 21:04:47.017 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] seataServer.properties+SEATA_GROUP+train
2023-08-09 21:04:47.026 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=seataServer.properties, group=SEATA_GROUP, cnt=1
2023-08-09 21:04:47.042 INFO  i.seata.spring.annotation.GlobalTransactionScanner:211  [32m                  [0;39m Initializing Global Transaction Clients ... 
2023-08-09 21:04:47.222 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] transport.enableTmClientBatchSendRequest+SEATA_GROUP+train
2023-08-09 21:04:47.223 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableTmClientBatchSendRequest, group=SEATA_GROUP, cnt=1
2023-08-09 21:04:47.224 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableTmClientBatchSendRequest, group=SEATA_GROUP, cnt=2
2023-08-09 21:04:47.244 INFO  io.seata.core.rpc.netty.NettyClientBootstrap      :147  [32m                  [0;39m NettyClientBootstrap has started
2023-08-09 21:04:47.246 INFO  io.seata.discovery.registry.RegistryFactory       :50   [32m                  [0;39m use registry center type: nacos
2023-08-09 21:04:47.257 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] service.vgroupMapping.train-group+SEATA_GROUP+train
2023-08-09 21:04:47.257 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=service.vgroupMapping.train-group, group=SEATA_GROUP, cnt=1
2023-08-09 21:04:47.265 INFO  com.alibaba.nacos.client.naming                   :73   [32m                  [0;39m initializer namespace from namespace attribute :null
2023-08-09 21:04:47.269 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:04:47.277 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:04:47.278 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:04:47.297 INFO  c.a.n.client.config.impl.LocalConfigInfoProcessor :63   [32m                  [0;39m LOCAL_SNAPSHOT_PATH:C:\Users\Administrator\nacos\config
2023-08-09 21:04:47.305 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of 96782b15-e7da-41fc-91fb-2c5f0f83b505_config-0
2023-08-09 21:04:47.340 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [96782b15-e7da-41fc-91fb-2c5f0f83b505_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$601/0x0000000800f98b38
2023-08-09 21:04:47.341 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [96782b15-e7da-41fc-91fb-2c5f0f83b505_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$602/0x0000000800f98f58
2023-08-09 21:04:47.342 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [96782b15-e7da-41fc-91fb-2c5f0f83b505_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2023-08-09 21:04:47.342 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [96782b15-e7da-41fc-91fb-2c5f0f83b505_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2023-08-09 21:04:47.356 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [96782b15-e7da-41fc-91fb-2c5f0f83b505_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:04:47.383 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of c546ba6a-c3ce-498c-8841-934a2cd26495
2023-08-09 21:04:47.386 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [c546ba6a-c3ce-498c-8841-934a2cd26495] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2023-08-09 21:04:47.386 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [c546ba6a-c3ce-498c-8841-934a2cd26495] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2023-08-09 21:04:47.387 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [c546ba6a-c3ce-498c-8841-934a2cd26495] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2023-08-09 21:04:47.387 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [c546ba6a-c3ce-498c-8841-934a2cd26495] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:04:47.388 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:04:47.414 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:04:47.515 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [c546ba6a-c3ce-498c-8841-934a2cd26495] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691586287396_127.0.0.1_64147
2023-08-09 21:04:47.515 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [c546ba6a-c3ce-498c-8841-934a2cd26495] Notify connected event to listeners.
2023-08-09 21:04:47.515 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [c546ba6a-c3ce-498c-8841-934a2cd26495] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:04:47.516 INFO  com.alibaba.nacos.client.naming                   :78   [32m                  [0;39m Grpc connection connect
2023-08-09 21:04:47.516 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [c546ba6a-c3ce-498c-8841-934a2cd26495] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010ddaf0
2023-08-09 21:04:47.520 INFO  com.alibaba.nacos.client.naming                   :167  [32m                  [0;39m [SUBSCRIBE-SERVICE] service:seata-server, group:SEATA_GROUP, clusters:default 
2023-08-09 21:04:47.547 INFO  com.alibaba.nacos.client.naming                   :184  [32m                  [0;39m init new ips(1) service: SEATA_GROUP@@seata-server@@default -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatTimeOut":15000,"instanceIdGenerator":"simple","instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2023-08-09 21:04:47.550 INFO  com.alibaba.nacos.client.naming                   :169  [32m                  [0;39m current ips:(1) service: SEATA_GROUP@@seata-server@@default -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatTimeOut":15000,"instanceIdGenerator":"simple","instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2023-08-09 21:04:47.556 INFO  com.alibaba.nacos.client.naming                   :167  [32m                  [0;39m [SUBSCRIBE-SERVICE] service:seata-server, group:SEATA_GROUP, clusters:default 
2023-08-09 21:04:47.558 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :105  [32m                  [0;39m will connect to 192.168.0.102:8091
2023-08-09 21:04:47.708 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :56   [32m                  [0;39m NettyPool create channel to transactionRole:TMROLE,address:192.168.0.102:8091,msg:< RegisterTMRequest{version='1.7.0', applicationId='business-service', transactionServiceGroup='train-group', extraData='ak=null
digest=train-group,192.168.0.102,1691586287706
timestamp=1691586287706
authVersion=V4
vgroup=train-group
ip=192.168.0.102
'} >
2023-08-09 21:04:48.018 WARN  i.s.c.l.EnhancedServiceLoader$InnerEnhancedServiceLoader:545  [32m                  [0;39m Load [io.seata.serializer.hessian.HessianSerializer] class fail: com/caucho/hessian/io/AbstractHessianOutput
2023-08-09 21:04:48.048 INFO  io.seata.core.rpc.netty.TmNettyRemotingClient     :224  [32m                  [0;39m register TM success. client version:1.7.0, server version:1.6.1,channel:[id: 0x1f616a35, L:/192.168.0.102:64148 - R:/192.168.0.102:8091]
2023-08-09 21:04:48.054 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :81   [32m                  [0;39m register success, cost 74 ms, version:1.6.1,role:TMROLE,channel:[id: 0x1f616a35, L:/192.168.0.102:64148 - R:/192.168.0.102:8091]
2023-08-09 21:04:48.054 INFO  i.seata.spring.annotation.GlobalTransactionScanner:225  [32m                  [0;39m Transaction Manager Client is initialized. applicationId[business-service] txServiceGroup[train-group]
2023-08-09 21:04:48.066 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] transport.enableRmClientBatchSendRequest+SEATA_GROUP+train
2023-08-09 21:04:48.066 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableRmClientBatchSendRequest, group=SEATA_GROUP, cnt=1
2023-08-09 21:04:48.066 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableRmClientBatchSendRequest, group=SEATA_GROUP, cnt=2
2023-08-09 21:04:48.088 INFO  io.seata.rm.datasource.AsyncWorker                :73   [32m                  [0;39m Async Commit Buffer Limit: 10000
2023-08-09 21:04:48.089 INFO  io.seata.rm.datasource.xa.ResourceManagerXA       :59   [32m                  [0;39m ResourceManagerXA init ...
2023-08-09 21:04:48.098 INFO  io.seata.core.rpc.netty.NettyClientBootstrap      :147  [32m                  [0;39m NettyClientBootstrap has started
2023-08-09 21:04:48.098 INFO  i.seata.spring.annotation.GlobalTransactionScanner:230  [32m                  [0;39m Resource Manager is initialized. applicationId[business-service] txServiceGroup[train-group]
2023-08-09 21:04:48.098 INFO  i.seata.spring.annotation.GlobalTransactionScanner:234  [32m                  [0;39m Global Transaction Clients are initialized. 
2023-08-09 21:04:48.142 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [c546ba6a-c3ce-498c-8841-934a2cd26495] Receive server push request, request = NotifySubscriberRequest, requestId = 2
2023-08-09 21:04:48.143 INFO  com.alibaba.nacos.client.naming                   :184  [32m                  [0;39m init new ips(1) service: SEATA_GROUP@@seata-server -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatTimeOut":15000,"instanceIdGenerator":"simple","instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2023-08-09 21:04:48.144 INFO  com.alibaba.nacos.client.naming                   :169  [32m                  [0;39m current ips:(1) service: SEATA_GROUP@@seata-server -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatTimeOut":15000,"instanceIdGenerator":"simple","instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2023-08-09 21:04:48.145 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [c546ba6a-c3ce-498c-8841-934a2cd26495] Ack server push request, request = NotifySubscriberRequest, requestId = 2
2023-08-09 21:04:48.883 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [96782b15-e7da-41fc-91fb-2c5f0f83b505_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691586288657_127.0.0.1_64149
2023-08-09 21:04:48.884 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [96782b15-e7da-41fc-91fb-2c5f0f83b505_config-0] Notify connected event to listeners.
2023-08-09 21:04:48.885 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :639  [32m                  [0;39m [96782b15-e7da-41fc-91fb-2c5f0f83b505_config-0] Connected,notify listen context...
2023-08-09 21:04:48.885 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [96782b15-e7da-41fc-91fb-2c5f0f83b505_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:04:48.885 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [96782b15-e7da-41fc-91fb-2c5f0f83b505_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010dd1a0
2023-08-09 21:04:48.933 INFO  com.alibaba.nacos.client.config.impl.Limiter      :62   [32m                  [0;39m limitTime:5.0
2023-08-09 21:04:48.952 WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder :87   [32m                  [0;39m Ignore the empty nacos configuration and get it based on dataId[business-service] & group[DEFAULT_GROUP]
2023-08-09 21:04:48.961 WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder :87   [32m                  [0;39m Ignore the empty nacos configuration and get it based on dataId[business-service.properties] & group[DEFAULT_GROUP]
2023-08-09 21:04:48.968 WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder :87   [32m                  [0;39m Ignore the empty nacos configuration and get it based on dataId[business-service-dev.properties] & group[DEFAULT_GROUP]
2023-08-09 21:04:48.969 INFO  o.s.c.b.c.PropertySourceBootstrapConfiguration    :108  [32m                  [0;39m Located property source: [BootstrapPropertySource {name='bootstrapProperties-business-service-dev.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-business-service.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-business-service,DEFAULT_GROUP'}]
2023-08-09 21:04:49.007 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:04:49.010 INFO  com.jktickets.BusinessApplication                 :636  [32m                  [0;39m The following 1 profile is active: "dev"
2023-08-09 21:04:49.558 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :114  [32m                  [0;39m Tomcat initialized with port(s): 18002 (http)
2023-08-09 21:04:49.572 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-18002"]
2023-08-09 21:04:49.573 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-08-09 21:04:49.573 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-08-09 21:04:49.678 INFO  o.a.c.c.C.[Tomcat].[localhost].[/business]        :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-08-09 21:04:49.679 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :291  [32m                  [0;39m Root WebApplicationContext: initialization completed in 6408 ms
2023-08-09 21:04:50.200 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m                  [0;39m HikariPool-1 - Starting...
2023-08-09 21:04:50.562 INFO  com.zaxxer.hikari.pool.HikariPool                 :565  [32m                  [0;39m HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@422586a
2023-08-09 21:04:50.565 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m                  [0;39m HikariPool-1 - Start completed.
2023-08-09 21:04:50.692 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :105  [32m                  [0;39m will connect to 192.168.0.102:8091
2023-08-09 21:04:50.692 INFO  io.seata.core.rpc.netty.RmNettyRemotingClient     :276  [32m                  [0;39m RM will register :jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business
2023-08-09 21:04:50.693 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :56   [32m                  [0;39m NettyPool create channel to transactionRole:RMROLE,address:192.168.0.102:8091,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', version='1.7.0', applicationId='business-service', transactionServiceGroup='train-group', extraData='null'} >
2023-08-09 21:04:50.698 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :294  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode
2023-08-09 21:04:50.702 INFO  io.seata.core.rpc.netty.RmNettyRemotingClient     :177  [32m                  [0;39m register RM success. client version:1.7.0, server version:1.6.1,channel:[id: 0x1944791a, L:/192.168.0.102:64166 - R:/192.168.0.102:8091]
2023-08-09 21:04:50.702 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :81   [32m                  [0;39m register success, cost 7 ms, version:1.6.1,role:RMROLE,channel:[id: 0x1944791a, L:/192.168.0.102:64166 - R:/192.168.0.102:8091]
2023-08-09 21:04:50.704 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :138  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-08-09 21:04:50.716 INFO  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator:101  [32m                  [0;39m Auto proxy data source 'dataSource' by 'AT' mode.
2023-08-09 21:04:50.748 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :208  [32m                  [0;39m Finished Spring Data repository scanning in 21 ms. Found 0 Redis repository interfaces.
2023-08-09 21:04:51.105 INFO  o.springframework.cloud.context.scope.GenericScope:282  [32m                  [0;39m BeanFactory id=2002ce87-f1ba-3f2d-89b2-7013af69be00
2023-08-09 21:04:51.218 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'com.jktickets.feign.MemberFeign' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:51.231 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:51.232 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:51.232 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:51.296 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:51.313 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:51.318 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:51.320 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$741/0x000000080125bb00] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:51.322 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:51.342 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:51.367 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:04:51.399 INFO  i.s.s.boot.autoconfigure.SeataAutoConfiguration   :63   [32m                  [0;39m Automatically configure Seata
2023-08-09 21:04:51.526 INFO  io.seata.config.ConfigurationFactory              :64   [32m                  [0;39m load Configuration from :Spring Configuration
2023-08-09 21:04:51.547 INFO  io.seata.config.nacos.NacosConfiguration          :233  [32m                  [0;39m Nacos check auth with userName/password.
2023-08-09 21:04:51.574 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:04:51.575 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:04:51.728 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of 22eb2771-fa95-4e31-97bf-2733e7c31995_config-0
2023-08-09 21:04:51.729 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [22eb2771-fa95-4e31-97bf-2733e7c31995_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$601/0x0000000800f98b38
2023-08-09 21:04:51.729 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [22eb2771-fa95-4e31-97bf-2733e7c31995_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$602/0x0000000800f98f58
2023-08-09 21:04:51.729 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [22eb2771-fa95-4e31-97bf-2733e7c31995_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2023-08-09 21:04:51.729 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [22eb2771-fa95-4e31-97bf-2733e7c31995_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2023-08-09 21:04:51.730 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [22eb2771-fa95-4e31-97bf-2733e7c31995_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:04:51.731 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:04:51.857 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [22eb2771-fa95-4e31-97bf-2733e7c31995_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691586291740_127.0.0.1_64174
2023-08-09 21:04:51.857 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [22eb2771-fa95-4e31-97bf-2733e7c31995_config-0] Notify connected event to listeners.
2023-08-09 21:04:51.857 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [22eb2771-fa95-4e31-97bf-2733e7c31995_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:04:51.858 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :639  [32m                  [0;39m [22eb2771-fa95-4e31-97bf-2733e7c31995_config-0] Connected,notify listen context...
2023-08-09 21:04:51.858 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [22eb2771-fa95-4e31-97bf-2733e7c31995_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010dd1a0
2023-08-09 21:04:51.870 INFO  com.alibaba.nacos.client.config.utils.JvmUtil     :54   [32m                  [0;39m isMultiInstance:false
2023-08-09 21:04:51.880 INFO  com.alibaba.nacos.client.config.impl.CacheData    :67   [32m                  [0;39m nacos.cache.data.init.snapshot = true 
2023-08-09 21:04:51.882 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] seataServer.properties+SEATA_GROUP+train
2023-08-09 21:04:51.895 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=seataServer.properties, group=SEATA_GROUP, cnt=1
2023-08-09 21:04:51.910 INFO  i.seata.spring.annotation.GlobalTransactionScanner:211  [32m                  [0;39m Initializing Global Transaction Clients ... 
2023-08-09 21:04:52.107 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] transport.enableTmClientBatchSendRequest+SEATA_GROUP+train
2023-08-09 21:04:52.107 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableTmClientBatchSendRequest, group=SEATA_GROUP, cnt=1
2023-08-09 21:04:52.108 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableTmClientBatchSendRequest, group=SEATA_GROUP, cnt=2
2023-08-09 21:04:52.127 INFO  io.seata.core.rpc.netty.NettyClientBootstrap      :147  [32m                  [0;39m NettyClientBootstrap has started
2023-08-09 21:04:52.129 INFO  io.seata.discovery.registry.RegistryFactory       :50   [32m                  [0;39m use registry center type: nacos
2023-08-09 21:04:52.137 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] service.vgroupMapping.train-group+SEATA_GROUP+train
2023-08-09 21:04:52.137 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=service.vgroupMapping.train-group, group=SEATA_GROUP, cnt=1
2023-08-09 21:04:52.143 INFO  com.alibaba.nacos.client.naming                   :73   [32m                  [0;39m initializer namespace from namespace attribute :null
2023-08-09 21:04:52.153 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:04:52.153 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:04:52.254 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of 454b1e8b-2813-430a-b3b9-b261f4c518e0
2023-08-09 21:04:52.257 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [454b1e8b-2813-430a-b3b9-b261f4c518e0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2023-08-09 21:04:52.257 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [454b1e8b-2813-430a-b3b9-b261f4c518e0] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2023-08-09 21:04:52.257 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [454b1e8b-2813-430a-b3b9-b261f4c518e0] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2023-08-09 21:04:52.258 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [454b1e8b-2813-430a-b3b9-b261f4c518e0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:04:52.258 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:04:52.375 WARN  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :62   [32m                  [0;39m Unable to start LiveReload server
2023-08-09 21:04:52.382 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [454b1e8b-2813-430a-b3b9-b261f4c518e0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691586292265_127.0.0.1_64177
2023-08-09 21:04:52.383 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [454b1e8b-2813-430a-b3b9-b261f4c518e0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:04:52.383 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [454b1e8b-2813-430a-b3b9-b261f4c518e0] Notify connected event to listeners.
2023-08-09 21:04:52.383 INFO  com.alibaba.nacos.client.naming                   :78   [32m                  [0;39m Grpc connection connect
2023-08-09 21:04:52.383 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [454b1e8b-2813-430a-b3b9-b261f4c518e0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010dd1a0
2023-08-09 21:04:52.385 INFO  com.alibaba.nacos.client.naming                   :167  [32m                  [0;39m [SUBSCRIBE-SERVICE] service:seata-server, group:SEATA_GROUP, clusters:default 
2023-08-09 21:04:52.408 INFO  com.alibaba.nacos.client.naming                   :184  [32m                  [0;39m init new ips(1) service: SEATA_GROUP@@seata-server@@default -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatTimeOut":15000,"instanceIdGenerator":"simple","instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2023-08-09 21:04:52.411 INFO  com.alibaba.nacos.client.naming                   :169  [32m                  [0;39m current ips:(1) service: SEATA_GROUP@@seata-server@@default -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatTimeOut":15000,"instanceIdGenerator":"simple","instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2023-08-09 21:04:52.418 INFO  com.alibaba.nacos.client.naming                   :167  [32m                  [0;39m [SUBSCRIBE-SERVICE] service:seata-server, group:SEATA_GROUP, clusters:default 
2023-08-09 21:04:52.419 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :105  [32m                  [0;39m will connect to 192.168.0.102:8091
2023-08-09 21:04:52.468 INFO  o.s.cloud.openfeign.FeignClientFactoryBean        :437  [32m                  [0;39m For 'member-service' URL not provided. Will try picking an instance via load-balancing.
2023-08-09 21:04:52.577 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :56   [32m                  [0;39m NettyPool create channel to transactionRole:TMROLE,address:192.168.0.102:8091,msg:< RegisterTMRequest{version='1.7.0', applicationId='business-service', transactionServiceGroup='train-group', extraData='ak=null
digest=train-group,192.168.0.102,1691586292575
timestamp=1691586292575
authVersion=V4
vgroup=train-group
ip=192.168.0.102
'} >
2023-08-09 21:04:52.866 WARN  i.s.c.l.EnhancedServiceLoader$InnerEnhancedServiceLoader:545  [32m                  [0;39m Load [io.seata.serializer.hessian.HessianSerializer] class fail: com/caucho/hessian/io/AbstractHessianOutput
2023-08-09 21:04:52.904 INFO  io.seata.core.rpc.netty.TmNettyRemotingClient     :224  [32m                  [0;39m register TM success. client version:1.7.0, server version:1.6.1,channel:[id: 0xc41e5b47, L:/192.168.0.102:64178 - R:/192.168.0.102:8091]
2023-08-09 21:04:52.910 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :81   [32m                  [0;39m register success, cost 85 ms, version:1.6.1,role:TMROLE,channel:[id: 0xc41e5b47, L:/192.168.0.102:64178 - R:/192.168.0.102:8091]
2023-08-09 21:04:52.911 INFO  i.seata.spring.annotation.GlobalTransactionScanner:225  [32m                  [0;39m Transaction Manager Client is initialized. applicationId[business-service] txServiceGroup[train-group]
2023-08-09 21:04:52.925 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] transport.enableRmClientBatchSendRequest+SEATA_GROUP+train
2023-08-09 21:04:52.925 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableRmClientBatchSendRequest, group=SEATA_GROUP, cnt=1
2023-08-09 21:04:52.926 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableRmClientBatchSendRequest, group=SEATA_GROUP, cnt=2
2023-08-09 21:04:52.935 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [454b1e8b-2813-430a-b3b9-b261f4c518e0] Receive server push request, request = NotifySubscriberRequest, requestId = 3
2023-08-09 21:04:52.936 INFO  com.alibaba.nacos.client.naming                   :184  [32m                  [0;39m init new ips(1) service: SEATA_GROUP@@seata-server -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatTimeOut":15000,"instanceIdGenerator":"simple","instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2023-08-09 21:04:52.936 INFO  com.alibaba.nacos.client.naming                   :169  [32m                  [0;39m current ips:(1) service: SEATA_GROUP@@seata-server -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatTimeOut":15000,"instanceIdGenerator":"simple","instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2023-08-09 21:04:52.938 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [454b1e8b-2813-430a-b3b9-b261f4c518e0] Ack server push request, request = NotifySubscriberRequest, requestId = 3
2023-08-09 21:04:52.948 INFO  io.seata.rm.datasource.AsyncWorker                :73   [32m                  [0;39m Async Commit Buffer Limit: 10000
2023-08-09 21:04:52.949 INFO  io.seata.rm.datasource.xa.ResourceManagerXA       :59   [32m                  [0;39m ResourceManagerXA init ...
2023-08-09 21:04:52.961 INFO  io.seata.core.rpc.netty.NettyClientBootstrap      :147  [32m                  [0;39m NettyClientBootstrap has started
2023-08-09 21:04:52.961 INFO  i.seata.spring.annotation.GlobalTransactionScanner:230  [32m                  [0;39m Resource Manager is initialized. applicationId[business-service] txServiceGroup[train-group]
2023-08-09 21:04:52.961 INFO  i.seata.spring.annotation.GlobalTransactionScanner:234  [32m                  [0;39m Global Transaction Clients are initialized. 
2023-08-09 21:04:53.378 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] client.tm.degradeCheck+SEATA_GROUP+train
2023-08-09 21:04:53.379 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.tm.degradeCheck, group=SEATA_GROUP, cnt=1
2023-08-09 21:04:53.379 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.tm.degradeCheck, group=SEATA_GROUP, cnt=2
2023-08-09 21:04:53.389 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] service.disableGlobalTransaction+SEATA_GROUP+train
2023-08-09 21:04:53.390 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=service.disableGlobalTransaction, group=SEATA_GROUP, cnt=1
2023-08-09 21:04:53.390 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=service.disableGlobalTransaction, group=SEATA_GROUP, cnt=2
2023-08-09 21:04:53.391 INFO  i.seata.spring.annotation.GlobalTransactionScanner:308  [32m                  [0;39m Bean [com.jktickets.service.impl.AfterConfirmOrderServiceImpl] with name [afterConfirmOrderServiceImpl] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
2023-08-09 21:04:53.419 WARN  o.s.core.LocalVariableTableParameterNameDiscoverer:123  [32m                  [0;39m Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.redisson.spring.starter.RedissonAutoConfiguration
2023-08-09 21:04:53.764 INFO  org.redisson.Version                              :41   [32m                  [0;39m Redisson 3.21.0
2023-08-09 21:04:54.420 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :114  [32m                  [0;39m Tomcat initialized with port(s): 8002 (http)
2023-08-09 21:04:54.436 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8002"]
2023-08-09 21:04:54.437 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-08-09 21:04:54.438 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-08-09 21:04:54.476 INFO  o.r.connection.pool.MasterPubSubConnectionPool    :158  [32m                  [0;39m 1 connections initialized for r-bp1e8io6hj1e27e15lpd.redis.rds.aliyuncs.com/47.110.123.191:6379
2023-08-09 21:04:54.517 INFO  o.a.c.c.C.[Tomcat].[localhost].[/business]        :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-08-09 21:04:54.518 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :291  [32m                  [0;39m Root WebApplicationContext: initialization completed in 5476 ms
2023-08-09 21:04:54.993 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m                  [0;39m HikariPool-1 - Starting...
2023-08-09 21:04:55.384 INFO  com.zaxxer.hikari.pool.HikariPool                 :565  [32m                  [0;39m HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5d4c2743
2023-08-09 21:04:55.387 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m                  [0;39m HikariPool-1 - Start completed.
2023-08-09 21:04:55.424 INFO  org.redisson.connection.pool.MasterConnectionPool :158  [32m                  [0;39m 24 connections initialized for r-bp1e8io6hj1e27e15lpd.redis.rds.aliyuncs.com/47.110.123.191:6379
2023-08-09 21:04:55.507 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :105  [32m                  [0;39m will connect to 192.168.0.102:8091
2023-08-09 21:04:55.507 INFO  io.seata.core.rpc.netty.RmNettyRemotingClient     :276  [32m                  [0;39m RM will register :jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business
2023-08-09 21:04:55.507 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :56   [32m                  [0;39m NettyPool create channel to transactionRole:RMROLE,address:192.168.0.102:8091,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', version='1.7.0', applicationId='business-service', transactionServiceGroup='train-group', extraData='null'} >
2023-08-09 21:04:55.517 INFO  io.seata.core.rpc.netty.RmNettyRemotingClient     :177  [32m                  [0;39m register RM success. client version:1.7.0, server version:1.6.1,channel:[id: 0x7b6f4a93, L:/192.168.0.102:64208 - R:/192.168.0.102:8091]
2023-08-09 21:04:55.518 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :81   [32m                  [0;39m register success, cost 8 ms, version:1.6.1,role:RMROLE,channel:[id: 0x7b6f4a93, L:/192.168.0.102:64208 - R:/192.168.0.102:8091]
2023-08-09 21:04:55.532 INFO  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator:101  [32m                  [0;39m Auto proxy data source 'dataSource' by 'AT' mode.
2023-08-09 21:04:56.451 WARN  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :62   [32m                  [0;39m Unable to start LiveReload server
2023-08-09 21:04:56.505 INFO  o.s.cloud.openfeign.FeignClientFactoryBean        :437  [32m                  [0;39m For 'member-service' URL not provided. Will try picking an instance via load-balancing.
2023-08-09 21:04:56.740 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] client.tm.degradeCheck+SEATA_GROUP+train
2023-08-09 21:04:56.741 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.tm.degradeCheck, group=SEATA_GROUP, cnt=1
2023-08-09 21:04:56.742 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.tm.degradeCheck, group=SEATA_GROUP, cnt=2
2023-08-09 21:04:56.754 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] service.disableGlobalTransaction+SEATA_GROUP+train
2023-08-09 21:04:56.754 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=service.disableGlobalTransaction, group=SEATA_GROUP, cnt=1
2023-08-09 21:04:56.755 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=service.disableGlobalTransaction, group=SEATA_GROUP, cnt=2
2023-08-09 21:04:56.756 INFO  i.seata.spring.annotation.GlobalTransactionScanner:308  [32m                  [0;39m Bean [com.jktickets.service.impl.AfterConfirmOrderServiceImpl] with name [afterConfirmOrderServiceImpl] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
2023-08-09 21:04:56.788 WARN  o.s.core.LocalVariableTableParameterNameDiscoverer:123  [32m                  [0;39m Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.redisson.spring.starter.RedissonAutoConfiguration
2023-08-09 21:04:56.963 INFO  org.redisson.Version                              :41   [32m                  [0;39m Redisson 3.21.0
2023-08-09 21:04:57.461 INFO  o.r.connection.pool.MasterPubSubConnectionPool    :158  [32m                  [0;39m 1 connections initialized for r-bp1e8io6hj1e27e15lpd.redis.rds.aliyuncs.com/47.110.123.191:6379
2023-08-09 21:04:58.647 INFO  org.redisson.connection.pool.MasterConnectionPool :158  [32m                  [0;39m 24 connections initialized for r-bp1e8io6hj1e27e15lpd.redis.rds.aliyuncs.com/47.110.123.191:6379
2023-08-09 21:04:59.245 WARN  o.s.core.LocalVariableTableParameterNameDiscoverer:123  [32m                  [0;39m Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: com.github.pagehelper.autoconfigure.PageHelperStandardProperties
2023-08-09 21:05:01.840 WARN  o.s.core.LocalVariableTableParameterNameDiscoverer:123  [32m                  [0;39m Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: com.github.pagehelper.autoconfigure.PageHelperStandardProperties
2023-08-09 21:05:01.868 INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver  :58   [32m                  [0;39m Exposing 1 endpoint(s) beneath base path '/actuator'
2023-08-09 21:05:02.028 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-18002"]
2023-08-09 21:05:02.065 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :226  [32m                  [0;39m Tomcat started on port(s): 18002 (http) with context path '/business'
2023-08-09 21:05:02.068 INFO  com.alibaba.nacos.client.naming                   :62   [32m                  [0;39m initializer namespace from ans.namespace attribute : null
2023-08-09 21:05:02.068 INFO  com.alibaba.nacos.client.naming                   :66   [32m                  [0;39m initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2023-08-09 21:05:02.069 INFO  com.alibaba.nacos.client.naming                   :73   [32m                  [0;39m initializer namespace from namespace attribute :null
2023-08-09 21:05:02.070 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:05:02.070 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:05:02.071 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of 8d32b04b-4372-40a5-826c-4c8e3adc887c
2023-08-09 21:05:02.071 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [8d32b04b-4372-40a5-826c-4c8e3adc887c] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2023-08-09 21:05:02.071 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [8d32b04b-4372-40a5-826c-4c8e3adc887c] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2023-08-09 21:05:02.072 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [8d32b04b-4372-40a5-826c-4c8e3adc887c] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2023-08-09 21:05:02.072 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [8d32b04b-4372-40a5-826c-4c8e3adc887c] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:05:02.073 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:05:02.187 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [8d32b04b-4372-40a5-826c-4c8e3adc887c] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691586302079_127.0.0.1_64261
2023-08-09 21:05:02.187 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [8d32b04b-4372-40a5-826c-4c8e3adc887c] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:05:02.187 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [8d32b04b-4372-40a5-826c-4c8e3adc887c] Notify connected event to listeners.
2023-08-09 21:05:02.187 INFO  com.alibaba.nacos.client.naming                   :78   [32m                  [0;39m Grpc connection connect
2023-08-09 21:05:02.187 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [8d32b04b-4372-40a5-826c-4c8e3adc887c] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010ddaf0
2023-08-09 21:05:02.188 INFO  com.alibaba.nacos.client.naming                   :121  [32m                  [0;39m [REGISTER-SERVICE] train registering service business-service with instance Instance{instanceId='null', ip='192.168.0.102', port=18002, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2023-08-09 21:05:02.196 INFO  c.a.cloud.nacos.registry.NacosServiceRegistry     :76   [32m                  [0;39m nacos registry, DEFAULT_GROUP business-service 192.168.0.102:18002 register finished
2023-08-09 21:05:02.638 INFO  com.jktickets.BusinessApplication                 :57   [32m                  [0;39m Started BusinessApplication in 24.805 seconds (process running for 26.233)
2023-08-09 21:05:02.646 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] business-service+DEFAULT_GROUP+train
2023-08-09 21:05:02.646 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=business-service, group=DEFAULT_GROUP, cnt=1
2023-08-09 21:05:02.647 INFO  c.a.cloud.nacos.refresh.NacosContextRefresher     :129  [32m                  [0;39m [Nacos Config] Listening config: dataId=business-service, group=DEFAULT_GROUP
2023-08-09 21:05:02.647 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] business-service.properties+DEFAULT_GROUP+train
2023-08-09 21:05:02.647 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=business-service.properties, group=DEFAULT_GROUP, cnt=1
2023-08-09 21:05:02.647 INFO  c.a.cloud.nacos.refresh.NacosContextRefresher     :129  [32m                  [0;39m [Nacos Config] Listening config: dataId=business-service.properties, group=DEFAULT_GROUP
2023-08-09 21:05:02.648 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] business-service-dev.properties+DEFAULT_GROUP+train
2023-08-09 21:05:02.648 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=business-service-dev.properties, group=DEFAULT_GROUP, cnt=1
2023-08-09 21:05:02.648 INFO  c.a.cloud.nacos.refresh.NacosContextRefresher     :129  [32m                  [0;39m [Nacos Config] Listening config: dataId=business-service-dev.properties, group=DEFAULT_GROUP
2023-08-09 21:05:02.650 INFO  com.jktickets.BusinessApplication                 :27   [32m                  [0;39m 启动成功！！
2023-08-09 21:05:02.650 INFO  com.jktickets.BusinessApplication                 :29   [32m                  [0;39m 测试地址: 	http://127.0.0.1:18002/business/hello
2023-08-09 21:05:03.081 INFO  o.a.c.c.C.[Tomcat].[localhost].[/business]        :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-08-09 21:05:03.082 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-08-09 21:05:03.084 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 2 ms
2023-08-09 21:05:03.327 INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver  :58   [32m                  [0;39m Exposing 1 endpoint(s) beneath base path '/actuator'
2023-08-09 21:05:03.515 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8002"]
2023-08-09 21:05:03.537 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :226  [32m                  [0;39m Tomcat started on port(s): 8002 (http) with context path '/business'
2023-08-09 21:05:03.540 INFO  com.alibaba.nacos.client.naming                   :62   [32m                  [0;39m initializer namespace from ans.namespace attribute : null
2023-08-09 21:05:03.540 INFO  com.alibaba.nacos.client.naming                   :66   [32m                  [0;39m initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2023-08-09 21:05:03.541 INFO  com.alibaba.nacos.client.naming                   :73   [32m                  [0;39m initializer namespace from namespace attribute :null
2023-08-09 21:05:03.541 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:05:03.542 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:05:03.543 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of fd50217f-5e7b-44c3-b7a0-44eab035c66f
2023-08-09 21:05:03.544 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fd50217f-5e7b-44c3-b7a0-44eab035c66f] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2023-08-09 21:05:03.544 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fd50217f-5e7b-44c3-b7a0-44eab035c66f] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2023-08-09 21:05:03.544 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fd50217f-5e7b-44c3-b7a0-44eab035c66f] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2023-08-09 21:05:03.545 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fd50217f-5e7b-44c3-b7a0-44eab035c66f] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:05:03.546 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:05:03.659 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fd50217f-5e7b-44c3-b7a0-44eab035c66f] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691586303553_127.0.0.1_64264
2023-08-09 21:05:03.659 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fd50217f-5e7b-44c3-b7a0-44eab035c66f] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:05:03.659 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fd50217f-5e7b-44c3-b7a0-44eab035c66f] Notify connected event to listeners.
2023-08-09 21:05:03.659 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fd50217f-5e7b-44c3-b7a0-44eab035c66f] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010dd1a0
2023-08-09 21:05:03.659 INFO  com.alibaba.nacos.client.naming                   :78   [32m                  [0;39m Grpc connection connect
2023-08-09 21:05:03.660 INFO  com.alibaba.nacos.client.naming                   :121  [32m                  [0;39m [REGISTER-SERVICE] train registering service business-service with instance Instance{instanceId='null', ip='192.168.0.102', port=8002, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2023-08-09 21:05:03.669 INFO  c.a.cloud.nacos.registry.NacosServiceRegistry     :76   [32m                  [0;39m nacos registry, DEFAULT_GROUP business-service 192.168.0.102:8002 register finished
2023-08-09 21:05:04.098 INFO  com.jktickets.BusinessApplication                 :57   [32m                  [0;39m Started BusinessApplication in 19.463 seconds (process running for 20.761)
2023-08-09 21:05:04.108 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] business-service+DEFAULT_GROUP+train
2023-08-09 21:05:04.109 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=business-service, group=DEFAULT_GROUP, cnt=1
2023-08-09 21:05:04.109 INFO  c.a.cloud.nacos.refresh.NacosContextRefresher     :129  [32m                  [0;39m [Nacos Config] Listening config: dataId=business-service, group=DEFAULT_GROUP
2023-08-09 21:05:04.110 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] business-service.properties+DEFAULT_GROUP+train
2023-08-09 21:05:04.110 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=business-service.properties, group=DEFAULT_GROUP, cnt=1
2023-08-09 21:05:04.110 INFO  c.a.cloud.nacos.refresh.NacosContextRefresher     :129  [32m                  [0;39m [Nacos Config] Listening config: dataId=business-service.properties, group=DEFAULT_GROUP
2023-08-09 21:05:04.111 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] business-service-dev.properties+DEFAULT_GROUP+train
2023-08-09 21:05:04.112 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=business-service-dev.properties, group=DEFAULT_GROUP, cnt=1
2023-08-09 21:05:04.112 INFO  c.a.cloud.nacos.refresh.NacosContextRefresher     :129  [32m                  [0;39m [Nacos Config] Listening config: dataId=business-service-dev.properties, group=DEFAULT_GROUP
2023-08-09 21:05:04.114 INFO  com.jktickets.BusinessApplication                 :27   [32m                  [0;39m 启动成功！！
2023-08-09 21:05:04.115 INFO  com.jktickets.BusinessApplication                 :29   [32m                  [0;39m 测试地址: 	http://127.0.0.1:8002/business/hello
2023-08-09 21:05:04.573 INFO  o.a.c.c.C.[Tomcat].[localhost].[/business]        :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-08-09 21:05:04.573 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-08-09 21:05:04.577 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 3 ms
2023-08-09 21:10:45.719 WARN  com.alibaba.nacos.common.notify.NotifyCenter      :136  [32m                  [0;39m [NotifyCenter] Start destroying Publisher
2023-08-09 21:10:45.719 WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder  :102  [32m                  [0;39m [HttpClientBeanHolder] Start destroying common HttpClient
2023-08-09 21:10:45.720 WARN  com.alibaba.nacos.common.notify.NotifyCenter      :153  [32m                  [0;39m [NotifyCenter] Destruction of the end
2023-08-09 21:10:45.721 WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder  :111  [32m                  [0;39m [HttpClientBeanHolder] Destruction of the end
2023-08-09 21:10:45.769 WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder  :102  [32m                  [0;39m [HttpClientBeanHolder] Start destroying common HttpClient
2023-08-09 21:10:45.769 WARN  com.alibaba.nacos.common.notify.NotifyCenter      :136  [32m                  [0;39m [NotifyCenter] Start destroying Publisher
2023-08-09 21:10:45.770 WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder  :111  [32m                  [0;39m [HttpClientBeanHolder] Destruction of the end
2023-08-09 21:10:45.770 WARN  com.alibaba.nacos.common.notify.NotifyCenter      :153  [32m                  [0;39m [NotifyCenter] Destruction of the end
2023-08-09 21:10:45.778 INFO  c.a.cloud.nacos.registry.NacosServiceRegistry     :95   [32m                  [0;39m De-registering from Nacos Server now...
2023-08-09 21:10:45.778 INFO  com.alibaba.nacos.client.naming                   :217  [32m                  [0;39m [DEREGISTER-SERVICE] train deregistering service business-service with instance: Instance{instanceId='null', ip='192.168.0.102', port=18002, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2023-08-09 21:10:45.782 INFO  c.a.cloud.nacos.registry.NacosServiceRegistry     :115  [32m                  [0;39m De-registration finished.
2023-08-09 21:10:45.783 INFO  com.alibaba.nacos.client.naming                   :256  [32m                  [0;39m com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2023-08-09 21:10:45.784 INFO  com.alibaba.nacos.client.naming                   :136  [32m                  [0;39m com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2023-08-09 21:10:45.784 INFO  com.alibaba.nacos.client.naming                   :138  [32m                  [0;39m com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2023-08-09 21:10:45.784 INFO  com.alibaba.nacos.client.naming                   :258  [32m                  [0;39m com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2023-08-09 21:10:45.784 INFO  com.alibaba.nacos.client.naming                   :204  [32m                  [0;39m com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2023-08-09 21:10:45.784 INFO  com.alibaba.nacos.client.naming                   :143  [32m                  [0;39m com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2023-08-09 21:10:45.785 INFO  com.alibaba.nacos.client.naming                   :145  [32m                  [0;39m com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2023-08-09 21:10:45.785 INFO  com.alibaba.nacos.client.naming                   :194  [32m                  [0;39m com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2023-08-09 21:10:45.785 WARN  com.alibaba.nacos.client.naming                   :74   [32m                  [0;39m [NamingHttpClientManager] Start destroying NacosRestTemplate
2023-08-09 21:10:45.785 WARN  com.alibaba.nacos.client.naming                   :81   [32m                  [0;39m [NamingHttpClientManager] Destruction of the end
2023-08-09 21:10:45.785 INFO  com.alibaba.nacos.client.naming                   :199  [32m                  [0;39m com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2023-08-09 21:10:45.785 INFO  com.alibaba.nacos.client.naming                   :484  [32m                  [0;39m com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2023-08-09 21:10:45.785 WARN  com.alibaba.nacos.client.naming                   :74   [32m                  [0;39m [NamingHttpClientManager] Start destroying NacosRestTemplate
2023-08-09 21:10:45.785 WARN  com.alibaba.nacos.client.naming                   :81   [32m                  [0;39m [NamingHttpClientManager] Destruction of the end
2023-08-09 21:10:45.786 INFO  com.alibaba.nacos.client.naming                   :486  [32m                  [0;39m com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2023-08-09 21:10:45.786 INFO  com.alibaba.nacos.common.remote.client            :429  [32m                  [0;39m Shutdown rpc client, set status to shutdown
2023-08-09 21:10:45.786 INFO  com.alibaba.nacos.common.remote.client            :431  [32m                  [0;39m Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@725bf2c2[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2023-08-09 21:10:45.787 INFO  com.alibaba.nacos.common.remote.client            :584  [32m                  [0;39m Close current connection 1691586302079_127.0.0.1_64261
2023-08-09 21:10:45.789 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :63   [32m                  [0;39m [1691586302079_127.0.0.1_64261]Ignore complete event,isRunning:false,isAbandon=false
2023-08-09 21:10:45.792 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :159  [32m                  [0;39m Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@611043dc[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 82]
2023-08-09 21:10:45.792 INFO  com.alibaba.nacos.client.naming                   :318  [32m                  [0;39m Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@26d2d70e[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 114]
2023-08-09 21:10:45.792 INFO  c.a.n.client.auth.ram.identify.CredentialWatcher  :106  [32m                  [0;39m [null] CredentialWatcher is stopped
2023-08-09 21:10:45.793 INFO  c.a.n.client.auth.ram.identify.CredentialService  :100  [32m                  [0;39m [null] CredentialService is freed
2023-08-09 21:10:45.793 INFO  com.alibaba.nacos.client.naming                   :211  [32m                  [0;39m com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2023-08-09 21:10:45.829 INFO  c.a.cloud.nacos.registry.NacosServiceRegistry     :95   [32m                  [0;39m De-registering from Nacos Server now...
2023-08-09 21:10:45.830 INFO  com.alibaba.nacos.client.naming                   :217  [32m                  [0;39m [DEREGISTER-SERVICE] train deregistering service business-service with instance: Instance{instanceId='null', ip='192.168.0.102', port=8002, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2023-08-09 21:10:45.834 INFO  c.a.cloud.nacos.registry.NacosServiceRegistry     :115  [32m                  [0;39m De-registration finished.
2023-08-09 21:10:45.836 INFO  com.alibaba.nacos.client.naming                   :256  [32m                  [0;39m com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2023-08-09 21:10:45.836 INFO  com.alibaba.nacos.client.naming                   :136  [32m                  [0;39m com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2023-08-09 21:10:45.837 INFO  com.alibaba.nacos.client.naming                   :138  [32m                  [0;39m com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2023-08-09 21:10:45.837 INFO  com.alibaba.nacos.client.naming                   :258  [32m                  [0;39m com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2023-08-09 21:10:45.837 INFO  com.alibaba.nacos.client.naming                   :204  [32m                  [0;39m com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2023-08-09 21:10:45.838 INFO  com.alibaba.nacos.client.naming                   :143  [32m                  [0;39m com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2023-08-09 21:10:45.838 INFO  com.alibaba.nacos.client.naming                   :145  [32m                  [0;39m com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2023-08-09 21:10:45.839 INFO  com.alibaba.nacos.client.naming                   :194  [32m                  [0;39m com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2023-08-09 21:10:45.840 WARN  com.alibaba.nacos.client.naming                   :74   [32m                  [0;39m [NamingHttpClientManager] Start destroying NacosRestTemplate
2023-08-09 21:10:45.840 WARN  com.alibaba.nacos.client.naming                   :81   [32m                  [0;39m [NamingHttpClientManager] Destruction of the end
2023-08-09 21:10:45.840 INFO  com.alibaba.nacos.client.naming                   :199  [32m                  [0;39m com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2023-08-09 21:10:45.841 INFO  com.alibaba.nacos.client.naming                   :484  [32m                  [0;39m com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2023-08-09 21:10:45.841 WARN  com.alibaba.nacos.client.naming                   :74   [32m                  [0;39m [NamingHttpClientManager] Start destroying NacosRestTemplate
2023-08-09 21:10:45.841 WARN  com.alibaba.nacos.client.naming                   :81   [32m                  [0;39m [NamingHttpClientManager] Destruction of the end
2023-08-09 21:10:45.842 INFO  com.alibaba.nacos.client.naming                   :486  [32m                  [0;39m com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2023-08-09 21:10:45.842 INFO  com.alibaba.nacos.common.remote.client            :429  [32m                  [0;39m Shutdown rpc client, set status to shutdown
2023-08-09 21:10:45.842 INFO  com.alibaba.nacos.common.remote.client            :431  [32m                  [0;39m Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@35cb5a5e[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2023-08-09 21:10:45.842 INFO  com.alibaba.nacos.common.remote.client            :584  [32m                  [0;39m Close current connection 1691586303553_127.0.0.1_64264
2023-08-09 21:10:45.847 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :63   [32m                  [0;39m [1691586303553_127.0.0.1_64264]Ignore complete event,isRunning:false,isAbandon=false
2023-08-09 21:10:45.854 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :159  [32m                  [0;39m Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@502e74e1[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 82]
2023-08-09 21:10:45.854 INFO  com.alibaba.nacos.client.naming                   :318  [32m                  [0;39m Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@32169cc[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 113]
2023-08-09 21:10:45.855 INFO  c.a.n.client.auth.ram.identify.CredentialWatcher  :106  [32m                  [0;39m [null] CredentialWatcher is stopped
2023-08-09 21:10:45.855 INFO  c.a.n.client.auth.ram.identify.CredentialService  :100  [32m                  [0;39m [null] CredentialService is freed
2023-08-09 21:10:45.856 INFO  com.alibaba.nacos.client.naming                   :211  [32m                  [0;39m com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2023-08-09 21:10:45.856 INFO  com.zaxxer.hikari.HikariDataSource                :350  [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2023-08-09 21:10:45.866 INFO  com.zaxxer.hikari.HikariDataSource                :352  [32m                  [0;39m HikariPool-1 - Shutdown completed.
2023-08-09 21:10:45.868 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:438  [32m                  [0;39m channel inactive: [id: 0x1f616a35, L:/192.168.0.102:64148 ! R:/192.168.0.102:8091]
2023-08-09 21:10:45.869 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :130  [32m                  [0;39m return to pool, rm channel:[id: 0x1f616a35, L:/192.168.0.102:64148 ! R:/192.168.0.102:8091]
2023-08-09 21:10:45.869 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :133  [32m                  [0;39m channel valid false,channel:[id: 0x1f616a35, L:/192.168.0.102:64148 ! R:/192.168.0.102:8091]
2023-08-09 21:10:45.869 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :120  [32m                  [0;39m will destroy channel:[id: 0x1f616a35, L:/192.168.0.102:64148 ! R:/192.168.0.102:8091]
2023-08-09 21:10:45.870 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:488  [32m                  [0;39m ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x1f616a35, L:/192.168.0.102:64148 ! R:/192.168.0.102:8091]) will closed
2023-08-09 21:10:45.870 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:488  [32m                  [0;39m ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x1f616a35, L:/192.168.0.102:64148 ! R:/192.168.0.102:8091]) will closed
2023-08-09 21:10:45.871 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:438  [32m                  [0;39m channel inactive: [id: 0x1944791a, L:/192.168.0.102:64166 ! R:/192.168.0.102:8091]
2023-08-09 21:10:45.871 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :130  [32m                  [0;39m return to pool, rm channel:[id: 0x1944791a, L:/192.168.0.102:64166 ! R:/192.168.0.102:8091]
2023-08-09 21:10:45.872 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :133  [32m                  [0;39m channel valid false,channel:[id: 0x1944791a, L:/192.168.0.102:64166 ! R:/192.168.0.102:8091]
2023-08-09 21:10:45.872 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :120  [32m                  [0;39m will destroy channel:[id: 0x1944791a, L:/192.168.0.102:64166 ! R:/192.168.0.102:8091]
2023-08-09 21:10:45.872 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:488  [32m                  [0;39m ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x1944791a, L:/192.168.0.102:64166 ! R:/192.168.0.102:8091]) will closed
2023-08-09 21:10:45.872 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:488  [32m                  [0;39m ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x1944791a, L:/192.168.0.102:64166 ! R:/192.168.0.102:8091]) will closed
2023-08-09 21:10:45.929 INFO  com.zaxxer.hikari.HikariDataSource                :350  [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2023-08-09 21:10:45.942 INFO  com.zaxxer.hikari.HikariDataSource                :352  [32m                  [0;39m HikariPool-1 - Shutdown completed.
2023-08-09 21:10:45.943 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:438  [32m                  [0;39m channel inactive: [id: 0xc41e5b47, L:/192.168.0.102:64178 ! R:/192.168.0.102:8091]
2023-08-09 21:10:45.944 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :130  [32m                  [0;39m return to pool, rm channel:[id: 0xc41e5b47, L:/192.168.0.102:64178 ! R:/192.168.0.102:8091]
2023-08-09 21:10:45.944 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :133  [32m                  [0;39m channel valid false,channel:[id: 0xc41e5b47, L:/192.168.0.102:64178 ! R:/192.168.0.102:8091]
2023-08-09 21:10:45.944 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :120  [32m                  [0;39m will destroy channel:[id: 0xc41e5b47, L:/192.168.0.102:64178 ! R:/192.168.0.102:8091]
2023-08-09 21:10:45.944 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:488  [32m                  [0;39m ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xc41e5b47, L:/192.168.0.102:64178 ! R:/192.168.0.102:8091]) will closed
2023-08-09 21:10:45.944 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:488  [32m                  [0;39m ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xc41e5b47, L:/192.168.0.102:64178 ! R:/192.168.0.102:8091]) will closed
2023-08-09 21:10:45.946 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:438  [32m                  [0;39m channel inactive: [id: 0x7b6f4a93, L:/192.168.0.102:64208 ! R:/192.168.0.102:8091]
2023-08-09 21:10:45.946 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :130  [32m                  [0;39m return to pool, rm channel:[id: 0x7b6f4a93, L:/192.168.0.102:64208 ! R:/192.168.0.102:8091]
2023-08-09 21:10:45.947 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :133  [32m                  [0;39m channel valid false,channel:[id: 0x7b6f4a93, L:/192.168.0.102:64208 ! R:/192.168.0.102:8091]
2023-08-09 21:10:45.947 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :120  [32m                  [0;39m will destroy channel:[id: 0x7b6f4a93, L:/192.168.0.102:64208 ! R:/192.168.0.102:8091]
2023-08-09 21:10:45.947 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:488  [32m                  [0;39m ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x7b6f4a93, L:/192.168.0.102:64208 ! R:/192.168.0.102:8091]) will closed
2023-08-09 21:10:45.947 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:488  [32m                  [0;39m ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x7b6f4a93, L:/192.168.0.102:64208 ! R:/192.168.0.102:8091]) will closed
2023-08-09 21:11:14.522 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:11:14.534 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 8.0.0.Final
2023-08-09 21:11:14.591 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:11:14.629 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :250  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-08-09 21:11:14.866 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:11:14.868 INFO  com.alibaba.nacos.client.utils.ParamUtil          :87   [32m                  [0;39m [settings] [req-serv] nacos-server port:8848
2023-08-09 21:11:14.874 INFO  com.alibaba.nacos.client.utils.ParamUtil          :98   [32m                  [0;39m [settings] [http-client] connect timeout:1000
2023-08-09 21:11:14.876 INFO  com.alibaba.nacos.client.utils.ParamUtil          :105  [32m                  [0;39m PER_TASK_CONFIG_SIZE: 3000.0
2023-08-09 21:11:14.920 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:11:14.920 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:11:14.926 INFO  c.a.n.client.auth.ram.identify.CredentialWatcher  :165  [32m                  [0;39m null No credential found
2023-08-09 21:11:15.599 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:11:15.626 INFO  c.a.n.client.config.impl.LocalConfigInfoProcessor :63   [32m                  [0;39m LOCAL_SNAPSHOT_PATH:C:\Users\Administrator\nacos\config
2023-08-09 21:11:15.635 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of 4f112124-149f-47f0-b07f-8fc1409167c2_config-0
2023-08-09 21:11:15.677 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [4f112124-149f-47f0-b07f-8fc1409167c2_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$601/0x0000000800f99a28
2023-08-09 21:11:15.678 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [4f112124-149f-47f0-b07f-8fc1409167c2_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$602/0x0000000800f99e48
2023-08-09 21:11:15.679 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [4f112124-149f-47f0-b07f-8fc1409167c2_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2023-08-09 21:11:15.680 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [4f112124-149f-47f0-b07f-8fc1409167c2_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2023-08-09 21:11:15.697 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [4f112124-149f-47f0-b07f-8fc1409167c2_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:11:15.793 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:11:17.617 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [4f112124-149f-47f0-b07f-8fc1409167c2_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691586677361_127.0.0.1_64481
2023-08-09 21:11:17.618 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [4f112124-149f-47f0-b07f-8fc1409167c2_config-0] Notify connected event to listeners.
2023-08-09 21:11:17.618 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :639  [32m                  [0;39m [4f112124-149f-47f0-b07f-8fc1409167c2_config-0] Connected,notify listen context...
2023-08-09 21:11:17.618 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [4f112124-149f-47f0-b07f-8fc1409167c2_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:11:17.618 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [4f112124-149f-47f0-b07f-8fc1409167c2_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010de558
2023-08-09 21:11:17.672 INFO  com.alibaba.nacos.client.config.impl.Limiter      :62   [32m                  [0;39m limitTime:5.0
2023-08-09 21:11:17.689 WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder :87   [32m                  [0;39m Ignore the empty nacos configuration and get it based on dataId[business-service] & group[DEFAULT_GROUP]
2023-08-09 21:11:17.696 WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder :87   [32m                  [0;39m Ignore the empty nacos configuration and get it based on dataId[business-service.properties] & group[DEFAULT_GROUP]
2023-08-09 21:11:17.703 WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder :87   [32m                  [0;39m Ignore the empty nacos configuration and get it based on dataId[business-service-dev.properties] & group[DEFAULT_GROUP]
2023-08-09 21:11:17.704 INFO  o.s.c.b.c.PropertySourceBootstrapConfiguration    :108  [32m                  [0;39m Located property source: [BootstrapPropertySource {name='bootstrapProperties-business-service-dev.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-business-service.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-business-service,DEFAULT_GROUP'}]
2023-08-09 21:11:17.730 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:11:17.731 INFO  com.jktickets.BusinessApplication                 :636  [32m                  [0;39m The following 1 profile is active: "dev"
2023-08-09 21:11:19.226 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :294  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode
2023-08-09 21:11:19.230 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :138  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-08-09 21:11:19.276 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :208  [32m                  [0;39m Finished Spring Data repository scanning in 23 ms. Found 0 Redis repository interfaces.
2023-08-09 21:11:19.626 INFO  o.springframework.cloud.context.scope.GenericScope:282  [32m                  [0;39m BeanFactory id=2002ce87-f1ba-3f2d-89b2-7013af69be00
2023-08-09 21:11:19.713 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'com.jktickets.feign.MemberFeign' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:19.726 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:19.727 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:19.727 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:19.779 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:19.783 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:19.785 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:19.785 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$741/0x000000080125f1e0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:19.786 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:19.791 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:19.793 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:19.797 INFO  i.s.s.boot.autoconfigure.SeataAutoConfiguration   :63   [32m                  [0;39m Automatically configure Seata
2023-08-09 21:11:19.853 INFO  io.seata.config.ConfigurationFactory              :64   [32m                  [0;39m load Configuration from :Spring Configuration
2023-08-09 21:11:19.860 INFO  io.seata.config.nacos.NacosConfiguration          :233  [32m                  [0;39m Nacos check auth with userName/password.
2023-08-09 21:11:19.871 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:11:19.871 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:11:20.002 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of 2b4fad54-a7c9-403b-bd78-3c4b96a159d0_config-0
2023-08-09 21:11:20.002 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [2b4fad54-a7c9-403b-bd78-3c4b96a159d0_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$601/0x0000000800f99a28
2023-08-09 21:11:20.002 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [2b4fad54-a7c9-403b-bd78-3c4b96a159d0_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$602/0x0000000800f99e48
2023-08-09 21:11:20.002 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [2b4fad54-a7c9-403b-bd78-3c4b96a159d0_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2023-08-09 21:11:20.002 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [2b4fad54-a7c9-403b-bd78-3c4b96a159d0_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2023-08-09 21:11:20.003 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [2b4fad54-a7c9-403b-bd78-3c4b96a159d0_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:11:20.003 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:11:20.117 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [2b4fad54-a7c9-403b-bd78-3c4b96a159d0_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691586680009_127.0.0.1_64483
2023-08-09 21:11:20.117 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [2b4fad54-a7c9-403b-bd78-3c4b96a159d0_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:11:20.117 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [2b4fad54-a7c9-403b-bd78-3c4b96a159d0_config-0] Notify connected event to listeners.
2023-08-09 21:11:20.117 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [2b4fad54-a7c9-403b-bd78-3c4b96a159d0_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010de558
2023-08-09 21:11:20.118 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :639  [32m                  [0;39m [2b4fad54-a7c9-403b-bd78-3c4b96a159d0_config-0] Connected,notify listen context...
2023-08-09 21:11:20.126 INFO  com.alibaba.nacos.client.config.utils.JvmUtil     :54   [32m                  [0;39m isMultiInstance:false
2023-08-09 21:11:20.134 INFO  com.alibaba.nacos.client.config.impl.CacheData    :67   [32m                  [0;39m nacos.cache.data.init.snapshot = true 
2023-08-09 21:11:20.135 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] seataServer.properties+SEATA_GROUP+train
2023-08-09 21:11:20.144 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=seataServer.properties, group=SEATA_GROUP, cnt=1
2023-08-09 21:11:20.158 INFO  i.seata.spring.annotation.GlobalTransactionScanner:211  [32m                  [0;39m Initializing Global Transaction Clients ... 
2023-08-09 21:11:20.314 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] transport.enableTmClientBatchSendRequest+SEATA_GROUP+train
2023-08-09 21:11:20.314 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableTmClientBatchSendRequest, group=SEATA_GROUP, cnt=1
2023-08-09 21:11:20.315 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableTmClientBatchSendRequest, group=SEATA_GROUP, cnt=2
2023-08-09 21:11:20.333 INFO  io.seata.core.rpc.netty.NettyClientBootstrap      :147  [32m                  [0;39m NettyClientBootstrap has started
2023-08-09 21:11:20.334 INFO  io.seata.discovery.registry.RegistryFactory       :50   [32m                  [0;39m use registry center type: nacos
2023-08-09 21:11:20.343 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] service.vgroupMapping.train-group+SEATA_GROUP+train
2023-08-09 21:11:20.343 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=service.vgroupMapping.train-group, group=SEATA_GROUP, cnt=1
2023-08-09 21:11:20.349 INFO  com.alibaba.nacos.client.naming                   :73   [32m                  [0;39m initializer namespace from namespace attribute :null
2023-08-09 21:11:20.359 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:11:20.360 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:11:20.462 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of be06c231-1933-4bc4-bd07-3531717056f0
2023-08-09 21:11:20.465 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [be06c231-1933-4bc4-bd07-3531717056f0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2023-08-09 21:11:20.465 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [be06c231-1933-4bc4-bd07-3531717056f0] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2023-08-09 21:11:20.466 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [be06c231-1933-4bc4-bd07-3531717056f0] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2023-08-09 21:11:20.466 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [be06c231-1933-4bc4-bd07-3531717056f0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:11:20.467 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:11:20.584 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [be06c231-1933-4bc4-bd07-3531717056f0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691586680473_127.0.0.1_64484
2023-08-09 21:11:20.584 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [be06c231-1933-4bc4-bd07-3531717056f0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:11:20.584 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [be06c231-1933-4bc4-bd07-3531717056f0] Notify connected event to listeners.
2023-08-09 21:11:20.584 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [be06c231-1933-4bc4-bd07-3531717056f0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010de558
2023-08-09 21:11:20.585 INFO  com.alibaba.nacos.client.naming                   :78   [32m                  [0;39m Grpc connection connect
2023-08-09 21:11:20.586 INFO  com.alibaba.nacos.client.naming                   :167  [32m                  [0;39m [SUBSCRIBE-SERVICE] service:seata-server, group:SEATA_GROUP, clusters:default 
2023-08-09 21:11:20.606 INFO  com.alibaba.nacos.client.naming                   :184  [32m                  [0;39m init new ips(1) service: SEATA_GROUP@@seata-server@@default -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000,"instanceIdGenerator":"simple","ipDeleteTimeout":30000}]
2023-08-09 21:11:20.608 INFO  com.alibaba.nacos.client.naming                   :169  [32m                  [0;39m current ips:(1) service: SEATA_GROUP@@seata-server@@default -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000,"instanceIdGenerator":"simple","ipDeleteTimeout":30000}]
2023-08-09 21:11:20.613 INFO  com.alibaba.nacos.client.naming                   :167  [32m                  [0;39m [SUBSCRIBE-SERVICE] service:seata-server, group:SEATA_GROUP, clusters:default 
2023-08-09 21:11:20.615 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :105  [32m                  [0;39m will connect to 192.168.0.102:8091
2023-08-09 21:11:20.762 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :56   [32m                  [0;39m NettyPool create channel to transactionRole:TMROLE,address:192.168.0.102:8091,msg:< RegisterTMRequest{version='1.7.0', applicationId='business-service', transactionServiceGroup='train-group', extraData='ak=null
digest=train-group,192.168.0.102,1691586680760
timestamp=1691586680760
authVersion=V4
vgroup=train-group
ip=192.168.0.102
'} >
2023-08-09 21:11:21.070 WARN  i.s.c.l.EnhancedServiceLoader$InnerEnhancedServiceLoader:545  [32m                  [0;39m Load [io.seata.serializer.hessian.HessianSerializer] class fail: com/caucho/hessian/io/AbstractHessianOutput
2023-08-09 21:11:21.105 INFO  io.seata.core.rpc.netty.TmNettyRemotingClient     :224  [32m                  [0;39m register TM success. client version:1.7.0, server version:1.6.1,channel:[id: 0x61dcd1c5, L:/192.168.0.102:64485 - R:/192.168.0.102:8091]
2023-08-09 21:11:21.112 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :81   [32m                  [0;39m register success, cost 82 ms, version:1.6.1,role:TMROLE,channel:[id: 0x61dcd1c5, L:/192.168.0.102:64485 - R:/192.168.0.102:8091]
2023-08-09 21:11:21.113 INFO  i.seata.spring.annotation.GlobalTransactionScanner:225  [32m                  [0;39m Transaction Manager Client is initialized. applicationId[business-service] txServiceGroup[train-group]
2023-08-09 21:11:21.126 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [be06c231-1933-4bc4-bd07-3531717056f0] Receive server push request, request = NotifySubscriberRequest, requestId = 7
2023-08-09 21:11:21.127 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] transport.enableRmClientBatchSendRequest+SEATA_GROUP+train
2023-08-09 21:11:21.127 INFO  com.alibaba.nacos.client.naming                   :184  [32m                  [0;39m init new ips(1) service: SEATA_GROUP@@seata-server -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000,"instanceIdGenerator":"simple","ipDeleteTimeout":30000}]
2023-08-09 21:11:21.127 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableRmClientBatchSendRequest, group=SEATA_GROUP, cnt=1
2023-08-09 21:11:21.127 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableRmClientBatchSendRequest, group=SEATA_GROUP, cnt=2
2023-08-09 21:11:21.127 INFO  com.alibaba.nacos.client.naming                   :169  [32m                  [0;39m current ips:(1) service: SEATA_GROUP@@seata-server -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000,"instanceIdGenerator":"simple","ipDeleteTimeout":30000}]
2023-08-09 21:11:21.129 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [be06c231-1933-4bc4-bd07-3531717056f0] Ack server push request, request = NotifySubscriberRequest, requestId = 7
2023-08-09 21:11:21.150 INFO  io.seata.rm.datasource.AsyncWorker                :73   [32m                  [0;39m Async Commit Buffer Limit: 10000
2023-08-09 21:11:21.151 INFO  io.seata.rm.datasource.xa.ResourceManagerXA       :59   [32m                  [0;39m ResourceManagerXA init ...
2023-08-09 21:11:21.161 INFO  io.seata.core.rpc.netty.NettyClientBootstrap      :147  [32m                  [0;39m NettyClientBootstrap has started
2023-08-09 21:11:21.162 INFO  i.seata.spring.annotation.GlobalTransactionScanner:230  [32m                  [0;39m Resource Manager is initialized. applicationId[business-service] txServiceGroup[train-group]
2023-08-09 21:11:21.162 INFO  i.seata.spring.annotation.GlobalTransactionScanner:234  [32m                  [0;39m Global Transaction Clients are initialized. 
2023-08-09 21:11:22.444 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :114  [32m                  [0;39m Tomcat initialized with port(s): 8002 (http)
2023-08-09 21:11:22.460 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8002"]
2023-08-09 21:11:22.461 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-08-09 21:11:22.462 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-08-09 21:11:22.570 INFO  o.a.c.c.C.[Tomcat].[localhost].[/business]        :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-08-09 21:11:22.570 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :291  [32m                  [0;39m Root WebApplicationContext: initialization completed in 4813 ms
2023-08-09 21:11:23.012 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m                  [0;39m HikariPool-1 - Starting...
2023-08-09 21:11:23.384 INFO  com.zaxxer.hikari.pool.HikariPool                 :565  [32m                  [0;39m HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7953b150
2023-08-09 21:11:23.386 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m                  [0;39m HikariPool-1 - Start completed.
2023-08-09 21:11:23.503 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :105  [32m                  [0;39m will connect to 192.168.0.102:8091
2023-08-09 21:11:23.503 INFO  io.seata.core.rpc.netty.RmNettyRemotingClient     :276  [32m                  [0;39m RM will register :jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business
2023-08-09 21:11:23.504 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :56   [32m                  [0;39m NettyPool create channel to transactionRole:RMROLE,address:192.168.0.102:8091,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', version='1.7.0', applicationId='business-service', transactionServiceGroup='train-group', extraData='null'} >
2023-08-09 21:11:23.515 INFO  io.seata.core.rpc.netty.RmNettyRemotingClient     :177  [32m                  [0;39m register RM success. client version:1.7.0, server version:1.6.1,channel:[id: 0x8ad5f89b, L:/192.168.0.102:64490 - R:/192.168.0.102:8091]
2023-08-09 21:11:23.515 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :81   [32m                  [0;39m register success, cost 8 ms, version:1.6.1,role:RMROLE,channel:[id: 0x8ad5f89b, L:/192.168.0.102:64490 - R:/192.168.0.102:8091]
2023-08-09 21:11:23.529 INFO  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator:101  [32m                  [0;39m Auto proxy data source 'dataSource' by 'AT' mode.
2023-08-09 21:11:24.292 WARN  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :62   [32m                  [0;39m Unable to start LiveReload server
2023-08-09 21:11:24.340 INFO  o.s.cloud.openfeign.FeignClientFactoryBean        :437  [32m                  [0;39m For 'member-service' URL not provided. Will try picking an instance via load-balancing.
2023-08-09 21:11:24.516 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] client.tm.degradeCheck+SEATA_GROUP+train
2023-08-09 21:11:24.517 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.tm.degradeCheck, group=SEATA_GROUP, cnt=1
2023-08-09 21:11:24.518 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.tm.degradeCheck, group=SEATA_GROUP, cnt=2
2023-08-09 21:11:24.524 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] service.disableGlobalTransaction+SEATA_GROUP+train
2023-08-09 21:11:24.524 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=service.disableGlobalTransaction, group=SEATA_GROUP, cnt=1
2023-08-09 21:11:24.524 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=service.disableGlobalTransaction, group=SEATA_GROUP, cnt=2
2023-08-09 21:11:24.525 INFO  i.seata.spring.annotation.GlobalTransactionScanner:308  [32m                  [0;39m Bean [com.jktickets.service.impl.AfterConfirmOrderServiceImpl] with name [afterConfirmOrderServiceImpl] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
2023-08-09 21:11:24.551 WARN  o.s.core.LocalVariableTableParameterNameDiscoverer:123  [32m                  [0;39m Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.redisson.spring.starter.RedissonAutoConfiguration
2023-08-09 21:11:24.672 INFO  org.redisson.Version                              :41   [32m                  [0;39m Redisson 3.21.0
2023-08-09 21:11:25.032 INFO  o.r.connection.pool.MasterPubSubConnectionPool    :158  [32m                  [0;39m 1 connections initialized for r-bp1e8io6hj1e27e15lpd.redis.rds.aliyuncs.com/47.110.123.191:6379
2023-08-09 21:11:25.962 INFO  org.redisson.connection.pool.MasterConnectionPool :158  [32m                  [0;39m 24 connections initialized for r-bp1e8io6hj1e27e15lpd.redis.rds.aliyuncs.com/47.110.123.191:6379
2023-08-09 21:11:27.783 WARN  o.s.core.LocalVariableTableParameterNameDiscoverer:123  [32m                  [0;39m Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: com.github.pagehelper.autoconfigure.PageHelperStandardProperties
2023-08-09 21:11:29.119 INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver  :58   [32m                  [0;39m Exposing 1 endpoint(s) beneath base path '/actuator'
2023-08-09 21:11:29.225 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8002"]
2023-08-09 21:11:29.246 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :226  [32m                  [0;39m Tomcat started on port(s): 8002 (http) with context path '/business'
2023-08-09 21:11:29.248 INFO  com.alibaba.nacos.client.naming                   :62   [32m                  [0;39m initializer namespace from ans.namespace attribute : null
2023-08-09 21:11:29.249 INFO  com.alibaba.nacos.client.naming                   :66   [32m                  [0;39m initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2023-08-09 21:11:29.249 INFO  com.alibaba.nacos.client.naming                   :73   [32m                  [0;39m initializer namespace from namespace attribute :null
2023-08-09 21:11:29.249 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:11:29.249 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:11:29.250 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of 12798e1c-1141-4ec9-b3e0-0a1888c349fa
2023-08-09 21:11:29.251 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [12798e1c-1141-4ec9-b3e0-0a1888c349fa] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2023-08-09 21:11:29.251 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [12798e1c-1141-4ec9-b3e0-0a1888c349fa] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2023-08-09 21:11:29.252 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [12798e1c-1141-4ec9-b3e0-0a1888c349fa] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2023-08-09 21:11:29.252 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [12798e1c-1141-4ec9-b3e0-0a1888c349fa] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:11:29.252 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:11:29.364 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [12798e1c-1141-4ec9-b3e0-0a1888c349fa] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691586689258_127.0.0.1_64527
2023-08-09 21:11:29.364 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [12798e1c-1141-4ec9-b3e0-0a1888c349fa] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:11:29.364 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [12798e1c-1141-4ec9-b3e0-0a1888c349fa] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010de558
2023-08-09 21:11:29.364 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [12798e1c-1141-4ec9-b3e0-0a1888c349fa] Notify connected event to listeners.
2023-08-09 21:11:29.364 INFO  com.alibaba.nacos.client.naming                   :78   [32m                  [0;39m Grpc connection connect
2023-08-09 21:11:29.364 INFO  com.alibaba.nacos.client.naming                   :121  [32m                  [0;39m [REGISTER-SERVICE] train registering service business-service with instance Instance{instanceId='null', ip='192.168.0.102', port=8002, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2023-08-09 21:11:29.370 INFO  c.a.cloud.nacos.registry.NacosServiceRegistry     :76   [32m                  [0;39m nacos registry, DEFAULT_GROUP business-service 192.168.0.102:8002 register finished
2023-08-09 21:11:29.758 INFO  com.jktickets.BusinessApplication                 :57   [32m                  [0;39m Started BusinessApplication in 16.323 seconds (process running for 17.454)
2023-08-09 21:11:29.766 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] business-service+DEFAULT_GROUP+train
2023-08-09 21:11:29.766 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=business-service, group=DEFAULT_GROUP, cnt=1
2023-08-09 21:11:29.766 INFO  c.a.cloud.nacos.refresh.NacosContextRefresher     :129  [32m                  [0;39m [Nacos Config] Listening config: dataId=business-service, group=DEFAULT_GROUP
2023-08-09 21:11:29.767 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] business-service.properties+DEFAULT_GROUP+train
2023-08-09 21:11:29.767 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=business-service.properties, group=DEFAULT_GROUP, cnt=1
2023-08-09 21:11:29.767 INFO  c.a.cloud.nacos.refresh.NacosContextRefresher     :129  [32m                  [0;39m [Nacos Config] Listening config: dataId=business-service.properties, group=DEFAULT_GROUP
2023-08-09 21:11:29.768 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] business-service-dev.properties+DEFAULT_GROUP+train
2023-08-09 21:11:29.768 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=business-service-dev.properties, group=DEFAULT_GROUP, cnt=1
2023-08-09 21:11:29.768 INFO  c.a.cloud.nacos.refresh.NacosContextRefresher     :129  [32m                  [0;39m [Nacos Config] Listening config: dataId=business-service-dev.properties, group=DEFAULT_GROUP
2023-08-09 21:11:29.770 INFO  com.jktickets.BusinessApplication                 :27   [32m                  [0;39m 启动成功！！
2023-08-09 21:11:29.771 INFO  com.jktickets.BusinessApplication                 :29   [32m                  [0;39m 测试地址: 	http://127.0.0.1:8002/business/hello
2023-08-09 21:11:30.397 INFO  o.a.c.c.C.[Tomcat].[localhost].[/business]        :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-08-09 21:11:30.398 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-08-09 21:11:30.403 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 4 ms
2023-08-09 21:11:38.323 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:11:38.336 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 8.0.0.Final
2023-08-09 21:11:38.404 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:11:38.439 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :250  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-08-09 21:11:38.660 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:11:38.662 INFO  com.alibaba.nacos.client.utils.ParamUtil          :87   [32m                  [0;39m [settings] [req-serv] nacos-server port:8848
2023-08-09 21:11:38.662 INFO  com.alibaba.nacos.client.utils.ParamUtil          :98   [32m                  [0;39m [settings] [http-client] connect timeout:1000
2023-08-09 21:11:38.669 INFO  com.alibaba.nacos.client.utils.ParamUtil          :105  [32m                  [0;39m PER_TASK_CONFIG_SIZE: 3000.0
2023-08-09 21:11:38.708 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:11:38.708 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:11:38.712 INFO  c.a.n.client.auth.ram.identify.CredentialWatcher  :165  [32m                  [0;39m null No credential found
2023-08-09 21:11:39.240 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:11:39.255 INFO  c.a.n.client.config.impl.LocalConfigInfoProcessor :63   [32m                  [0;39m LOCAL_SNAPSHOT_PATH:C:\Users\Administrator\nacos\config
2023-08-09 21:11:39.261 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of 612ac37d-f2a3-47e9-bf60-303c05261602_config-0
2023-08-09 21:11:39.284 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [612ac37d-f2a3-47e9-bf60-303c05261602_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$601/0x0000000800f99830
2023-08-09 21:11:39.284 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [612ac37d-f2a3-47e9-bf60-303c05261602_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$602/0x0000000800f99c50
2023-08-09 21:11:39.285 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [612ac37d-f2a3-47e9-bf60-303c05261602_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2023-08-09 21:11:39.285 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [612ac37d-f2a3-47e9-bf60-303c05261602_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2023-08-09 21:11:39.293 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [612ac37d-f2a3-47e9-bf60-303c05261602_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:11:39.333 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:11:40.644 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [612ac37d-f2a3-47e9-bf60-303c05261602_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691586700420_127.0.0.1_64541
2023-08-09 21:11:40.645 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [612ac37d-f2a3-47e9-bf60-303c05261602_config-0] Notify connected event to listeners.
2023-08-09 21:11:40.646 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :639  [32m                  [0;39m [612ac37d-f2a3-47e9-bf60-303c05261602_config-0] Connected,notify listen context...
2023-08-09 21:11:40.646 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [612ac37d-f2a3-47e9-bf60-303c05261602_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:11:40.646 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [612ac37d-f2a3-47e9-bf60-303c05261602_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010de558
2023-08-09 21:11:40.702 INFO  com.alibaba.nacos.client.config.impl.Limiter      :62   [32m                  [0;39m limitTime:5.0
2023-08-09 21:11:40.721 WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder :87   [32m                  [0;39m Ignore the empty nacos configuration and get it based on dataId[business-service] & group[DEFAULT_GROUP]
2023-08-09 21:11:40.732 WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder :87   [32m                  [0;39m Ignore the empty nacos configuration and get it based on dataId[business-service.properties] & group[DEFAULT_GROUP]
2023-08-09 21:11:40.737 WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder :87   [32m                  [0;39m Ignore the empty nacos configuration and get it based on dataId[business-service-dev.properties] & group[DEFAULT_GROUP]
2023-08-09 21:11:40.739 INFO  o.s.c.b.c.PropertySourceBootstrapConfiguration    :108  [32m                  [0;39m Located property source: [BootstrapPropertySource {name='bootstrapProperties-business-service-dev.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-business-service.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-business-service,DEFAULT_GROUP'}]
2023-08-09 21:11:40.765 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:11:40.766 INFO  com.jktickets.BusinessApplication                 :636  [32m                  [0;39m The following 1 profile is active: "dev"
2023-08-09 21:11:42.070 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :294  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode
2023-08-09 21:11:42.073 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :138  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-08-09 21:11:42.110 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :208  [32m                  [0;39m Finished Spring Data repository scanning in 20 ms. Found 0 Redis repository interfaces.
2023-08-09 21:11:42.413 INFO  o.springframework.cloud.context.scope.GenericScope:282  [32m                  [0;39m BeanFactory id=2002ce87-f1ba-3f2d-89b2-7013af69be00
2023-08-09 21:11:42.504 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'com.jktickets.feign.MemberFeign' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:42.517 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:42.518 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:42.519 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:42.563 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:42.567 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:42.568 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:42.569 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$741/0x000000080125f1e0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:42.570 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:42.574 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:42.576 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:11:42.580 INFO  i.s.s.boot.autoconfigure.SeataAutoConfiguration   :63   [32m                  [0;39m Automatically configure Seata
2023-08-09 21:11:42.637 INFO  io.seata.config.ConfigurationFactory              :64   [32m                  [0;39m load Configuration from :Spring Configuration
2023-08-09 21:11:42.645 INFO  io.seata.config.nacos.NacosConfiguration          :233  [32m                  [0;39m Nacos check auth with userName/password.
2023-08-09 21:11:42.657 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:11:42.658 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:11:42.786 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of ba81ac17-9bd5-4071-9d59-c77e8d7da2c1_config-0
2023-08-09 21:11:42.786 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [ba81ac17-9bd5-4071-9d59-c77e8d7da2c1_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$601/0x0000000800f99830
2023-08-09 21:11:42.786 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [ba81ac17-9bd5-4071-9d59-c77e8d7da2c1_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$602/0x0000000800f99c50
2023-08-09 21:11:42.787 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [ba81ac17-9bd5-4071-9d59-c77e8d7da2c1_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2023-08-09 21:11:42.787 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [ba81ac17-9bd5-4071-9d59-c77e8d7da2c1_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2023-08-09 21:11:42.787 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [ba81ac17-9bd5-4071-9d59-c77e8d7da2c1_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:11:42.788 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:11:42.906 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [ba81ac17-9bd5-4071-9d59-c77e8d7da2c1_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691586702793_127.0.0.1_64545
2023-08-09 21:11:42.906 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [ba81ac17-9bd5-4071-9d59-c77e8d7da2c1_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:11:42.907 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [ba81ac17-9bd5-4071-9d59-c77e8d7da2c1_config-0] Notify connected event to listeners.
2023-08-09 21:11:42.907 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [ba81ac17-9bd5-4071-9d59-c77e8d7da2c1_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010de558
2023-08-09 21:11:42.907 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :639  [32m                  [0;39m [ba81ac17-9bd5-4071-9d59-c77e8d7da2c1_config-0] Connected,notify listen context...
2023-08-09 21:11:42.917 INFO  com.alibaba.nacos.client.config.utils.JvmUtil     :54   [32m                  [0;39m isMultiInstance:false
2023-08-09 21:11:42.926 INFO  com.alibaba.nacos.client.config.impl.CacheData    :67   [32m                  [0;39m nacos.cache.data.init.snapshot = true 
2023-08-09 21:11:42.928 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] seataServer.properties+SEATA_GROUP+train
2023-08-09 21:11:42.941 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=seataServer.properties, group=SEATA_GROUP, cnt=1
2023-08-09 21:11:42.956 INFO  i.seata.spring.annotation.GlobalTransactionScanner:211  [32m                  [0;39m Initializing Global Transaction Clients ... 
2023-08-09 21:11:43.090 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] transport.enableTmClientBatchSendRequest+SEATA_GROUP+train
2023-08-09 21:11:43.091 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableTmClientBatchSendRequest, group=SEATA_GROUP, cnt=1
2023-08-09 21:11:43.092 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableTmClientBatchSendRequest, group=SEATA_GROUP, cnt=2
2023-08-09 21:11:43.109 INFO  io.seata.core.rpc.netty.NettyClientBootstrap      :147  [32m                  [0;39m NettyClientBootstrap has started
2023-08-09 21:11:43.111 INFO  io.seata.discovery.registry.RegistryFactory       :50   [32m                  [0;39m use registry center type: nacos
2023-08-09 21:11:43.118 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] service.vgroupMapping.train-group+SEATA_GROUP+train
2023-08-09 21:11:43.119 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=service.vgroupMapping.train-group, group=SEATA_GROUP, cnt=1
2023-08-09 21:11:43.126 INFO  com.alibaba.nacos.client.naming                   :73   [32m                  [0;39m initializer namespace from namespace attribute :null
2023-08-09 21:11:43.136 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:11:43.137 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:11:43.238 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of fc22549c-c16a-4b70-8b40-582092996662
2023-08-09 21:11:43.240 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fc22549c-c16a-4b70-8b40-582092996662] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2023-08-09 21:11:43.240 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fc22549c-c16a-4b70-8b40-582092996662] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2023-08-09 21:11:43.241 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fc22549c-c16a-4b70-8b40-582092996662] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2023-08-09 21:11:43.241 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fc22549c-c16a-4b70-8b40-582092996662] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:11:43.242 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:11:43.361 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fc22549c-c16a-4b70-8b40-582092996662] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691586703248_127.0.0.1_64546
2023-08-09 21:11:43.362 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fc22549c-c16a-4b70-8b40-582092996662] Notify connected event to listeners.
2023-08-09 21:11:43.362 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fc22549c-c16a-4b70-8b40-582092996662] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:11:43.362 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fc22549c-c16a-4b70-8b40-582092996662] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010de558
2023-08-09 21:11:43.362 INFO  com.alibaba.nacos.client.naming                   :78   [32m                  [0;39m Grpc connection connect
2023-08-09 21:11:43.364 INFO  com.alibaba.nacos.client.naming                   :167  [32m                  [0;39m [SUBSCRIBE-SERVICE] service:seata-server, group:SEATA_GROUP, clusters:default 
2023-08-09 21:11:43.386 INFO  com.alibaba.nacos.client.naming                   :184  [32m                  [0;39m init new ips(1) service: SEATA_GROUP@@seata-server@@default -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatInterval":5000,"instanceIdGenerator":"simple","instanceHeartBeatTimeOut":15000,"ipDeleteTimeout":30000}]
2023-08-09 21:11:43.388 INFO  com.alibaba.nacos.client.naming                   :169  [32m                  [0;39m current ips:(1) service: SEATA_GROUP@@seata-server@@default -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatInterval":5000,"instanceIdGenerator":"simple","instanceHeartBeatTimeOut":15000,"ipDeleteTimeout":30000}]
2023-08-09 21:11:43.396 INFO  com.alibaba.nacos.client.naming                   :167  [32m                  [0;39m [SUBSCRIBE-SERVICE] service:seata-server, group:SEATA_GROUP, clusters:default 
2023-08-09 21:11:43.398 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :105  [32m                  [0;39m will connect to 192.168.0.102:8091
2023-08-09 21:11:43.533 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :56   [32m                  [0;39m NettyPool create channel to transactionRole:TMROLE,address:192.168.0.102:8091,msg:< RegisterTMRequest{version='1.7.0', applicationId='business-service', transactionServiceGroup='train-group', extraData='ak=null
digest=train-group,192.168.0.102,1691586703530
timestamp=1691586703530
authVersion=V4
vgroup=train-group
ip=192.168.0.102
'} >
2023-08-09 21:11:43.801 WARN  i.s.c.l.EnhancedServiceLoader$InnerEnhancedServiceLoader:545  [32m                  [0;39m Load [io.seata.serializer.hessian.HessianSerializer] class fail: com/caucho/hessian/io/AbstractHessianOutput
2023-08-09 21:11:43.827 INFO  io.seata.core.rpc.netty.TmNettyRemotingClient     :224  [32m                  [0;39m register TM success. client version:1.7.0, server version:1.6.1,channel:[id: 0xdee33f16, L:/192.168.0.102:64547 - R:/192.168.0.102:8091]
2023-08-09 21:11:43.832 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :81   [32m                  [0;39m register success, cost 69 ms, version:1.6.1,role:TMROLE,channel:[id: 0xdee33f16, L:/192.168.0.102:64547 - R:/192.168.0.102:8091]
2023-08-09 21:11:43.833 INFO  i.seata.spring.annotation.GlobalTransactionScanner:225  [32m                  [0;39m Transaction Manager Client is initialized. applicationId[business-service] txServiceGroup[train-group]
2023-08-09 21:11:43.842 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] transport.enableRmClientBatchSendRequest+SEATA_GROUP+train
2023-08-09 21:11:43.842 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableRmClientBatchSendRequest, group=SEATA_GROUP, cnt=1
2023-08-09 21:11:43.843 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableRmClientBatchSendRequest, group=SEATA_GROUP, cnt=2
2023-08-09 21:11:43.860 INFO  io.seata.rm.datasource.AsyncWorker                :73   [32m                  [0;39m Async Commit Buffer Limit: 10000
2023-08-09 21:11:43.860 INFO  io.seata.rm.datasource.xa.ResourceManagerXA       :59   [32m                  [0;39m ResourceManagerXA init ...
2023-08-09 21:11:43.866 INFO  io.seata.core.rpc.netty.NettyClientBootstrap      :147  [32m                  [0;39m NettyClientBootstrap has started
2023-08-09 21:11:43.867 INFO  i.seata.spring.annotation.GlobalTransactionScanner:230  [32m                  [0;39m Resource Manager is initialized. applicationId[business-service] txServiceGroup[train-group]
2023-08-09 21:11:43.867 INFO  i.seata.spring.annotation.GlobalTransactionScanner:234  [32m                  [0;39m Global Transaction Clients are initialized. 
2023-08-09 21:11:43.995 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fc22549c-c16a-4b70-8b40-582092996662] Receive server push request, request = NotifySubscriberRequest, requestId = 8
2023-08-09 21:11:43.995 INFO  com.alibaba.nacos.client.naming                   :184  [32m                  [0;39m init new ips(1) service: SEATA_GROUP@@seata-server -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatInterval":5000,"instanceIdGenerator":"simple","instanceHeartBeatTimeOut":15000,"ipDeleteTimeout":30000}]
2023-08-09 21:11:43.996 INFO  com.alibaba.nacos.client.naming                   :169  [32m                  [0;39m current ips:(1) service: SEATA_GROUP@@seata-server -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatInterval":5000,"instanceIdGenerator":"simple","instanceHeartBeatTimeOut":15000,"ipDeleteTimeout":30000}]
2023-08-09 21:11:43.997 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fc22549c-c16a-4b70-8b40-582092996662] Ack server push request, request = NotifySubscriberRequest, requestId = 8
2023-08-09 21:11:44.972 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :114  [32m                  [0;39m Tomcat initialized with port(s): 18002 (http)
2023-08-09 21:11:44.983 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-18002"]
2023-08-09 21:11:44.984 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-08-09 21:11:44.984 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-08-09 21:11:45.068 INFO  o.a.c.c.C.[Tomcat].[localhost].[/business]        :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-08-09 21:11:45.069 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :291  [32m                  [0;39m Root WebApplicationContext: initialization completed in 4280 ms
2023-08-09 21:11:45.461 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m                  [0;39m HikariPool-1 - Starting...
2023-08-09 21:11:45.774 INFO  com.zaxxer.hikari.pool.HikariPool                 :565  [32m                  [0;39m HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@24f46e92
2023-08-09 21:11:45.778 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m                  [0;39m HikariPool-1 - Start completed.
2023-08-09 21:11:45.919 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :105  [32m                  [0;39m will connect to 192.168.0.102:8091
2023-08-09 21:11:45.920 INFO  io.seata.core.rpc.netty.RmNettyRemotingClient     :276  [32m                  [0;39m RM will register :jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business
2023-08-09 21:11:45.921 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :56   [32m                  [0;39m NettyPool create channel to transactionRole:RMROLE,address:192.168.0.102:8091,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', version='1.7.0', applicationId='business-service', transactionServiceGroup='train-group', extraData='null'} >
2023-08-09 21:11:45.935 INFO  io.seata.core.rpc.netty.RmNettyRemotingClient     :177  [32m                  [0;39m register RM success. client version:1.7.0, server version:1.6.1,channel:[id: 0x6500b726, L:/192.168.0.102:64550 - R:/192.168.0.102:8091]
2023-08-09 21:11:45.936 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :81   [32m                  [0;39m register success, cost 11 ms, version:1.6.1,role:RMROLE,channel:[id: 0x6500b726, L:/192.168.0.102:64550 - R:/192.168.0.102:8091]
2023-08-09 21:11:45.956 INFO  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator:101  [32m                  [0;39m Auto proxy data source 'dataSource' by 'AT' mode.
2023-08-09 21:11:46.644 WARN  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :62   [32m                  [0;39m Unable to start LiveReload server
2023-08-09 21:11:46.681 INFO  o.s.cloud.openfeign.FeignClientFactoryBean        :437  [32m                  [0;39m For 'member-service' URL not provided. Will try picking an instance via load-balancing.
2023-08-09 21:11:46.847 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] client.tm.degradeCheck+SEATA_GROUP+train
2023-08-09 21:11:46.847 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.tm.degradeCheck, group=SEATA_GROUP, cnt=1
2023-08-09 21:11:46.848 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.tm.degradeCheck, group=SEATA_GROUP, cnt=2
2023-08-09 21:11:46.854 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] service.disableGlobalTransaction+SEATA_GROUP+train
2023-08-09 21:11:46.855 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=service.disableGlobalTransaction, group=SEATA_GROUP, cnt=1
2023-08-09 21:11:46.855 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=service.disableGlobalTransaction, group=SEATA_GROUP, cnt=2
2023-08-09 21:11:46.855 INFO  i.seata.spring.annotation.GlobalTransactionScanner:308  [32m                  [0;39m Bean [com.jktickets.service.impl.AfterConfirmOrderServiceImpl] with name [afterConfirmOrderServiceImpl] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
2023-08-09 21:11:46.877 WARN  o.s.core.LocalVariableTableParameterNameDiscoverer:123  [32m                  [0;39m Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.redisson.spring.starter.RedissonAutoConfiguration
2023-08-09 21:11:46.995 INFO  org.redisson.Version                              :41   [32m                  [0;39m Redisson 3.21.0
2023-08-09 21:11:47.412 INFO  o.r.connection.pool.MasterPubSubConnectionPool    :158  [32m                  [0;39m 1 connections initialized for r-bp1e8io6hj1e27e15lpd.redis.rds.aliyuncs.com/47.110.123.191:6379
2023-08-09 21:11:48.536 INFO  org.redisson.connection.pool.MasterConnectionPool :158  [32m                  [0;39m 24 connections initialized for r-bp1e8io6hj1e27e15lpd.redis.rds.aliyuncs.com/47.110.123.191:6379
2023-08-09 21:11:50.321 WARN  o.s.core.LocalVariableTableParameterNameDiscoverer:123  [32m                  [0;39m Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: com.github.pagehelper.autoconfigure.PageHelperStandardProperties
2023-08-09 21:11:51.685 INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver  :58   [32m                  [0;39m Exposing 1 endpoint(s) beneath base path '/actuator'
2023-08-09 21:11:51.795 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-18002"]
2023-08-09 21:11:51.811 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :226  [32m                  [0;39m Tomcat started on port(s): 18002 (http) with context path '/business'
2023-08-09 21:11:51.814 INFO  com.alibaba.nacos.client.naming                   :62   [32m                  [0;39m initializer namespace from ans.namespace attribute : null
2023-08-09 21:11:51.814 INFO  com.alibaba.nacos.client.naming                   :66   [32m                  [0;39m initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2023-08-09 21:11:51.815 INFO  com.alibaba.nacos.client.naming                   :73   [32m                  [0;39m initializer namespace from namespace attribute :null
2023-08-09 21:11:51.816 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:11:51.816 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:11:51.817 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of eb273791-f3ba-4863-8e2b-7131a871f0c0
2023-08-09 21:11:51.817 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [eb273791-f3ba-4863-8e2b-7131a871f0c0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2023-08-09 21:11:51.818 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [eb273791-f3ba-4863-8e2b-7131a871f0c0] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2023-08-09 21:11:51.818 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [eb273791-f3ba-4863-8e2b-7131a871f0c0] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2023-08-09 21:11:51.818 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [eb273791-f3ba-4863-8e2b-7131a871f0c0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:11:51.819 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:11:51.930 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [eb273791-f3ba-4863-8e2b-7131a871f0c0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691586711824_127.0.0.1_64585
2023-08-09 21:11:51.930 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [eb273791-f3ba-4863-8e2b-7131a871f0c0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:11:51.930 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [eb273791-f3ba-4863-8e2b-7131a871f0c0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010de558
2023-08-09 21:11:51.930 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [eb273791-f3ba-4863-8e2b-7131a871f0c0] Notify connected event to listeners.
2023-08-09 21:11:51.931 INFO  com.alibaba.nacos.client.naming                   :78   [32m                  [0;39m Grpc connection connect
2023-08-09 21:11:51.931 INFO  com.alibaba.nacos.client.naming                   :121  [32m                  [0;39m [REGISTER-SERVICE] train registering service business-service with instance Instance{instanceId='null', ip='192.168.0.102', port=18002, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2023-08-09 21:11:51.943 INFO  c.a.cloud.nacos.registry.NacosServiceRegistry     :76   [32m                  [0;39m nacos registry, DEFAULT_GROUP business-service 192.168.0.102:18002 register finished
2023-08-09 21:11:52.334 INFO  com.jktickets.BusinessApplication                 :57   [32m                  [0;39m Started BusinessApplication in 15.071 seconds (process running for 16.047)
2023-08-09 21:11:52.342 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] business-service+DEFAULT_GROUP+train
2023-08-09 21:11:52.343 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=business-service, group=DEFAULT_GROUP, cnt=1
2023-08-09 21:11:52.343 INFO  c.a.cloud.nacos.refresh.NacosContextRefresher     :129  [32m                  [0;39m [Nacos Config] Listening config: dataId=business-service, group=DEFAULT_GROUP
2023-08-09 21:11:52.344 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] business-service.properties+DEFAULT_GROUP+train
2023-08-09 21:11:52.344 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=business-service.properties, group=DEFAULT_GROUP, cnt=1
2023-08-09 21:11:52.344 INFO  c.a.cloud.nacos.refresh.NacosContextRefresher     :129  [32m                  [0;39m [Nacos Config] Listening config: dataId=business-service.properties, group=DEFAULT_GROUP
2023-08-09 21:11:52.345 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] business-service-dev.properties+DEFAULT_GROUP+train
2023-08-09 21:11:52.345 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=business-service-dev.properties, group=DEFAULT_GROUP, cnt=1
2023-08-09 21:11:52.345 INFO  c.a.cloud.nacos.refresh.NacosContextRefresher     :129  [32m                  [0;39m [Nacos Config] Listening config: dataId=business-service-dev.properties, group=DEFAULT_GROUP
2023-08-09 21:11:52.348 INFO  com.jktickets.BusinessApplication                 :27   [32m                  [0;39m 启动成功！！
2023-08-09 21:11:52.348 INFO  com.jktickets.BusinessApplication                 :29   [32m                  [0;39m 测试地址: 	http://127.0.0.1:18002/business/hello
2023-08-09 21:11:52.869 INFO  o.a.c.c.C.[Tomcat].[localhost].[/business]        :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-08-09 21:11:52.869 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-08-09 21:11:52.872 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 3 ms
2023-08-09 21:12:32.187 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586752180p8g  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:12:32.466 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586752180p8g  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:12:32.470 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586752180p8g  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:12:32.561 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586752180p8g  [0;39m ------------- 开始 -------------
2023-08-09 21:12:32.562 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586752180p8g  [0;39m 请求地址: http://192.168.0.102:8002/business/station/queryAll GET
2023-08-09 21:12:32.562 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586752180p8g  [0;39m 类名方法: com.jktickets.controller.StationController.queryAllStationList
2023-08-09 21:12:32.563 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586752180p8g  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:12:32.607 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586752180p8g  [0;39m 请求参数: []
2023-08-09 21:12:32.608 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586752180p8g  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.StationMapper.selectByExample(StationExample))
2023-08-09 21:12:32.609 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586752180p8g  [0;39m 参数值: com.jktickets.domain.StationExample@6f885807
2023-08-09 21:12:32.675 DEBUG c.jktickets.mapper.StationMapper.selectByExample  :137  [32m1691586752180p8g  [0;39m ==>  Preparing: select id, `name`, name_pinyin, name_py, create_time, update_time from station order by name_pinyin asc
2023-08-09 21:12:32.717 DEBUG c.jktickets.mapper.StationMapper.selectByExample  :137  [32m1691586752180p8g  [0;39m ==> Parameters: 
2023-08-09 21:12:32.762 TRACE c.jktickets.mapper.StationMapper.selectByExample  :143  [32m1691586752180p8g  [0;39m <==    Columns: id, name, name_pinyin, name_py, create_time, update_time
2023-08-09 21:12:32.765 TRACE c.jktickets.mapper.StationMapper.selectByExample  :143  [32m1691586752180p8g  [0;39m <==        Row: 1680219843401486336, 杭州, hangzhou, hz, 2023-07-15 22:16:42.268, 2023-07-15 22:16:42.268
2023-08-09 21:12:32.768 TRACE c.jktickets.mapper.StationMapper.selectByExample  :143  [32m1691586752180p8g  [0;39m <==        Row: 1680205919650189312, 上海, shanghai, sh, 2023-07-15 21:21:22.591, 2023-07-15 21:21:22.591
2023-08-09 21:12:32.769 TRACE c.jktickets.mapper.StationMapper.selectByExample  :143  [32m1691586752180p8g  [0;39m <==        Row: 1680205862385356800, 温州, wenzhou, wz, 2023-07-15 21:21:08.871, 2023-07-15 21:21:08.871
2023-08-09 21:12:32.770 DEBUG c.jktickets.mapper.StationMapper.selectByExample  :137  [32m1691586752180p8g  [0;39m <==      Total: 3
2023-08-09 21:12:32.771 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586752180p8g  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.StationMapper.selectByExample(StationExample))
2023-08-09 21:12:32.807 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586752180p8g  [0;39m 返回结果: {"code":0,"message":"","result":[{"createTime":1689430602268,"id":1680219843401486336,"name":"杭州","namePinyin":"hangzhou","namePy":"hz","updateTime":1689430602268},{"createTime":1689427282591,"id":1680205919650189312,"name":"上海","namePinyin":"shanghai","namePy":"sh","updateTime":1689427282591},{"createTime":1689427268871,"id":1680205862385356800,"name":"温州","namePinyin":"wenzhou","namePy":"wz","updateTime":1689427268871}],"success":true}
2023-08-09 21:12:32.808 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586752180p8g  [0;39m ------------- 结束 耗时：248 ms -------------
2023-08-09 21:12:32.953 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m16915867529468i9  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:12:33.209 INFO  com.jktickets.utils.JwtUtil                       :64   [32m16915867529468i9  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:12:33.212 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m16915867529468i9  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:12:33.261 INFO  com.jktickets.aspect.LogAspect                    :57   [32m16915867529468i9  [0;39m ------------- 开始 -------------
2023-08-09 21:12:33.262 INFO  com.jktickets.aspect.LogAspect                    :58   [32m16915867529468i9  [0;39m 请求地址: http://192.168.0.102:18002/business/station/queryAll GET
2023-08-09 21:12:33.263 INFO  com.jktickets.aspect.LogAspect                    :59   [32m16915867529468i9  [0;39m 类名方法: com.jktickets.controller.StationController.queryAllStationList
2023-08-09 21:12:33.263 INFO  com.jktickets.aspect.LogAspect                    :60   [32m16915867529468i9  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:12:33.305 INFO  com.jktickets.aspect.LogAspect                    :82   [32m16915867529468i9  [0;39m 请求参数: []
2023-08-09 21:12:33.305 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915867529468i9  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.StationMapper.selectByExample(StationExample))
2023-08-09 21:12:33.306 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915867529468i9  [0;39m 参数值: com.jktickets.domain.StationExample@7165d097
2023-08-09 21:12:33.373 DEBUG c.jktickets.mapper.StationMapper.selectByExample  :137  [32m16915867529468i9  [0;39m ==>  Preparing: select id, `name`, name_pinyin, name_py, create_time, update_time from station order by name_pinyin asc
2023-08-09 21:12:33.418 DEBUG c.jktickets.mapper.StationMapper.selectByExample  :137  [32m16915867529468i9  [0;39m ==> Parameters: 
2023-08-09 21:12:33.466 TRACE c.jktickets.mapper.StationMapper.selectByExample  :143  [32m16915867529468i9  [0;39m <==    Columns: id, name, name_pinyin, name_py, create_time, update_time
2023-08-09 21:12:33.468 TRACE c.jktickets.mapper.StationMapper.selectByExample  :143  [32m16915867529468i9  [0;39m <==        Row: 1680219843401486336, 杭州, hangzhou, hz, 2023-07-15 22:16:42.268, 2023-07-15 22:16:42.268
2023-08-09 21:12:33.470 TRACE c.jktickets.mapper.StationMapper.selectByExample  :143  [32m16915867529468i9  [0;39m <==        Row: 1680205919650189312, 上海, shanghai, sh, 2023-07-15 21:21:22.591, 2023-07-15 21:21:22.591
2023-08-09 21:12:33.473 TRACE c.jktickets.mapper.StationMapper.selectByExample  :143  [32m16915867529468i9  [0;39m <==        Row: 1680205862385356800, 温州, wenzhou, wz, 2023-07-15 21:21:08.871, 2023-07-15 21:21:08.871
2023-08-09 21:12:33.473 DEBUG c.jktickets.mapper.StationMapper.selectByExample  :137  [32m16915867529468i9  [0;39m <==      Total: 3
2023-08-09 21:12:33.475 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915867529468i9  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.StationMapper.selectByExample(StationExample))
2023-08-09 21:12:33.515 INFO  com.jktickets.aspect.LogAspect                    :94   [32m16915867529468i9  [0;39m 返回结果: {"code":0,"message":"","result":[{"createTime":1689430602268,"id":1680219843401486336,"name":"杭州","namePinyin":"hangzhou","namePy":"hz","updateTime":1689430602268},{"createTime":1689427282591,"id":1680205919650189312,"name":"上海","namePinyin":"shanghai","namePy":"sh","updateTime":1689427282591},{"createTime":1689427268871,"id":1680205862385356800,"name":"温州","namePinyin":"wenzhou","namePy":"wz","updateTime":1689427268871}],"success":true}
2023-08-09 21:12:33.516 INFO  com.jktickets.aspect.LogAspect                    :95   [32m16915867529468i9  [0;39m ------------- 结束 耗时：256 ms -------------
2023-08-09 21:12:39.277 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586759277cfw  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:12:39.277 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586759277cfw  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:12:39.278 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586759277cfw  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:12:39.410 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586759277cfw  [0;39m ------------- 开始 -------------
2023-08-09 21:12:39.411 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586759277cfw  [0;39m 请求地址: http://192.168.0.102:8002/business/dailyTrainTicket/queryList GET
2023-08-09 21:12:39.411 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586759277cfw  [0;39m 类名方法: com.jktickets.controller.DailyTrainTicketController.queryDailyTrainTicketList
2023-08-09 21:12:39.411 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586759277cfw  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:12:39.415 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586759277cfw  [0;39m 请求参数: [{"date":1691424000000,"end":"杭州","page":1,"size":10,"start":"温州"}]
2023-08-09 21:12:39.470 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586759277cfw  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:12:39.470 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586759277cfw  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@23e2283f
2023-08-09 21:12:39.633 DEBUG c.j.m.DailyTrainTicketMapper.selectByExample_COUNT:137  [32m1691586759277cfw  [0;39m ==>  Preparing: SELECT count(0) FROM daily_train_ticket WHERE (`date` = ? AND `start` = ? AND `end` = ?)
2023-08-09 21:12:39.634 DEBUG c.j.m.DailyTrainTicketMapper.selectByExample_COUNT:137  [32m1691586759277cfw  [0;39m ==> Parameters: 2023-08-08(Date), 温州(String), 杭州(String)
2023-08-09 21:12:39.647 TRACE c.j.m.DailyTrainTicketMapper.selectByExample_COUNT:143  [32m1691586759277cfw  [0;39m <==    Columns: count(0)
2023-08-09 21:12:39.648 TRACE c.j.m.DailyTrainTicketMapper.selectByExample_COUNT:143  [32m1691586759277cfw  [0;39m <==        Row: 1
2023-08-09 21:12:39.650 DEBUG c.j.m.DailyTrainTicketMapper.selectByExample_COUNT:137  [32m1691586759277cfw  [0;39m <==      Total: 1
2023-08-09 21:12:39.652 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586759277cfw  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and `start` = ? and `end` = ? ) order by id desc LIMIT ?
2023-08-09 21:12:39.652 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586759277cfw  [0;39m ==> Parameters: 2023-08-08(Date), 温州(String), 杭州(String), 10(Integer)
2023-08-09 21:12:39.670 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586759277cfw  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:12:39.687 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586759277cfw  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 25, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:12:39.689 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586759277cfw  [0;39m <==      Total: 1
2023-08-09 21:12:39.689 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586759277cfw  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:12:39.691 INFO  com.jktickets.service.DailyTrainTicketService     :133  [32m1691586759277cfw  [0;39m 总行数：1
2023-08-09 21:12:39.691 INFO  com.jktickets.service.DailyTrainTicketService     :134  [32m1691586759277cfw  [0;39m 总页数：1
2023-08-09 21:12:39.737 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586759277cfw  [0;39m 返回结果: {"code":0,"message":"","result":{"list":[{"createTime":1691503235973,"date":1691424000000,"edz":25,"edzPrice":3.96,"end":"杭州","endIndex":2,"endPinyin":"hangzhou","endTime":25200000,"id":1688913100071374848,"rw":-1,"rwPrice":7.92,"start":"温州","startIndex":1,"startPinyin":"wenzhou","startTime":51303000,"trainCode":"01","updateTime":1691503235973,"ydz":0,"ydzPrice":5.28,"yw":-1,"ywPrice":6.60}],"total":1},"success":true}
2023-08-09 21:12:39.738 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586759277cfw  [0;39m ------------- 结束 耗时：328 ms -------------
2023-08-09 21:12:51.949 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586771949w93  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:12:51.950 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586771949w93  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:12:51.951 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586771949w93  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:12:52.054 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586771949w93  [0;39m ------------- 开始 -------------
2023-08-09 21:12:52.054 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586771949w93  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:12:52.054 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586771949w93  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:12:52.054 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586771949w93  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:12:52.063 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586771949w93  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:12:52.219 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586771949w93  [0;39m 恭喜，抢到锁了
2023-08-09 21:12:52.239 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586771949w93  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:12:52.239 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586771949w93  [0;39m 参数值: ConfirmOrder [Hash = 1548267477, id=1689263475601313792, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:12:52, updateTime=2023-08-09 21:12:52, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:12:52.259 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586771949w93  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:12:52.261 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586771949w93  [0;39m ==> Parameters: 1689263475601313792(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:12:52.22(Timestamp), 2023-08-09 21:12:52.22(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:12:52.291 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586771949w93  [0;39m <==    Updates: 1
2023-08-09 21:12:52.292 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586771949w93  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:12:52.298 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586771949w93  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:12:52.298 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586771949w93  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@22ecb96d
2023-08-09 21:12:52.314 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586771949w93  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:12:52.314 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586771949w93  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:12:52.335 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586771949w93  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:12:52.337 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586771949w93  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 25, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:12:52.339 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586771949w93  [0;39m <==      Total: 1
2023-08-09 21:12:52.339 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586771949w93  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:12:52.340 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586771949w93  [0;39m 查出余票记录:DailyTrainTicket [Hash = 1300302494, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=25, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:12:52.345 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m1691586771949w93  [0;39m 本次购票没有选座
2023-08-09 21:12:52.349 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586771949w93  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:12:52.349 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586771949w93  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@2187884e
2023-08-09 21:12:52.352 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586771949w93  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:12:52.352 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586771949w93  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:12:52.372 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586771949w93  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:12:52.373 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586771949w93  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:12:52.374 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586771949w93  [0;39m <==      Total: 1
2023-08-09 21:12:52.375 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586771949w93  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:12:52.375 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m1691586771949w93  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:12:52.375 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m1691586771949w93  [0;39m 从车厢2选座
2023-08-09 21:12:52.378 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586771949w93  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:12:52.378 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586771949w93  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@5e858bc0
2023-08-09 21:12:52.380 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586771949w93  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:12:52.381 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586771949w93  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:12:52.404 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:12:52.405 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 00, 2023-08-08 22:00:35.102, 2023-08-08 22:00:35.102
2023-08-09 21:12:52.406 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 00, 2023-08-08 22:00:35.130, 2023-08-08 22:00:35.130
2023-08-09 21:12:52.407 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 00, 2023-08-08 22:00:35.157, 2023-08-08 22:00:35.157
2023-08-09 21:12:52.410 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 00, 2023-08-08 22:00:35.188, 2023-08-08 22:00:35.188
2023-08-09 21:12:52.412 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 00, 2023-08-08 22:00:35.230, 2023-08-08 22:00:35.230
2023-08-09 21:12:52.412 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 00, 2023-08-08 22:00:35.254, 2023-08-08 22:00:35.254
2023-08-09 21:12:52.413 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 00, 2023-08-08 22:00:35.282, 2023-08-08 22:00:35.282
2023-08-09 21:12:52.414 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 00, 2023-08-08 22:00:35.307, 2023-08-08 22:00:35.307
2023-08-09 21:12:52.415 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 00, 2023-08-08 22:00:35.334, 2023-08-08 22:00:35.334
2023-08-09 21:12:52.416 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 00, 2023-08-08 22:00:35.360, 2023-08-08 22:00:35.360
2023-08-09 21:12:52.417 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 00, 2023-08-08 22:00:35.437, 2023-08-08 22:00:35.437
2023-08-09 21:12:52.418 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 00, 2023-08-08 22:00:35.468, 2023-08-08 22:00:35.468
2023-08-09 21:12:52.419 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 00, 2023-08-08 22:00:35.495, 2023-08-08 22:00:35.495
2023-08-09 21:12:52.420 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 00, 2023-08-08 22:00:35.522, 2023-08-08 22:00:35.522
2023-08-09 21:12:52.421 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 00, 2023-08-08 22:00:35.550, 2023-08-08 22:00:35.550
2023-08-09 21:12:52.422 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 00, 2023-08-08 22:00:35.583, 2023-08-08 22:00:35.583
2023-08-09 21:12:52.426 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 00, 2023-08-08 22:00:35.610, 2023-08-08 22:00:35.610
2023-08-09 21:12:52.428 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 00, 2023-08-08 22:00:35.636, 2023-08-08 22:00:35.636
2023-08-09 21:12:52.428 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:12:52.429 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:12:52.431 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:12:52.432 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:12:52.433 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:12:52.434 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:12:52.435 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586771949w93  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:12:52.436 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586771949w93  [0;39m <==      Total: 25
2023-08-09 21:12:52.436 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586771949w93  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:12:52.436 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m1691586771949w93  [0;39m 车厢2的座位数:25
2023-08-09 21:12:52.437 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586771949w93  [0;39m 无选座
2023-08-09 21:12:52.437 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m1691586771949w93  [0;39m 座位1在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:12:52.437 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m1691586771949w93  [0;39m 座位1被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:12:52.438 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m1691586771949w93  [0;39m 选中座位
2023-08-09 21:12:52.438 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m1691586771949w93  [0;39m 最终选座:[DailyTrainSeat [Hash = 691452846, id=1688913095457640448, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=01, col=A, seatType=2, carriageSeatIndex=1, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:12:52.454 INFO  io.seata.tm.TransactionManagerHolder              :40   [32m1691586771949w93  [0;39m TransactionManager Singleton io.seata.tm.DefaultTransactionManager@458f89d
2023-08-09 21:12:52.665 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m1691586771949w93  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918017]
2023-08-09 21:12:52.665 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m1691586771949w93  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918017
2023-08-09 21:12:52.666 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586771949w93  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:12:52.666 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586771949w93  [0;39m 参数值: DailyTrainSeat [Hash = 1233237136, id=1688913095457640448, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:12:52 CST 2023]
2023-08-09 21:12:52.705 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586771949w93  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:12:52.933 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586771949w93  [0;39m ==> Parameters: 01(String), 2023-08-09 21:12:52.666(Timestamp), 1688913095457640448(Long)
2023-08-09 21:12:52.970 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m1691586771949w93  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] client.rm.lock.retryInterval+SEATA_GROUP+train
2023-08-09 21:12:52.971 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m1691586771949w93  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.rm.lock.retryInterval, group=SEATA_GROUP, cnt=1
2023-08-09 21:12:52.971 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m1691586771949w93  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.rm.lock.retryInterval, group=SEATA_GROUP, cnt=2
2023-08-09 21:12:52.972 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m1691586771949w93  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] client.rm.lock.retryTimes+SEATA_GROUP+train
2023-08-09 21:12:52.972 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m1691586771949w93  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.rm.lock.retryTimes, group=SEATA_GROUP, cnt=1
2023-08-09 21:12:52.973 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m1691586771949w93  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.rm.lock.retryTimes, group=SEATA_GROUP, cnt=2
2023-08-09 21:12:53.469 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586771949w93  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918017, branchId:7854700236664918020, lockKeys:daily_train_seat:1688913095457640448
2023-08-09 21:12:53.502 WARN  i.s.c.l.EnhancedServiceLoader$InnerEnhancedServiceLoader:545  [32m1691586771949w93  [0;39m Load [io.seata.rm.datasource.undo.parser.ProtostuffUndoLogParser] class fail: io/protostuff/runtime/IdStrategy
2023-08-09 21:12:53.616 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586771949w93  [0;39m <==    Updates: 1
2023-08-09 21:12:53.616 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586771949w93  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:12:53.617 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m1691586771949w93  [0;39m 影响出发站区间:0-1
2023-08-09 21:12:53.617 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m1691586771949w93  [0;39m 影响到达站区间:0-2
2023-08-09 21:12:53.620 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586771949w93  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:12:53.623 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586771949w93  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:12:54.007 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586771949w93  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918017, branchId:7854700236664918022, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:12:54.058 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586771949w93  [0;39m <==    Updates: 3
2023-08-09 21:12:54.118 INFO  com.alibaba.nacos.client.naming                   :167  [32m1691586771949w93  [0;39m [SUBSCRIBE-SERVICE] service:member-service, group:DEFAULT_GROUP, clusters: 
2023-08-09 21:12:54.122 INFO  com.alibaba.nacos.client.naming                   :184  [32m1691586771949w93  [0;39m init new ips(1) service: DEFAULT_GROUP@@member-service -> [{"ip":"192.168.0.102","port":8001,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@member-service","metadata":{"preserved.register.source":"SPRING_CLOUD"},"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000,"ipDeleteTimeout":30000}]
2023-08-09 21:12:54.122 INFO  com.alibaba.nacos.client.naming                   :169  [32m1691586771949w93  [0;39m current ips:(1) service: DEFAULT_GROUP@@member-service -> [{"ip":"192.168.0.102","port":8001,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@member-service","metadata":{"preserved.register.source":"SPRING_CLOUD"},"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000,"ipDeleteTimeout":30000}]
2023-08-09 21:12:54.698 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [eb273791-f3ba-4863-8e2b-7131a871f0c0] Receive server push request, request = NotifySubscriberRequest, requestId = 12
2023-08-09 21:12:54.699 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [eb273791-f3ba-4863-8e2b-7131a871f0c0] Ack server push request, request = NotifySubscriberRequest, requestId = 12
2023-08-09 21:12:55.163 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m1691586771949w93  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:12:55.169 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586771949w93  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:12:55.169 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586771949w93  [0;39m 参数值: ConfirmOrder [Hash = 1760751031, id=1689263475601313792, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:12:55 CST 2023, tickets=null]
2023-08-09 21:12:55.186 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586771949w93  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:12:55.187 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586771949w93  [0;39m ==> Parameters: S(String), 2023-08-09 21:12:55.168(Timestamp), 1689263475601313792(Long)
2023-08-09 21:12:55.497 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586771949w93  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918017, branchId:7854700236664918028, lockKeys:confirm_order:1689263475601313792
2023-08-09 21:12:55.550 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586771949w93  [0;39m <==    Updates: 1
2023-08-09 21:12:55.551 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586771949w93  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:12:55.552 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m1691586771949w93  [0;39m transaction 192.168.0.102:8091:7854700236664918017 will be commit
2023-08-09 21:12:55.703 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m1691586771949w93  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918017
2023-08-09 21:12:55.704 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m1691586771949w93  [0;39m [192.168.0.102:8091:7854700236664918017] commit status: Committed
2023-08-09 21:12:55.704 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586771949w93  [0;39m 购票流程结束，释放锁
2023-08-09 21:12:55.753 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586771949w93  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:12:55.753 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586771949w93  [0;39m ------------- 结束 耗时：3699 ms -------------
2023-08-09 21:12:55.929 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918017', branchId=7854700236664918020, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:12:55.931 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918017 7854700236664918020 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:12:55.932 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:12:55.961 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918017', branchId=7854700236664918022, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:12:55.961 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918017 7854700236664918022 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:12:55.961 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:12:56.007 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918017', branchId=7854700236664918028, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:12:56.007 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918017 7854700236664918028 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:12:56.007 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:13:53.657 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m16915868336577l2  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.659 INFO  com.jktickets.utils.JwtUtil                       :64   [32m16915868336577l2  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.658 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586833657hn9  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.659 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m16915868336577l2  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.660 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586833657hn9  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.661 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586833657hn9  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.661 INFO  com.jktickets.aspect.LogAspect                    :57   [32m16915868336577l2  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.662 INFO  com.jktickets.aspect.LogAspect                    :58   [32m16915868336577l2  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.662 INFO  com.jktickets.aspect.LogAspect                    :59   [32m16915868336577l2  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:53.662 INFO  com.jktickets.aspect.LogAspect                    :60   [32m16915868336577l2  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:53.663 INFO  com.jktickets.aspect.LogAspect                    :82   [32m16915868336577l2  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:53.673 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m16915868336737mi  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.675 INFO  com.jktickets.utils.JwtUtil                       :64   [32m16915868336737mi  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.675 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m16915868336737mi  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.677 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586833677zkh  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.678 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586833677zkh  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.678 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586833677zkh  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.679 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586833679tyu  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.680 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586833679tyu  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.681 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m169158683368179t  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.681 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586833681abr  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.681 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586833679tyu  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.682 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586833681cij  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.682 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m16915868336822k9  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.682 INFO  com.jktickets.utils.JwtUtil                       :64   [32m169158683368179t  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.682 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586833681abr  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.682 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m169158683368179t  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.682 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m16915868336577l2  [0;39m 恭喜，抢到锁了
2023-08-09 21:13:53.682 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586833681abr  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.682 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586833681cij  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.682 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586833681cij  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.682 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868336577l2  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:13:53.682 INFO  com.jktickets.utils.JwtUtil                       :64   [32m16915868336822k9  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.683 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868336577l2  [0;39m 参数值: ConfirmOrder [Hash = 504559930, id=1689263733316128768, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:13:53, updateTime=2023-08-09 21:13:53, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:13:53.683 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m16915868336822k9  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.683 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586833681abr  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.683 INFO  com.jktickets.aspect.LogAspect                    :57   [32m169158683368179t  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.684 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586833681abr  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.684 INFO  com.jktickets.aspect.LogAspect                    :58   [32m169158683368179t  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.684 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586833681abr  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:53.684 INFO  com.jktickets.aspect.LogAspect                    :59   [32m169158683368179t  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:53.684 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586833681abr  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:53.684 INFO  com.jktickets.aspect.LogAspect                    :60   [32m169158683368179t  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:53.685 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586833681abr  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:53.685 INFO  com.jktickets.aspect.LogAspect                    :82   [32m169158683368179t  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:53.685 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586833681cij  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.685 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586833681cij  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.686 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586833681cij  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:53.686 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586833681cij  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:53.686 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586833681cij  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:53.698 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586833677zkh  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.698 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586833677zkh  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.698 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586833657hn9  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.698 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586833679tyu  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.699 INFO  com.jktickets.aspect.LogAspect                    :57   [32m16915868336737mi  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.699 INFO  com.jktickets.aspect.LogAspect                    :57   [32m16915868336822k9  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.699 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586833679tyu  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.700 INFO  com.jktickets.aspect.LogAspect                    :58   [32m16915868336737mi  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.700 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586833657hn9  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.700 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586833679tyu  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:53.700 INFO  com.jktickets.aspect.LogAspect                    :59   [32m16915868336737mi  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:53.700 INFO  com.jktickets.aspect.LogAspect                    :58   [32m16915868336822k9  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.700 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586833657hn9  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:53.700 INFO  com.jktickets.aspect.LogAspect                    :60   [32m16915868336737mi  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:53.700 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586833677zkh  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:53.700 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586833679tyu  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:53.700 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586833657hn9  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:53.701 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586833677zkh  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:53.702 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586833702rlf  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.702 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868336577l2  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:13:53.703 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586833702rlf  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.704 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868336577l2  [0;39m ==> Parameters: 1689263733316128768(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:13:53.682(Timestamp), 2023-08-09 21:13:53.682(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:13:53.703 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586833702rlf  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.701 INFO  com.jktickets.aspect.LogAspect                    :59   [32m16915868336822k9  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:53.708 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586833702rlf  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.706 INFO  com.jktickets.aspect.LogAspect                    :60   [32m16915868336822k9  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:53.708 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586833702rlf  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.709 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586833702rlf  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:53.710 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586833702rlf  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:53.712 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586833702rlf  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:53.713 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586833657hn9  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:53.713 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586833679tyu  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:53.713 INFO  com.jktickets.aspect.LogAspect                    :82   [32m16915868336737mi  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:53.713 INFO  com.jktickets.aspect.LogAspect                    :82   [32m16915868336822k9  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:53.714 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586833677zkh  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:53.729 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868336577l2  [0;39m <==    Updates: 1
2023-08-09 21:13:53.730 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868336577l2  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:13:53.730 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868336577l2  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:13:53.730 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868336577l2  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@299dca3a
2023-08-09 21:13:53.733 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868336577l2  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:13:53.734 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586833734jqq  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.734 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868336577l2  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:13:53.735 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586833734jqq  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.736 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586833734jqq  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.738 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586833734jqq  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.738 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586833734jqq  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.739 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586833734jqq  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:53.739 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586833734jqq  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:53.739 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586833734jqq  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:53.747 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m16915868336577l2  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:13:53.749 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m16915868336577l2  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 24, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:13:53.750 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868336577l2  [0;39m <==      Total: 1
2023-08-09 21:13:53.751 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868336577l2  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:13:53.751 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m16915868336577l2  [0;39m 查出余票记录:DailyTrainTicket [Hash = 1669997286, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=24, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:13:53.752 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m16915868336577l2  [0;39m 本次购票没有选座
2023-08-09 21:13:53.753 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868336577l2  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:13:53.753 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868336577l2  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@4e08aadc
2023-08-09 21:13:53.755 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868336577l2  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:13:53.756 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868336577l2  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:13:53.767 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m16915868337676jr  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.768 INFO  com.jktickets.utils.JwtUtil                       :64   [32m16915868337676jr  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.768 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m16915868337676jr  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.769 INFO  com.jktickets.aspect.LogAspect                    :57   [32m16915868337676jr  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.770 INFO  com.jktickets.aspect.LogAspect                    :58   [32m16915868337676jr  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.770 INFO  com.jktickets.aspect.LogAspect                    :59   [32m16915868337676jr  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:53.770 INFO  com.jktickets.aspect.LogAspect                    :60   [32m16915868337676jr  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:53.771 INFO  com.jktickets.aspect.LogAspect                    :82   [32m16915868337676jr  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:53.771 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m16915868336577l2  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:13:53.772 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m16915868336577l2  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:13:53.772 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868336577l2  [0;39m <==      Total: 1
2023-08-09 21:13:53.773 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868336577l2  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:13:53.773 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m16915868336577l2  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:13:53.773 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m16915868336577l2  [0;39m 从车厢2选座
2023-08-09 21:13:53.774 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868336577l2  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:13:53.774 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868336577l2  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@2ff730a9
2023-08-09 21:13:53.775 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868336577l2  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:13:53.776 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868336577l2  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:13:53.790 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:13:53.791 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:13:53.793 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 00, 2023-08-08 22:00:35.130, 2023-08-08 22:00:35.130
2023-08-09 21:13:53.794 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 00, 2023-08-08 22:00:35.157, 2023-08-08 22:00:35.157
2023-08-09 21:13:53.795 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 00, 2023-08-08 22:00:35.188, 2023-08-08 22:00:35.188
2023-08-09 21:13:53.796 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 00, 2023-08-08 22:00:35.230, 2023-08-08 22:00:35.230
2023-08-09 21:13:53.797 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 00, 2023-08-08 22:00:35.254, 2023-08-08 22:00:35.254
2023-08-09 21:13:53.800 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586833799ecd  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.800 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586833799ecd  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.801 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586833799ecd  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.801 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 00, 2023-08-08 22:00:35.282, 2023-08-08 22:00:35.282
2023-08-09 21:13:53.802 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586833799ecd  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.802 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 00, 2023-08-08 22:00:35.307, 2023-08-08 22:00:35.307
2023-08-09 21:13:53.803 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586833799ecd  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.803 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586833799ecd  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:53.803 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586833799ecd  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:53.804 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 00, 2023-08-08 22:00:35.334, 2023-08-08 22:00:35.334
2023-08-09 21:13:53.804 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586833799ecd  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:53.804 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 00, 2023-08-08 22:00:35.360, 2023-08-08 22:00:35.360
2023-08-09 21:13:53.805 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 00, 2023-08-08 22:00:35.437, 2023-08-08 22:00:35.437
2023-08-09 21:13:53.806 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 00, 2023-08-08 22:00:35.468, 2023-08-08 22:00:35.468
2023-08-09 21:13:53.807 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 00, 2023-08-08 22:00:35.495, 2023-08-08 22:00:35.495
2023-08-09 21:13:53.808 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 00, 2023-08-08 22:00:35.522, 2023-08-08 22:00:35.522
2023-08-09 21:13:53.809 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 00, 2023-08-08 22:00:35.550, 2023-08-08 22:00:35.550
2023-08-09 21:13:53.810 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 00, 2023-08-08 22:00:35.583, 2023-08-08 22:00:35.583
2023-08-09 21:13:53.810 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 00, 2023-08-08 22:00:35.610, 2023-08-08 22:00:35.610
2023-08-09 21:13:53.811 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 00, 2023-08-08 22:00:35.636, 2023-08-08 22:00:35.636
2023-08-09 21:13:53.812 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:13:53.812 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:13:53.813 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:13:53.813 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:13:53.815 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:13:53.816 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:13:53.816 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868336577l2  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:13:53.816 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868336577l2  [0;39m <==      Total: 25
2023-08-09 21:13:53.817 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868336577l2  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:13:53.817 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m16915868336577l2  [0;39m 车厢2的座位数:25
2023-08-09 21:13:53.818 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868336577l2  [0;39m 无选座
2023-08-09 21:13:53.818 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868336577l2  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:53.818 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868336577l2  [0;39m 无选座
2023-08-09 21:13:53.818 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m16915868336577l2  [0;39m 座位2在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:13:53.818 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m16915868336577l2  [0;39m 座位2被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:13:53.818 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m16915868336577l2  [0;39m 选中座位
2023-08-09 21:13:53.819 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m16915868336577l2  [0;39m 最终选座:[DailyTrainSeat [Hash = 369999246, id=1688913095579275264, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=01, col=B, seatType=2, carriageSeatIndex=2, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:13:53.831 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m16915868338314dw  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.832 INFO  com.jktickets.utils.JwtUtil                       :64   [32m16915868338314dw  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.832 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m16915868338314dw  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.834 INFO  com.jktickets.aspect.LogAspect                    :57   [32m16915868338314dw  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.834 INFO  com.jktickets.aspect.LogAspect                    :58   [32m16915868338314dw  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.834 INFO  com.jktickets.aspect.LogAspect                    :59   [32m16915868338314dw  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:53.834 INFO  com.jktickets.aspect.LogAspect                    :60   [32m16915868338314dw  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:53.835 INFO  com.jktickets.aspect.LogAspect                    :82   [32m16915868338314dw  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:53.852 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m16915868336577l2  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918031]
2023-08-09 21:13:53.852 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m16915868336577l2  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918031
2023-08-09 21:13:53.853 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868336577l2  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:13:53.853 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868336577l2  [0;39m 参数值: DailyTrainSeat [Hash = 1773414952, id=1688913095579275264, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:13:53 CST 2023]
2023-08-09 21:13:53.860 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868336577l2  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:13:53.863 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868336577l2  [0;39m ==> Parameters: 01(String), 2023-08-09 21:13:53.853(Timestamp), 1688913095579275264(Long)
2023-08-09 21:13:53.884 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586833883aix  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.884 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586833883aix  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.884 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586833883aix  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.886 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586833883aix  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.888 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586833883aix  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.888 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586833883aix  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:53.891 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586833883aix  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:53.891 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586833883aix  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:53.899 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m16915868338993l5  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.900 INFO  com.jktickets.utils.JwtUtil                       :64   [32m16915868338993l5  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.901 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m16915868338993l5  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.902 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586833657hn9  [0;39m 很遗憾，没抢到锁
2023-08-09 21:13:53.902 INFO  com.jktickets.aspect.LogAspect                    :57   [32m16915868338993l5  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.903 INFO  com.jktickets.aspect.LogAspect                    :58   [32m16915868338993l5  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.903 INFO  com.jktickets.aspect.LogAspect                    :59   [32m16915868338993l5  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:53.903 INFO  com.jktickets.aspect.LogAspect                    :60   [32m16915868338993l5  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:53.904 INFO  com.jktickets.aspect.LogAspect                    :82   [32m16915868338993l5  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:53.904 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586833657hn9  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:53.933 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586833933vf3  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.934 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586833933vf3  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.934 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586833933vf3  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.936 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586833933vf3  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.936 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586833933vf3  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.936 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586833933vf3  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:53.936 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586833933vf3  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:53.937 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586833933vf3  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:53.948 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586833883aix  [0;39m 很遗憾，没抢到锁
2023-08-09 21:13:53.949 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586833883aix  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:53.965 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586833965hvc  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.966 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586833965hvc  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.966 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586833965hvc  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.935 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586833657hn9  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:13:53.961 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586833883aix  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:13:53.971 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586833657hn9  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:13:53.971 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586833883aix  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:13:53.974 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586833965hvc  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.974 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586833965hvc  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.975 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586833965hvc  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:53.976 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586833965hvc  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:53.976 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586833965hvc  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:53.981 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586833799ecd  [0;39m 很遗憾，没抢到锁
2023-08-09 21:13:53.981 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586833799ecd  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:53.993 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586833799ecd  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:13:53.995 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586833995s44  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:53.995 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586833799ecd  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:13:53.995 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586833995s44  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.996 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586833995s44  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:53.998 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586833995s44  [0;39m ------------- 开始 -------------
2023-08-09 21:13:53.999 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586833995s44  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:53.999 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586833995s44  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:54.000 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586833995s44  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:54.000 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586833995s44  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:54.005 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586833734jqq  [0;39m 很遗憾，没抢到锁
2023-08-09 21:13:54.005 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586833734jqq  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:54.021 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586833734jqq  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:13:54.023 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586833734jqq  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:13:54.030 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586834030zse  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:54.030 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586834030zse  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.031 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586834030zse  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.032 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586834030zse  [0;39m ------------- 开始 -------------
2023-08-09 21:13:54.032 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586834030zse  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:54.032 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586834030zse  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:54.032 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586834030zse  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:54.032 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586834030zse  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:54.034 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586833677zkh  [0;39m 很遗憾，没抢到锁
2023-08-09 21:13:54.035 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586833677zkh  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:54.048 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586833677zkh  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:13:54.049 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586833677zkh  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:13:54.058 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m16915868336822k9  [0;39m 很遗憾，没抢到锁
2023-08-09 21:13:54.059 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m16915868336822k9  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:54.060 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m16915868340608v9  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:54.060 INFO  com.jktickets.utils.JwtUtil                       :64   [32m16915868340608v9  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.061 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m16915868340608v9  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.062 INFO  com.jktickets.aspect.LogAspect                    :57   [32m16915868340608v9  [0;39m ------------- 开始 -------------
2023-08-09 21:13:54.063 INFO  com.jktickets.aspect.LogAspect                    :58   [32m16915868340608v9  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:54.063 INFO  com.jktickets.aspect.LogAspect                    :59   [32m16915868340608v9  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:54.063 INFO  com.jktickets.aspect.LogAspect                    :60   [32m16915868340608v9  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:54.063 INFO  com.jktickets.aspect.LogAspect                    :82   [32m16915868340608v9  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:54.065 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868336577l2  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918031, branchId:7854700236664918034, lockKeys:daily_train_seat:1688913095579275264
2023-08-09 21:13:54.070 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m16915868336822k9  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:13:54.071 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m16915868336822k9  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:13:54.083 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m16915868336737mi  [0;39m 很遗憾，没抢到锁
2023-08-09 21:13:54.083 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m16915868336737mi  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:54.095 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m16915868336737mi  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:13:54.096 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m16915868336737mi  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:13:54.096 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586834096o7h  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:54.098 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586834096o7h  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.098 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586834096o7h  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.099 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586834096o7h  [0;39m ------------- 开始 -------------
2023-08-09 21:13:54.100 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586834096o7h  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:54.100 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586834096o7h  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:54.100 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586834096o7h  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:54.101 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586834096o7h  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:54.104 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868336577l2  [0;39m <==    Updates: 1
2023-08-09 21:13:54.105 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868336577l2  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:13:54.105 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m16915868336577l2  [0;39m 影响出发站区间:0-1
2023-08-09 21:13:54.105 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m16915868336577l2  [0;39m 影响到达站区间:0-2
2023-08-09 21:13:54.106 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868336577l2  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:13:54.107 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868336577l2  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:13:54.109 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586833679tyu  [0;39m 很遗憾，没抢到锁
2023-08-09 21:13:54.109 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586833679tyu  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:54.127 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m16915868341271t5  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:54.128 INFO  com.jktickets.utils.JwtUtil                       :64   [32m16915868341271t5  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.128 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m16915868341271t5  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.129 INFO  com.jktickets.aspect.LogAspect                    :57   [32m16915868341271t5  [0;39m ------------- 开始 -------------
2023-08-09 21:13:54.130 INFO  com.jktickets.aspect.LogAspect                    :58   [32m16915868341271t5  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:54.130 INFO  com.jktickets.aspect.LogAspect                    :59   [32m16915868341271t5  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:54.130 INFO  com.jktickets.aspect.LogAspect                    :60   [32m16915868341271t5  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:54.130 INFO  com.jktickets.aspect.LogAspect                    :82   [32m16915868341271t5  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:54.131 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586833679tyu  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:13:54.132 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586833679tyu  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:13:54.142 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m16915868341271t5  [0;39m 很遗憾，没抢到锁
2023-08-09 21:13:54.142 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m16915868341271t5  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:54.160 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m16915868341271t5  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:13:54.161 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m16915868341607mm  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:54.161 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m16915868341271t5  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:13:54.161 INFO  com.jktickets.utils.JwtUtil                       :64   [32m16915868341607mm  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.161 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m16915868341607mm  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.163 INFO  com.jktickets.aspect.LogAspect                    :57   [32m16915868341607mm  [0;39m ------------- 开始 -------------
2023-08-09 21:13:54.163 INFO  com.jktickets.aspect.LogAspect                    :58   [32m16915868341607mm  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:54.163 INFO  com.jktickets.aspect.LogAspect                    :59   [32m16915868341607mm  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:54.163 INFO  com.jktickets.aspect.LogAspect                    :60   [32m16915868341607mm  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:54.163 INFO  com.jktickets.aspect.LogAspect                    :82   [32m16915868341607mm  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:54.169 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m16915868340608v9  [0;39m 很遗憾，没抢到锁
2023-08-09 21:13:54.169 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m16915868340608v9  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:54.181 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m16915868340608v9  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:13:54.182 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m16915868340608v9  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:13:54.192 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586834192d01  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:54.193 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586834192d01  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.193 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586834192d01  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.193 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586833995s44  [0;39m 很遗憾，没抢到锁
2023-08-09 21:13:54.194 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586833995s44  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:54.195 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586834192d01  [0;39m ------------- 开始 -------------
2023-08-09 21:13:54.195 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586834192d01  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:54.195 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586834192d01  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:54.195 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586834192d01  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:54.195 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586834192d01  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:54.205 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586833995s44  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:13:54.206 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586833995s44  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:13:54.223 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586833933vf3  [0;39m 很遗憾，没抢到锁
2023-08-09 21:13:54.224 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586833933vf3  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:54.226 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586834226t0n  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:54.226 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586834226t0n  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.227 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586834226t0n  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.227 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586834226t0n  [0;39m ------------- 开始 -------------
2023-08-09 21:13:54.228 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586834226t0n  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:54.228 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586834226t0n  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:54.228 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586834226t0n  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:54.228 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586834226t0n  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:54.239 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586833933vf3  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:13:54.240 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586833933vf3  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:13:54.253 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586834192d01  [0;39m 很遗憾，没抢到锁
2023-08-09 21:13:54.254 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586834192d01  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:54.256 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586834256bft  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:54.257 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586834256bft  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.257 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586834256bft  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.259 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586834256bft  [0;39m ------------- 开始 -------------
2023-08-09 21:13:54.259 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586834256bft  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:54.260 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586834256bft  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:54.260 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586834256bft  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:54.260 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586834256bft  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:54.268 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586834192d01  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:13:54.269 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586834192d01  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:13:54.282 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586834256bft  [0;39m 很遗憾，没抢到锁
2023-08-09 21:13:54.282 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586834256bft  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:54.292 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m169158683429189h  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:54.293 INFO  com.jktickets.utils.JwtUtil                       :64   [32m169158683429189h  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.293 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m169158683429189h  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.295 INFO  com.jktickets.aspect.LogAspect                    :57   [32m169158683429189h  [0;39m ------------- 开始 -------------
2023-08-09 21:13:54.296 INFO  com.jktickets.aspect.LogAspect                    :58   [32m169158683429189h  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:54.296 INFO  com.jktickets.aspect.LogAspect                    :59   [32m169158683429189h  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:54.296 INFO  com.jktickets.aspect.LogAspect                    :60   [32m169158683429189h  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:54.296 INFO  com.jktickets.aspect.LogAspect                    :82   [32m169158683429189h  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:54.299 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586834256bft  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:13:54.301 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586834256bft  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:13:54.312 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868336577l2  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918031, branchId:7854700236664918036, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:13:54.325 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586834325rqx  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:54.326 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586834325rqx  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.326 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586834325rqx  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.328 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586834325rqx  [0;39m ------------- 开始 -------------
2023-08-09 21:13:54.328 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586834325rqx  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:54.328 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586834325rqx  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:54.328 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586834325rqx  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:54.329 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586834325rqx  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:54.341 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586834325rqx  [0;39m 很遗憾，没抢到锁
2023-08-09 21:13:54.342 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586834325rqx  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:54.353 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868336577l2  [0;39m <==    Updates: 3
2023-08-09 21:13:54.356 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586834325rqx  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:13:54.357 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586834325rqx  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:13:54.359 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586834359b9n  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:13:54.361 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586834359b9n  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.361 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586834359b9n  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:13:54.366 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586834359b9n  [0;39m ------------- 开始 -------------
2023-08-09 21:13:54.367 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586834359b9n  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:13:54.367 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586834359b9n  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:13:54.367 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586834359b9n  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:13:54.367 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586834359b9n  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:13:54.599 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m16915868336577l2  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:13:54.599 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868336577l2  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:13:54.600 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868336577l2  [0;39m 参数值: ConfirmOrder [Hash = 1433734702, id=1689263733316128768, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:13:54 CST 2023, tickets=null]
2023-08-09 21:13:54.601 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868336577l2  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:13:54.602 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868336577l2  [0;39m ==> Parameters: S(String), 2023-08-09 21:13:54.599(Timestamp), 1689263733316128768(Long)
2023-08-09 21:13:54.753 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868336577l2  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918031, branchId:7854700236664918040, lockKeys:confirm_order:1689263733316128768
2023-08-09 21:13:54.793 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868336577l2  [0;39m <==    Updates: 1
2023-08-09 21:13:54.794 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868336577l2  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:13:54.794 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m16915868336577l2  [0;39m transaction 192.168.0.102:8091:7854700236664918031 will be commit
2023-08-09 21:13:54.860 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m16915868336577l2  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918031
2023-08-09 21:13:54.860 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m16915868336577l2  [0;39m [192.168.0.102:8091:7854700236664918031] commit status: Committed
2023-08-09 21:13:54.860 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m16915868336577l2  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:54.881 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918031', branchId=7854700236664918034, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:13:54.882 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918031 7854700236664918034 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:13:54.882 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:13:54.884 INFO  com.jktickets.aspect.LogAspect                    :94   [32m16915868336577l2  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:13:54.885 INFO  com.jktickets.aspect.LogAspect                    :95   [32m16915868336577l2  [0;39m ------------- 结束 耗时：1224 ms -------------
2023-08-09 21:13:54.899 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918031', branchId=7854700236664918036, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:13:54.899 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586834359b9n  [0;39m 恭喜，抢到锁了
2023-08-09 21:13:54.899 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918031 7854700236664918036 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:13:54.900 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:13:54.900 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834359b9n  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:13:54.900 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834359b9n  [0;39m 参数值: ConfirmOrder [Hash = 315776850, id=1689263738424791040, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:13:54, updateTime=2023-08-09 21:13:54, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:13:54.902 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586834359b9n  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:13:54.903 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586834359b9n  [0;39m ==> Parameters: 1689263738424791040(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:13:54.899(Timestamp), 2023-08-09 21:13:54.899(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:13:54.927 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586834359b9n  [0;39m <==    Updates: 1
2023-08-09 21:13:54.928 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834359b9n  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:13:54.929 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834359b9n  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:13:54.929 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834359b9n  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@66421507
2023-08-09 21:13:54.931 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586834359b9n  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:13:54.932 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586834359b9n  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:13:54.942 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918031', branchId=7854700236664918040, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:13:54.942 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918031 7854700236664918040 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:13:54.942 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:13:54.970 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586834359b9n  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:13:54.970 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 23, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:13:54.971 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586834359b9n  [0;39m <==      Total: 1
2023-08-09 21:13:54.972 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834359b9n  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:13:54.972 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586834359b9n  [0;39m 查出余票记录:DailyTrainTicket [Hash = 521924636, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=23, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:13:54.972 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m1691586834359b9n  [0;39m 本次购票没有选座
2023-08-09 21:13:54.973 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834359b9n  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:13:54.973 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834359b9n  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@6f8ed9d2
2023-08-09 21:13:54.974 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586834359b9n  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:13:54.975 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586834359b9n  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:13:54.989 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586834359b9n  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:13:54.990 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:13:54.990 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586834359b9n  [0;39m <==      Total: 1
2023-08-09 21:13:54.991 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834359b9n  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:13:54.991 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m1691586834359b9n  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:13:54.991 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m1691586834359b9n  [0;39m 从车厢2选座
2023-08-09 21:13:54.991 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834359b9n  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:13:54.992 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834359b9n  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@38e7694b
2023-08-09 21:13:54.993 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586834359b9n  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:13:54.994 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586834359b9n  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:13:55.006 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:13:55.006 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:13:55.007 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:13:55.008 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 00, 2023-08-08 22:00:35.157, 2023-08-08 22:00:35.157
2023-08-09 21:13:55.008 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 00, 2023-08-08 22:00:35.188, 2023-08-08 22:00:35.188
2023-08-09 21:13:55.009 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 00, 2023-08-08 22:00:35.230, 2023-08-08 22:00:35.230
2023-08-09 21:13:55.010 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 00, 2023-08-08 22:00:35.254, 2023-08-08 22:00:35.254
2023-08-09 21:13:55.011 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 00, 2023-08-08 22:00:35.282, 2023-08-08 22:00:35.282
2023-08-09 21:13:55.011 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 00, 2023-08-08 22:00:35.307, 2023-08-08 22:00:35.307
2023-08-09 21:13:55.012 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 00, 2023-08-08 22:00:35.334, 2023-08-08 22:00:35.334
2023-08-09 21:13:55.013 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 00, 2023-08-08 22:00:35.360, 2023-08-08 22:00:35.360
2023-08-09 21:13:55.013 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 00, 2023-08-08 22:00:35.437, 2023-08-08 22:00:35.437
2023-08-09 21:13:55.014 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 00, 2023-08-08 22:00:35.468, 2023-08-08 22:00:35.468
2023-08-09 21:13:55.014 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 00, 2023-08-08 22:00:35.495, 2023-08-08 22:00:35.495
2023-08-09 21:13:55.014 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 00, 2023-08-08 22:00:35.522, 2023-08-08 22:00:35.522
2023-08-09 21:13:55.015 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 00, 2023-08-08 22:00:35.550, 2023-08-08 22:00:35.550
2023-08-09 21:13:55.016 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 00, 2023-08-08 22:00:35.583, 2023-08-08 22:00:35.583
2023-08-09 21:13:55.016 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 00, 2023-08-08 22:00:35.610, 2023-08-08 22:00:35.610
2023-08-09 21:13:55.017 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 00, 2023-08-08 22:00:35.636, 2023-08-08 22:00:35.636
2023-08-09 21:13:55.017 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:13:55.018 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:13:55.019 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:13:55.019 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:13:55.019 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:13:55.020 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:13:55.020 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834359b9n  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:13:55.021 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586834359b9n  [0;39m <==      Total: 25
2023-08-09 21:13:55.021 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834359b9n  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:13:55.021 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m1691586834359b9n  [0;39m 车厢2的座位数:25
2023-08-09 21:13:55.021 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834359b9n  [0;39m 无选座
2023-08-09 21:13:55.021 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834359b9n  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:55.021 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834359b9n  [0;39m 无选座
2023-08-09 21:13:55.022 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834359b9n  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:55.022 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834359b9n  [0;39m 无选座
2023-08-09 21:13:55.022 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m1691586834359b9n  [0;39m 座位3在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:13:55.022 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m1691586834359b9n  [0;39m 座位3被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:13:55.022 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m1691586834359b9n  [0;39m 选中座位
2023-08-09 21:13:55.022 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m1691586834359b9n  [0;39m 最终选座:[DailyTrainSeat [Hash = 2007053208, id=1688913095688327168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=01, col=C, seatType=2, carriageSeatIndex=3, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:13:55.038 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m1691586834359b9n  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918043]
2023-08-09 21:13:55.038 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m1691586834359b9n  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918043
2023-08-09 21:13:55.038 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834359b9n  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:13:55.038 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834359b9n  [0;39m 参数值: DailyTrainSeat [Hash = 1635465729, id=1688913095688327168, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:13:55 CST 2023]
2023-08-09 21:13:55.039 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586834359b9n  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:13:55.040 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586834359b9n  [0;39m ==> Parameters: 01(String), 2023-08-09 21:13:55.038(Timestamp), 1688913095688327168(Long)
2023-08-09 21:13:55.198 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586834359b9n  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918043, branchId:7854700236664918045, lockKeys:daily_train_seat:1688913095688327168
2023-08-09 21:13:55.237 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586834359b9n  [0;39m <==    Updates: 1
2023-08-09 21:13:55.238 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834359b9n  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:13:55.238 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m1691586834359b9n  [0;39m 影响出发站区间:0-1
2023-08-09 21:13:55.238 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m1691586834359b9n  [0;39m 影响到达站区间:0-2
2023-08-09 21:13:55.240 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586834359b9n  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:13:55.242 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586834359b9n  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:13:55.456 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586834359b9n  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918043, branchId:7854700236664918047, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:13:55.497 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586834359b9n  [0;39m <==    Updates: 3
2023-08-09 21:13:55.747 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m1691586834359b9n  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:13:55.747 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834359b9n  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:13:55.748 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834359b9n  [0;39m 参数值: ConfirmOrder [Hash = 746265391, id=1689263738424791040, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:13:55 CST 2023, tickets=null]
2023-08-09 21:13:55.749 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586834359b9n  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:13:55.751 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586834359b9n  [0;39m ==> Parameters: S(String), 2023-08-09 21:13:55.747(Timestamp), 1689263738424791040(Long)
2023-08-09 21:13:55.925 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586834359b9n  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918043, branchId:7854700236664918051, lockKeys:confirm_order:1689263738424791040
2023-08-09 21:13:55.969 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586834359b9n  [0;39m <==    Updates: 1
2023-08-09 21:13:55.971 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834359b9n  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:13:55.971 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m1691586834359b9n  [0;39m transaction 192.168.0.102:8091:7854700236664918043 will be commit
2023-08-09 21:13:56.072 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m1691586834359b9n  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918043
2023-08-09 21:13:56.073 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m1691586834359b9n  [0;39m [192.168.0.102:8091:7854700236664918043] commit status: Committed
2023-08-09 21:13:56.073 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586834359b9n  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:56.106 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586834359b9n  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:13:56.106 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586834359b9n  [0;39m ------------- 结束 耗时：1740 ms -------------
2023-08-09 21:13:56.118 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m169158683429189h  [0;39m 恭喜，抢到锁了
2023-08-09 21:13:56.119 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158683429189h  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:13:56.119 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158683429189h  [0;39m 参数值: ConfirmOrder [Hash = 1055661966, id=1689263743533453312, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:13:56, updateTime=2023-08-09 21:13:56, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:13:56.120 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m169158683429189h  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:13:56.121 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m169158683429189h  [0;39m ==> Parameters: 1689263743533453312(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:13:56.118(Timestamp), 2023-08-09 21:13:56.118(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:13:56.152 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m169158683429189h  [0;39m <==    Updates: 1
2023-08-09 21:13:56.153 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158683429189h  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:13:56.153 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158683429189h  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:13:56.153 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158683429189h  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@705353c8
2023-08-09 21:13:56.155 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m169158683429189h  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:13:56.156 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m169158683429189h  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:13:56.168 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m169158683429189h  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:13:56.169 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m169158683429189h  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 22, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:13:56.170 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m169158683429189h  [0;39m <==      Total: 1
2023-08-09 21:13:56.171 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158683429189h  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:13:56.171 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m169158683429189h  [0;39m 查出余票记录:DailyTrainTicket [Hash = 1167685618, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=22, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:13:56.171 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m169158683429189h  [0;39m 本次购票没有选座
2023-08-09 21:13:56.171 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158683429189h  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:13:56.171 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158683429189h  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@b85cb96
2023-08-09 21:13:56.173 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m169158683429189h  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:13:56.174 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m169158683429189h  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:13:56.187 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m169158683429189h  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:13:56.188 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m169158683429189h  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:13:56.188 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m169158683429189h  [0;39m <==      Total: 1
2023-08-09 21:13:56.189 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158683429189h  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:13:56.189 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m169158683429189h  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:13:56.189 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m169158683429189h  [0;39m 从车厢2选座
2023-08-09 21:13:56.189 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158683429189h  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:13:56.189 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158683429189h  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@67bfd47
2023-08-09 21:13:56.190 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m169158683429189h  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:13:56.191 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m169158683429189h  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:13:56.204 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:13:56.205 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:13:56.205 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:13:56.206 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:13:56.207 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 00, 2023-08-08 22:00:35.188, 2023-08-08 22:00:35.188
2023-08-09 21:13:56.207 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 00, 2023-08-08 22:00:35.230, 2023-08-08 22:00:35.230
2023-08-09 21:13:56.208 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 00, 2023-08-08 22:00:35.254, 2023-08-08 22:00:35.254
2023-08-09 21:13:56.208 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 00, 2023-08-08 22:00:35.282, 2023-08-08 22:00:35.282
2023-08-09 21:13:56.209 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 00, 2023-08-08 22:00:35.307, 2023-08-08 22:00:35.307
2023-08-09 21:13:56.209 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 00, 2023-08-08 22:00:35.334, 2023-08-08 22:00:35.334
2023-08-09 21:13:56.210 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 00, 2023-08-08 22:00:35.360, 2023-08-08 22:00:35.360
2023-08-09 21:13:56.210 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 00, 2023-08-08 22:00:35.437, 2023-08-08 22:00:35.437
2023-08-09 21:13:56.211 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 00, 2023-08-08 22:00:35.468, 2023-08-08 22:00:35.468
2023-08-09 21:13:56.211 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 00, 2023-08-08 22:00:35.495, 2023-08-08 22:00:35.495
2023-08-09 21:13:56.212 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 00, 2023-08-08 22:00:35.522, 2023-08-08 22:00:35.522
2023-08-09 21:13:56.213 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 00, 2023-08-08 22:00:35.550, 2023-08-08 22:00:35.550
2023-08-09 21:13:56.213 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 00, 2023-08-08 22:00:35.583, 2023-08-08 22:00:35.583
2023-08-09 21:13:56.214 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 00, 2023-08-08 22:00:35.610, 2023-08-08 22:00:35.610
2023-08-09 21:13:56.214 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 00, 2023-08-08 22:00:35.636, 2023-08-08 22:00:35.636
2023-08-09 21:13:56.214 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:13:56.215 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:13:56.215 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:13:56.216 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:13:56.216 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:13:56.217 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:13:56.218 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683429189h  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:13:56.218 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m169158683429189h  [0;39m <==      Total: 25
2023-08-09 21:13:56.218 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158683429189h  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:13:56.218 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m169158683429189h  [0;39m 车厢2的座位数:25
2023-08-09 21:13:56.218 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683429189h  [0;39m 无选座
2023-08-09 21:13:56.218 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158683429189h  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:56.218 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683429189h  [0;39m 无选座
2023-08-09 21:13:56.219 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158683429189h  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:56.219 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683429189h  [0;39m 无选座
2023-08-09 21:13:56.219 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158683429189h  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:56.219 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683429189h  [0;39m 无选座
2023-08-09 21:13:56.219 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m169158683429189h  [0;39m 座位4在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:13:56.220 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m169158683429189h  [0;39m 座位4被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:13:56.220 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m169158683429189h  [0;39m 选中座位
2023-08-09 21:13:56.220 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m169158683429189h  [0;39m 最终选座:[DailyTrainSeat [Hash = 490871521, id=1688913095818350592, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=01, col=D, seatType=2, carriageSeatIndex=4, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:13:56.238 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m169158683429189h  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918054]
2023-08-09 21:13:56.238 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m169158683429189h  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918054
2023-08-09 21:13:56.238 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158683429189h  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:13:56.238 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158683429189h  [0;39m 参数值: DailyTrainSeat [Hash = 1351075251, id=1688913095818350592, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:13:56 CST 2023]
2023-08-09 21:13:56.239 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m169158683429189h  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:13:56.239 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m169158683429189h  [0;39m ==> Parameters: 01(String), 2023-08-09 21:13:56.238(Timestamp), 1688913095818350592(Long)
2023-08-09 21:13:56.398 INFO  io.seata.rm.AbstractResourceManager               :73   [32m169158683429189h  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918054, branchId:7854700236664918056, lockKeys:daily_train_seat:1688913095818350592
2023-08-09 21:13:56.451 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m169158683429189h  [0;39m <==    Updates: 1
2023-08-09 21:13:56.451 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158683429189h  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:13:56.452 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m169158683429189h  [0;39m 影响出发站区间:0-1
2023-08-09 21:13:56.452 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m169158683429189h  [0;39m 影响到达站区间:0-2
2023-08-09 21:13:56.453 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m169158683429189h  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:13:56.454 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m169158683429189h  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:13:56.667 INFO  io.seata.rm.AbstractResourceManager               :73   [32m169158683429189h  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918054, branchId:7854700236664918058, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:13:56.710 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m169158683429189h  [0;39m <==    Updates: 3
2023-08-09 21:13:56.882 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918043', branchId=7854700236664918045, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:13:56.882 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918043 7854700236664918045 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:13:56.882 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:13:56.897 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918043', branchId=7854700236664918047, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:13:56.898 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918043 7854700236664918047 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:13:56.898 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:13:56.935 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918043', branchId=7854700236664918051, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:13:56.935 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918043 7854700236664918051 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:13:56.935 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:13:56.948 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m169158683429189h  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:13:56.949 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158683429189h  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:13:56.949 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158683429189h  [0;39m 参数值: ConfirmOrder [Hash = 492562078, id=1689263743533453312, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:13:56 CST 2023, tickets=null]
2023-08-09 21:13:56.950 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m169158683429189h  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:13:56.951 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m169158683429189h  [0;39m ==> Parameters: S(String), 2023-08-09 21:13:56.949(Timestamp), 1689263743533453312(Long)
2023-08-09 21:13:57.103 INFO  io.seata.rm.AbstractResourceManager               :73   [32m169158683429189h  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918054, branchId:7854700236664918064, lockKeys:confirm_order:1689263743533453312
2023-08-09 21:13:57.146 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m169158683429189h  [0;39m <==    Updates: 1
2023-08-09 21:13:57.146 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158683429189h  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:13:57.146 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m169158683429189h  [0;39m transaction 192.168.0.102:8091:7854700236664918054 will be commit
2023-08-09 21:13:57.203 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m169158683429189h  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918054
2023-08-09 21:13:57.203 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m169158683429189h  [0;39m [192.168.0.102:8091:7854700236664918054] commit status: Committed
2023-08-09 21:13:57.203 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m169158683429189h  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:57.229 INFO  com.jktickets.aspect.LogAspect                    :94   [32m169158683429189h  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:13:57.230 INFO  com.jktickets.aspect.LogAspect                    :95   [32m169158683429189h  [0;39m ------------- 结束 耗时：2935 ms -------------
2023-08-09 21:13:57.241 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586834226t0n  [0;39m 恭喜，抢到锁了
2023-08-09 21:13:57.242 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834226t0n  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:13:57.243 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834226t0n  [0;39m 参数值: ConfirmOrder [Hash = 379793969, id=1689263748247851008, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:13:57, updateTime=2023-08-09 21:13:57, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:13:57.244 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586834226t0n  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:13:57.246 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586834226t0n  [0;39m ==> Parameters: 1689263748247851008(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:13:57.242(Timestamp), 2023-08-09 21:13:57.242(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:13:57.279 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586834226t0n  [0;39m <==    Updates: 1
2023-08-09 21:13:57.279 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834226t0n  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:13:57.280 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834226t0n  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:13:57.280 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834226t0n  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@6e20c9a7
2023-08-09 21:13:57.281 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586834226t0n  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:13:57.282 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586834226t0n  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:13:57.295 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586834226t0n  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:13:57.296 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 21, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:13:57.297 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586834226t0n  [0;39m <==      Total: 1
2023-08-09 21:13:57.298 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834226t0n  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:13:57.298 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586834226t0n  [0;39m 查出余票记录:DailyTrainTicket [Hash = 1291037664, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=21, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:13:57.299 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m1691586834226t0n  [0;39m 本次购票没有选座
2023-08-09 21:13:57.299 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834226t0n  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:13:57.299 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834226t0n  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@1da1b88a
2023-08-09 21:13:57.301 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586834226t0n  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:13:57.301 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586834226t0n  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:13:57.314 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586834226t0n  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:13:57.315 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:13:57.316 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586834226t0n  [0;39m <==      Total: 1
2023-08-09 21:13:57.316 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834226t0n  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:13:57.317 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m1691586834226t0n  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:13:57.317 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m1691586834226t0n  [0;39m 从车厢2选座
2023-08-09 21:13:57.317 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834226t0n  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:13:57.317 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834226t0n  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@47808475
2023-08-09 21:13:57.320 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586834226t0n  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:13:57.321 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586834226t0n  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:13:57.335 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:13:57.335 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:13:57.336 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:13:57.338 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:13:57.339 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:13:57.340 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 00, 2023-08-08 22:00:35.230, 2023-08-08 22:00:35.230
2023-08-09 21:13:57.341 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 00, 2023-08-08 22:00:35.254, 2023-08-08 22:00:35.254
2023-08-09 21:13:57.342 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 00, 2023-08-08 22:00:35.282, 2023-08-08 22:00:35.282
2023-08-09 21:13:57.344 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 00, 2023-08-08 22:00:35.307, 2023-08-08 22:00:35.307
2023-08-09 21:13:57.346 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 00, 2023-08-08 22:00:35.334, 2023-08-08 22:00:35.334
2023-08-09 21:13:57.347 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 00, 2023-08-08 22:00:35.360, 2023-08-08 22:00:35.360
2023-08-09 21:13:57.349 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 00, 2023-08-08 22:00:35.437, 2023-08-08 22:00:35.437
2023-08-09 21:13:57.350 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 00, 2023-08-08 22:00:35.468, 2023-08-08 22:00:35.468
2023-08-09 21:13:57.351 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 00, 2023-08-08 22:00:35.495, 2023-08-08 22:00:35.495
2023-08-09 21:13:57.352 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 00, 2023-08-08 22:00:35.522, 2023-08-08 22:00:35.522
2023-08-09 21:13:57.353 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 00, 2023-08-08 22:00:35.550, 2023-08-08 22:00:35.550
2023-08-09 21:13:57.354 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 00, 2023-08-08 22:00:35.583, 2023-08-08 22:00:35.583
2023-08-09 21:13:57.355 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 00, 2023-08-08 22:00:35.610, 2023-08-08 22:00:35.610
2023-08-09 21:13:57.356 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 00, 2023-08-08 22:00:35.636, 2023-08-08 22:00:35.636
2023-08-09 21:13:57.358 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:13:57.359 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:13:57.360 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:13:57.360 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:13:57.361 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:13:57.362 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:13:57.363 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834226t0n  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:13:57.364 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586834226t0n  [0;39m <==      Total: 25
2023-08-09 21:13:57.366 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834226t0n  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:13:57.366 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m1691586834226t0n  [0;39m 车厢2的座位数:25
2023-08-09 21:13:57.367 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834226t0n  [0;39m 无选座
2023-08-09 21:13:57.367 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834226t0n  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:57.367 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834226t0n  [0;39m 无选座
2023-08-09 21:13:57.367 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834226t0n  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:57.367 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834226t0n  [0;39m 无选座
2023-08-09 21:13:57.367 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834226t0n  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:57.368 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834226t0n  [0;39m 无选座
2023-08-09 21:13:57.368 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834226t0n  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:57.368 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834226t0n  [0;39m 无选座
2023-08-09 21:13:57.368 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m1691586834226t0n  [0;39m 座位5在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:13:57.368 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m1691586834226t0n  [0;39m 座位5被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:13:57.369 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m1691586834226t0n  [0;39m 选中座位
2023-08-09 21:13:57.369 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m1691586834226t0n  [0;39m 最终选座:[DailyTrainSeat [Hash = 1565893845, id=1688913095994511360, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=01, col=F, seatType=2, carriageSeatIndex=5, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:13:57.387 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m1691586834226t0n  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918066]
2023-08-09 21:13:57.388 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m1691586834226t0n  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918066
2023-08-09 21:13:57.388 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834226t0n  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:13:57.389 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834226t0n  [0;39m 参数值: DailyTrainSeat [Hash = 1405459679, id=1688913095994511360, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:13:57 CST 2023]
2023-08-09 21:13:57.390 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586834226t0n  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:13:57.391 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586834226t0n  [0;39m ==> Parameters: 01(String), 2023-08-09 21:13:57.388(Timestamp), 1688913095994511360(Long)
2023-08-09 21:13:57.575 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586834226t0n  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918066, branchId:7854700236664918068, lockKeys:daily_train_seat:1688913095994511360
2023-08-09 21:13:57.612 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586834226t0n  [0;39m <==    Updates: 1
2023-08-09 21:13:57.613 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834226t0n  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:13:57.613 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m1691586834226t0n  [0;39m 影响出发站区间:0-1
2023-08-09 21:13:57.614 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m1691586834226t0n  [0;39m 影响到达站区间:0-2
2023-08-09 21:13:57.615 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586834226t0n  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:13:57.616 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586834226t0n  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:13:57.816 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586834226t0n  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918066, branchId:7854700236664918070, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:13:57.855 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586834226t0n  [0;39m <==    Updates: 3
2023-08-09 21:13:57.911 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918054', branchId=7854700236664918056, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:13:57.912 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918054 7854700236664918056 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:13:57.912 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:13:57.930 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918054', branchId=7854700236664918058, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:13:57.930 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918054 7854700236664918058 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:13:57.931 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:13:57.976 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918054', branchId=7854700236664918064, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:13:57.977 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918054 7854700236664918064 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:13:57.977 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:13:58.096 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m1691586834226t0n  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:13:58.096 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834226t0n  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:13:58.097 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834226t0n  [0;39m 参数值: ConfirmOrder [Hash = 351690425, id=1689263748247851008, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:13:58 CST 2023, tickets=null]
2023-08-09 21:13:58.098 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586834226t0n  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:13:58.099 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586834226t0n  [0;39m ==> Parameters: S(String), 2023-08-09 21:13:58.096(Timestamp), 1689263748247851008(Long)
2023-08-09 21:13:58.246 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586834226t0n  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918066, branchId:7854700236664918076, lockKeys:confirm_order:1689263748247851008
2023-08-09 21:13:58.289 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586834226t0n  [0;39m <==    Updates: 1
2023-08-09 21:13:58.290 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834226t0n  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:13:58.290 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m1691586834226t0n  [0;39m transaction 192.168.0.102:8091:7854700236664918066 will be commit
2023-08-09 21:13:58.343 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m1691586834226t0n  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918066
2023-08-09 21:13:58.343 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m1691586834226t0n  [0;39m [192.168.0.102:8091:7854700236664918066] commit status: Committed
2023-08-09 21:13:58.343 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586834226t0n  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:58.369 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586834226t0n  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:13:58.370 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586834226t0n  [0;39m ------------- 结束 耗时：4143 ms -------------
2023-08-09 21:13:58.381 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m16915868341607mm  [0;39m 恭喜，抢到锁了
2023-08-09 21:13:58.382 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868341607mm  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:13:58.382 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868341607mm  [0;39m 参数值: ConfirmOrder [Hash = 613392235, id=1689263753029357568, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:13:58, updateTime=2023-08-09 21:13:58, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:13:58.383 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868341607mm  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:13:58.384 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868341607mm  [0;39m ==> Parameters: 1689263753029357568(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:13:58.382(Timestamp), 2023-08-09 21:13:58.382(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:13:58.416 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868341607mm  [0;39m <==    Updates: 1
2023-08-09 21:13:58.416 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868341607mm  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:13:58.417 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868341607mm  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:13:58.417 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868341607mm  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@47052479
2023-08-09 21:13:58.418 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868341607mm  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:13:58.419 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868341607mm  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:13:58.431 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m16915868341607mm  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:13:58.432 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m16915868341607mm  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 20, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:13:58.432 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868341607mm  [0;39m <==      Total: 1
2023-08-09 21:13:58.432 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868341607mm  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:13:58.432 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m16915868341607mm  [0;39m 查出余票记录:DailyTrainTicket [Hash = 2051532830, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=20, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:13:58.433 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m16915868341607mm  [0;39m 本次购票没有选座
2023-08-09 21:13:58.433 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868341607mm  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:13:58.433 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868341607mm  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@1d085705
2023-08-09 21:13:58.434 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868341607mm  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:13:58.435 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868341607mm  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:13:58.447 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m16915868341607mm  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:13:58.447 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m16915868341607mm  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:13:58.447 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868341607mm  [0;39m <==      Total: 1
2023-08-09 21:13:58.448 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868341607mm  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:13:58.448 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m16915868341607mm  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:13:58.448 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m16915868341607mm  [0;39m 从车厢2选座
2023-08-09 21:13:58.448 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868341607mm  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:13:58.448 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868341607mm  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@1cece508
2023-08-09 21:13:58.449 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868341607mm  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:13:58.450 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868341607mm  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:13:58.464 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:13:58.465 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:13:58.465 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:13:58.466 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:13:58.467 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:13:58.467 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:13:58.467 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 00, 2023-08-08 22:00:35.254, 2023-08-08 22:00:35.254
2023-08-09 21:13:58.468 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 00, 2023-08-08 22:00:35.282, 2023-08-08 22:00:35.282
2023-08-09 21:13:58.468 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 00, 2023-08-08 22:00:35.307, 2023-08-08 22:00:35.307
2023-08-09 21:13:58.469 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 00, 2023-08-08 22:00:35.334, 2023-08-08 22:00:35.334
2023-08-09 21:13:58.469 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 00, 2023-08-08 22:00:35.360, 2023-08-08 22:00:35.360
2023-08-09 21:13:58.470 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 00, 2023-08-08 22:00:35.437, 2023-08-08 22:00:35.437
2023-08-09 21:13:58.470 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 00, 2023-08-08 22:00:35.468, 2023-08-08 22:00:35.468
2023-08-09 21:13:58.471 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 00, 2023-08-08 22:00:35.495, 2023-08-08 22:00:35.495
2023-08-09 21:13:58.471 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 00, 2023-08-08 22:00:35.522, 2023-08-08 22:00:35.522
2023-08-09 21:13:58.472 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 00, 2023-08-08 22:00:35.550, 2023-08-08 22:00:35.550
2023-08-09 21:13:58.473 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 00, 2023-08-08 22:00:35.583, 2023-08-08 22:00:35.583
2023-08-09 21:13:58.473 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 00, 2023-08-08 22:00:35.610, 2023-08-08 22:00:35.610
2023-08-09 21:13:58.474 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 00, 2023-08-08 22:00:35.636, 2023-08-08 22:00:35.636
2023-08-09 21:13:58.475 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:13:58.475 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:13:58.476 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:13:58.476 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:13:58.477 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:13:58.478 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:13:58.478 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868341607mm  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:13:58.479 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868341607mm  [0;39m <==      Total: 25
2023-08-09 21:13:58.480 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868341607mm  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:13:58.480 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m16915868341607mm  [0;39m 车厢2的座位数:25
2023-08-09 21:13:58.480 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868341607mm  [0;39m 无选座
2023-08-09 21:13:58.480 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868341607mm  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:58.480 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868341607mm  [0;39m 无选座
2023-08-09 21:13:58.481 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868341607mm  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:58.481 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868341607mm  [0;39m 无选座
2023-08-09 21:13:58.481 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868341607mm  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:58.481 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868341607mm  [0;39m 无选座
2023-08-09 21:13:58.481 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868341607mm  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:58.482 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868341607mm  [0;39m 无选座
2023-08-09 21:13:58.482 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868341607mm  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:58.482 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868341607mm  [0;39m 无选座
2023-08-09 21:13:58.482 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m16915868341607mm  [0;39m 座位6在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:13:58.482 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m16915868341607mm  [0;39m 座位6被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:13:58.483 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m16915868341607mm  [0;39m 选中座位
2023-08-09 21:13:58.483 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m16915868341607mm  [0;39m 最终选座:[DailyTrainSeat [Hash = 293168137, id=1688913096095174656, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=02, col=A, seatType=2, carriageSeatIndex=6, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:13:58.499 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m16915868341607mm  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918078]
2023-08-09 21:13:58.500 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m16915868341607mm  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918078
2023-08-09 21:13:58.500 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868341607mm  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:13:58.500 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868341607mm  [0;39m 参数值: DailyTrainSeat [Hash = 1536598115, id=1688913096095174656, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:13:58 CST 2023]
2023-08-09 21:13:58.502 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868341607mm  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:13:58.503 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868341607mm  [0;39m ==> Parameters: 01(String), 2023-08-09 21:13:58.5(Timestamp), 1688913096095174656(Long)
2023-08-09 21:13:58.658 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868341607mm  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918078, branchId:7854700236664918080, lockKeys:daily_train_seat:1688913096095174656
2023-08-09 21:13:58.705 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868341607mm  [0;39m <==    Updates: 1
2023-08-09 21:13:58.706 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868341607mm  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:13:58.706 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m16915868341607mm  [0;39m 影响出发站区间:0-1
2023-08-09 21:13:58.706 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m16915868341607mm  [0;39m 影响到达站区间:0-2
2023-08-09 21:13:58.707 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868341607mm  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:13:58.708 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868341607mm  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:13:58.892 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918066', branchId=7854700236664918068, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:13:58.893 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918066 7854700236664918068 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:13:58.893 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:13:58.912 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918066', branchId=7854700236664918070, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:13:58.912 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918066 7854700236664918070 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:13:58.912 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:13:58.927 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868341607mm  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918078, branchId:7854700236664918082, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:13:58.954 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918066', branchId=7854700236664918076, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:13:58.955 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918066 7854700236664918076 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:13:58.955 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:13:58.978 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868341607mm  [0;39m <==    Updates: 3
2023-08-09 21:13:59.200 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m16915868341607mm  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:13:59.200 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868341607mm  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:13:59.201 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868341607mm  [0;39m 参数值: ConfirmOrder [Hash = 1768489316, id=1689263753029357568, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:13:59 CST 2023, tickets=null]
2023-08-09 21:13:59.201 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868341607mm  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:13:59.202 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868341607mm  [0;39m ==> Parameters: S(String), 2023-08-09 21:13:59.2(Timestamp), 1689263753029357568(Long)
2023-08-09 21:13:59.365 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868341607mm  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918078, branchId:7854700236664918088, lockKeys:confirm_order:1689263753029357568
2023-08-09 21:13:59.404 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868341607mm  [0;39m <==    Updates: 1
2023-08-09 21:13:59.404 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868341607mm  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:13:59.405 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m16915868341607mm  [0;39m transaction 192.168.0.102:8091:7854700236664918078 will be commit
2023-08-09 21:13:59.461 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m16915868341607mm  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918078
2023-08-09 21:13:59.461 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m16915868341607mm  [0;39m [192.168.0.102:8091:7854700236664918078] commit status: Committed
2023-08-09 21:13:59.461 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m16915868341607mm  [0;39m 购票流程结束，释放锁
2023-08-09 21:13:59.484 INFO  com.jktickets.aspect.LogAspect                    :94   [32m16915868341607mm  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:13:59.484 INFO  com.jktickets.aspect.LogAspect                    :95   [32m16915868341607mm  [0;39m ------------- 结束 耗时：5321 ms -------------
2023-08-09 21:13:59.496 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586834096o7h  [0;39m 恭喜，抢到锁了
2023-08-09 21:13:59.496 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834096o7h  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:13:59.496 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834096o7h  [0;39m 参数值: ConfirmOrder [Hash = 1346815256, id=1689263757701812224, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:13:59, updateTime=2023-08-09 21:13:59, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:13:59.497 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586834096o7h  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:13:59.497 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586834096o7h  [0;39m ==> Parameters: 1689263757701812224(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:13:59.496(Timestamp), 2023-08-09 21:13:59.496(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:13:59.535 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586834096o7h  [0;39m <==    Updates: 1
2023-08-09 21:13:59.535 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834096o7h  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:13:59.536 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834096o7h  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:13:59.536 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834096o7h  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@28a9929a
2023-08-09 21:13:59.537 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586834096o7h  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:13:59.537 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586834096o7h  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:13:59.565 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586834096o7h  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:13:59.566 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 19, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:13:59.567 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586834096o7h  [0;39m <==      Total: 1
2023-08-09 21:13:59.567 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834096o7h  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:13:59.567 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586834096o7h  [0;39m 查出余票记录:DailyTrainTicket [Hash = 1225691528, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=19, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:13:59.568 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m1691586834096o7h  [0;39m 本次购票没有选座
2023-08-09 21:13:59.568 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834096o7h  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:13:59.568 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834096o7h  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@57746dab
2023-08-09 21:13:59.569 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586834096o7h  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:13:59.570 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586834096o7h  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:13:59.585 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586834096o7h  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:13:59.586 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:13:59.586 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586834096o7h  [0;39m <==      Total: 1
2023-08-09 21:13:59.587 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834096o7h  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:13:59.587 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m1691586834096o7h  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:13:59.587 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m1691586834096o7h  [0;39m 从车厢2选座
2023-08-09 21:13:59.587 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834096o7h  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:13:59.587 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834096o7h  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@2b4834da
2023-08-09 21:13:59.588 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586834096o7h  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:13:59.588 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586834096o7h  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:13:59.607 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:13:59.607 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:13:59.608 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:13:59.609 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:13:59.609 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:13:59.610 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:13:59.610 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:13:59.610 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 00, 2023-08-08 22:00:35.282, 2023-08-08 22:00:35.282
2023-08-09 21:13:59.611 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 00, 2023-08-08 22:00:35.307, 2023-08-08 22:00:35.307
2023-08-09 21:13:59.612 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 00, 2023-08-08 22:00:35.334, 2023-08-08 22:00:35.334
2023-08-09 21:13:59.612 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 00, 2023-08-08 22:00:35.360, 2023-08-08 22:00:35.360
2023-08-09 21:13:59.612 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 00, 2023-08-08 22:00:35.437, 2023-08-08 22:00:35.437
2023-08-09 21:13:59.613 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 00, 2023-08-08 22:00:35.468, 2023-08-08 22:00:35.468
2023-08-09 21:13:59.613 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 00, 2023-08-08 22:00:35.495, 2023-08-08 22:00:35.495
2023-08-09 21:13:59.614 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 00, 2023-08-08 22:00:35.522, 2023-08-08 22:00:35.522
2023-08-09 21:13:59.614 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 00, 2023-08-08 22:00:35.550, 2023-08-08 22:00:35.550
2023-08-09 21:13:59.615 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 00, 2023-08-08 22:00:35.583, 2023-08-08 22:00:35.583
2023-08-09 21:13:59.615 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 00, 2023-08-08 22:00:35.610, 2023-08-08 22:00:35.610
2023-08-09 21:13:59.616 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 00, 2023-08-08 22:00:35.636, 2023-08-08 22:00:35.636
2023-08-09 21:13:59.617 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:13:59.617 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:13:59.618 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:13:59.618 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:13:59.618 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:13:59.619 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:13:59.620 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834096o7h  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:13:59.620 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586834096o7h  [0;39m <==      Total: 25
2023-08-09 21:13:59.620 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834096o7h  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:13:59.620 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m1691586834096o7h  [0;39m 车厢2的座位数:25
2023-08-09 21:13:59.620 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834096o7h  [0;39m 无选座
2023-08-09 21:13:59.620 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834096o7h  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:59.621 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834096o7h  [0;39m 无选座
2023-08-09 21:13:59.621 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834096o7h  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:59.621 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834096o7h  [0;39m 无选座
2023-08-09 21:13:59.621 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834096o7h  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:59.621 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834096o7h  [0;39m 无选座
2023-08-09 21:13:59.621 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834096o7h  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:59.621 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834096o7h  [0;39m 无选座
2023-08-09 21:13:59.621 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834096o7h  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:59.621 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834096o7h  [0;39m 无选座
2023-08-09 21:13:59.621 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834096o7h  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:13:59.621 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834096o7h  [0;39m 无选座
2023-08-09 21:13:59.622 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m1691586834096o7h  [0;39m 座位7在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:13:59.622 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m1691586834096o7h  [0;39m 座位7被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:13:59.622 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m1691586834096o7h  [0;39m 选中座位
2023-08-09 21:13:59.622 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m1691586834096o7h  [0;39m 最终选座:[DailyTrainSeat [Hash = 1654283450, id=1688913096212615168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=02, col=B, seatType=2, carriageSeatIndex=7, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:13:59.639 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m1691586834096o7h  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918090]
2023-08-09 21:13:59.639 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m1691586834096o7h  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918090
2023-08-09 21:13:59.639 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834096o7h  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:13:59.639 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834096o7h  [0;39m 参数值: DailyTrainSeat [Hash = 958974340, id=1688913096212615168, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:13:59 CST 2023]
2023-08-09 21:13:59.640 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586834096o7h  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:13:59.640 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586834096o7h  [0;39m ==> Parameters: 01(String), 2023-08-09 21:13:59.639(Timestamp), 1688913096212615168(Long)
2023-08-09 21:13:59.841 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586834096o7h  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918090, branchId:7854700236664918092, lockKeys:daily_train_seat:1688913096212615168
2023-08-09 21:13:59.878 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586834096o7h  [0;39m <==    Updates: 1
2023-08-09 21:13:59.879 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834096o7h  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:13:59.879 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m1691586834096o7h  [0;39m 影响出发站区间:0-1
2023-08-09 21:13:59.879 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m1691586834096o7h  [0;39m 影响到达站区间:0-2
2023-08-09 21:13:59.880 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586834096o7h  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:13:59.880 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586834096o7h  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:13:59.885 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918078', branchId=7854700236664918080, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:13:59.885 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918078 7854700236664918080 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:13:59.885 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:13:59.900 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918078', branchId=7854700236664918082, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:13:59.900 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918078 7854700236664918082 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:13:59.900 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:13:59.934 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918078', branchId=7854700236664918088, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:13:59.934 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918078 7854700236664918088 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:13:59.934 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:00.095 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586834096o7h  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918090, branchId:7854700236664918096, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:00.132 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586834096o7h  [0;39m <==    Updates: 3
2023-08-09 21:14:00.371 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m1691586834096o7h  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:00.371 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834096o7h  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:00.371 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834096o7h  [0;39m 参数值: ConfirmOrder [Hash = 715336825, id=1689263757701812224, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:00 CST 2023, tickets=null]
2023-08-09 21:14:00.372 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586834096o7h  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:00.372 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586834096o7h  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:00.371(Timestamp), 1689263757701812224(Long)
2023-08-09 21:14:00.549 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586834096o7h  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918090, branchId:7854700236664918100, lockKeys:confirm_order:1689263757701812224
2023-08-09 21:14:00.588 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586834096o7h  [0;39m <==    Updates: 1
2023-08-09 21:14:00.588 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834096o7h  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:00.589 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m1691586834096o7h  [0;39m transaction 192.168.0.102:8091:7854700236664918090 will be commit
2023-08-09 21:14:00.653 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m1691586834096o7h  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918090
2023-08-09 21:14:00.653 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m1691586834096o7h  [0;39m [192.168.0.102:8091:7854700236664918090] commit status: Committed
2023-08-09 21:14:00.653 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586834096o7h  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:00.680 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586834096o7h  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:00.681 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586834096o7h  [0;39m ------------- 结束 耗时：6582 ms -------------
2023-08-09 21:14:00.700 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586834030zse  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:00.701 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834030zse  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:00.701 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834030zse  [0;39m 参数值: ConfirmOrder [Hash = 840118257, id=1689263762755948544, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:00, updateTime=2023-08-09 21:14:00, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:00.701 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586834030zse  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:00.702 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586834030zse  [0;39m ==> Parameters: 1689263762755948544(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:00.701(Timestamp), 2023-08-09 21:14:00.701(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:00.734 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586834030zse  [0;39m <==    Updates: 1
2023-08-09 21:14:00.735 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834030zse  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:00.736 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834030zse  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:00.736 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834030zse  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@5eaf67c8
2023-08-09 21:14:00.737 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586834030zse  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:00.737 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586834030zse  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:00.750 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586834030zse  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:00.751 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586834030zse  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 18, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:00.751 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586834030zse  [0;39m <==      Total: 1
2023-08-09 21:14:00.752 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834030zse  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:00.752 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586834030zse  [0;39m 查出余票记录:DailyTrainTicket [Hash = 131364541, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=18, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:00.752 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m1691586834030zse  [0;39m 本次购票没有选座
2023-08-09 21:14:00.752 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834030zse  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:00.752 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834030zse  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@5fe1dbb0
2023-08-09 21:14:00.753 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586834030zse  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:14:00.753 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586834030zse  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:14:00.767 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586834030zse  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:14:00.768 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586834030zse  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:14:00.768 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586834030zse  [0;39m <==      Total: 1
2023-08-09 21:14:00.769 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834030zse  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:00.769 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m1691586834030zse  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:14:00.769 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m1691586834030zse  [0;39m 从车厢2选座
2023-08-09 21:14:00.769 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834030zse  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:00.769 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834030zse  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@3627492a
2023-08-09 21:14:00.770 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586834030zse  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:14:00.771 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586834030zse  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:14:00.784 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:14:00.784 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:14:00.785 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:14:00.786 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:14:00.786 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:14:00.786 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:14:00.787 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:14:00.787 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 01, 2023-08-08 22:00:35.282, 2023-08-09 21:13:59.639
2023-08-09 21:14:00.788 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 00, 2023-08-08 22:00:35.307, 2023-08-08 22:00:35.307
2023-08-09 21:14:00.788 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 00, 2023-08-08 22:00:35.334, 2023-08-08 22:00:35.334
2023-08-09 21:14:00.788 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 00, 2023-08-08 22:00:35.360, 2023-08-08 22:00:35.360
2023-08-09 21:14:00.789 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 00, 2023-08-08 22:00:35.437, 2023-08-08 22:00:35.437
2023-08-09 21:14:00.789 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 00, 2023-08-08 22:00:35.468, 2023-08-08 22:00:35.468
2023-08-09 21:14:00.789 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 00, 2023-08-08 22:00:35.495, 2023-08-08 22:00:35.495
2023-08-09 21:14:00.790 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 00, 2023-08-08 22:00:35.522, 2023-08-08 22:00:35.522
2023-08-09 21:14:00.791 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 00, 2023-08-08 22:00:35.550, 2023-08-08 22:00:35.550
2023-08-09 21:14:00.791 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 00, 2023-08-08 22:00:35.583, 2023-08-08 22:00:35.583
2023-08-09 21:14:00.792 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 00, 2023-08-08 22:00:35.610, 2023-08-08 22:00:35.610
2023-08-09 21:14:00.792 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 00, 2023-08-08 22:00:35.636, 2023-08-08 22:00:35.636
2023-08-09 21:14:00.793 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:14:00.793 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:14:00.794 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:14:00.794 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:14:00.794 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:14:00.795 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:14:00.795 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586834030zse  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:14:00.796 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586834030zse  [0;39m <==      Total: 25
2023-08-09 21:14:00.796 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834030zse  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:00.797 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m1691586834030zse  [0;39m 车厢2的座位数:25
2023-08-09 21:14:00.797 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834030zse  [0;39m 无选座
2023-08-09 21:14:00.797 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834030zse  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:00.797 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834030zse  [0;39m 无选座
2023-08-09 21:14:00.797 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834030zse  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:00.797 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834030zse  [0;39m 无选座
2023-08-09 21:14:00.797 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834030zse  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:00.797 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834030zse  [0;39m 无选座
2023-08-09 21:14:00.797 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834030zse  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:00.798 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834030zse  [0;39m 无选座
2023-08-09 21:14:00.798 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834030zse  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:00.798 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834030zse  [0;39m 无选座
2023-08-09 21:14:00.798 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834030zse  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:00.798 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834030zse  [0;39m 无选座
2023-08-09 21:14:00.798 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586834030zse  [0;39m 座位7在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:00.798 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586834030zse  [0;39m 无选座
2023-08-09 21:14:00.798 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m1691586834030zse  [0;39m 座位8在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:14:00.798 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m1691586834030zse  [0;39m 座位8被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:14:00.798 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m1691586834030zse  [0;39m 选中座位
2023-08-09 21:14:00.798 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m1691586834030zse  [0;39m 最终选座:[DailyTrainSeat [Hash = 1147139352, id=1688913096321667072, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=02, col=C, seatType=2, carriageSeatIndex=8, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:14:00.820 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m1691586834030zse  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918102]
2023-08-09 21:14:00.820 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m1691586834030zse  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918102
2023-08-09 21:14:00.821 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834030zse  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:00.821 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834030zse  [0;39m 参数值: DailyTrainSeat [Hash = 1136443798, id=1688913096321667072, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:14:00 CST 2023]
2023-08-09 21:14:00.821 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586834030zse  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:14:00.822 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586834030zse  [0;39m ==> Parameters: 01(String), 2023-08-09 21:14:00.821(Timestamp), 1688913096321667072(Long)
2023-08-09 21:14:00.877 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918090', branchId=7854700236664918092, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:00.878 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918090 7854700236664918092 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:00.878 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:00.894 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918090', branchId=7854700236664918096, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:00.895 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918090 7854700236664918096 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:00.895 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:00.931 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918090', branchId=7854700236664918100, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:00.932 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918090 7854700236664918100 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:00.932 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:01.021 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586834030zse  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918102, branchId:7854700236664918106, lockKeys:daily_train_seat:1688913096321667072
2023-08-09 21:14:01.088 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586834030zse  [0;39m <==    Updates: 1
2023-08-09 21:14:01.089 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834030zse  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:01.089 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m1691586834030zse  [0;39m 影响出发站区间:0-1
2023-08-09 21:14:01.089 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m1691586834030zse  [0;39m 影响到达站区间:0-2
2023-08-09 21:14:01.090 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586834030zse  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:14:01.090 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586834030zse  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:14:01.334 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586834030zse  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918102, branchId:7854700236664918108, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:01.376 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586834030zse  [0;39m <==    Updates: 3
2023-08-09 21:14:01.672 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m1691586834030zse  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:01.673 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586834030zse  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:01.673 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586834030zse  [0;39m 参数值: ConfirmOrder [Hash = 543454358, id=1689263762755948544, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:01 CST 2023, tickets=null]
2023-08-09 21:14:01.674 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586834030zse  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:01.675 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586834030zse  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:01.673(Timestamp), 1689263762755948544(Long)
2023-08-09 21:14:01.853 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586834030zse  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918102, branchId:7854700236664918112, lockKeys:confirm_order:1689263762755948544
2023-08-09 21:14:01.899 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586834030zse  [0;39m <==    Updates: 1
2023-08-09 21:14:01.900 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586834030zse  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:01.901 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m1691586834030zse  [0;39m transaction 192.168.0.102:8091:7854700236664918102 will be commit
2023-08-09 21:14:01.966 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m1691586834030zse  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918102
2023-08-09 21:14:01.966 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m1691586834030zse  [0;39m [192.168.0.102:8091:7854700236664918102] commit status: Committed
2023-08-09 21:14:01.967 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586834030zse  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:01.991 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586834030zse  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:01.991 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586834030zse  [0;39m ------------- 结束 耗时：7959 ms -------------
2023-08-09 21:14:02.005 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586833965hvc  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:02.005 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833965hvc  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:02.006 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833965hvc  [0;39m 参数值: ConfirmOrder [Hash = 738185166, id=1689263768225320960, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:02, updateTime=2023-08-09 21:14:02, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:02.007 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586833965hvc  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:02.008 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586833965hvc  [0;39m ==> Parameters: 1689263768225320960(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:02.005(Timestamp), 2023-08-09 21:14:02.005(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:02.034 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586833965hvc  [0;39m <==    Updates: 1
2023-08-09 21:14:02.035 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833965hvc  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:02.036 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833965hvc  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:02.036 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833965hvc  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@19d76696
2023-08-09 21:14:02.038 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586833965hvc  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:02.038 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586833965hvc  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:02.052 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586833965hvc  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:02.068 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 17, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:02.070 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586833965hvc  [0;39m <==      Total: 1
2023-08-09 21:14:02.070 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833965hvc  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:02.071 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586833965hvc  [0;39m 查出余票记录:DailyTrainTicket [Hash = 532928692, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=17, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:02.072 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m1691586833965hvc  [0;39m 本次购票没有选座
2023-08-09 21:14:02.072 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833965hvc  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:02.073 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833965hvc  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@6b113cdb
2023-08-09 21:14:02.074 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586833965hvc  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:14:02.075 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586833965hvc  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:14:02.102 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586833965hvc  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:14:02.103 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:14:02.103 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586833965hvc  [0;39m <==      Total: 1
2023-08-09 21:14:02.104 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833965hvc  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:02.104 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m1691586833965hvc  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:14:02.104 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m1691586833965hvc  [0;39m 从车厢2选座
2023-08-09 21:14:02.104 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833965hvc  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:02.104 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833965hvc  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@3cce2113
2023-08-09 21:14:02.105 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586833965hvc  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:14:02.106 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586833965hvc  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:14:02.212 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:14:02.212 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:14:02.213 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:14:02.214 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:14:02.214 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:14:02.215 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:14:02.227 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:14:02.228 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 01, 2023-08-08 22:00:35.282, 2023-08-09 21:13:59.639
2023-08-09 21:14:02.229 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 01, 2023-08-08 22:00:35.307, 2023-08-09 21:14:00.821
2023-08-09 21:14:02.230 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 00, 2023-08-08 22:00:35.334, 2023-08-08 22:00:35.334
2023-08-09 21:14:02.230 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 00, 2023-08-08 22:00:35.360, 2023-08-08 22:00:35.360
2023-08-09 21:14:02.243 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 00, 2023-08-08 22:00:35.437, 2023-08-08 22:00:35.437
2023-08-09 21:14:02.244 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 00, 2023-08-08 22:00:35.468, 2023-08-08 22:00:35.468
2023-08-09 21:14:02.244 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 00, 2023-08-08 22:00:35.495, 2023-08-08 22:00:35.495
2023-08-09 21:14:02.244 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 00, 2023-08-08 22:00:35.522, 2023-08-08 22:00:35.522
2023-08-09 21:14:02.245 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 00, 2023-08-08 22:00:35.550, 2023-08-08 22:00:35.550
2023-08-09 21:14:02.258 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 00, 2023-08-08 22:00:35.583, 2023-08-08 22:00:35.583
2023-08-09 21:14:02.259 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 00, 2023-08-08 22:00:35.610, 2023-08-08 22:00:35.610
2023-08-09 21:14:02.259 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 00, 2023-08-08 22:00:35.636, 2023-08-08 22:00:35.636
2023-08-09 21:14:02.260 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:14:02.260 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:14:02.261 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:14:02.261 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:14:02.262 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:14:02.262 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:14:02.263 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833965hvc  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:14:02.263 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586833965hvc  [0;39m <==      Total: 25
2023-08-09 21:14:02.264 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833965hvc  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:02.264 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m1691586833965hvc  [0;39m 车厢2的座位数:25
2023-08-09 21:14:02.264 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833965hvc  [0;39m 无选座
2023-08-09 21:14:02.264 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833965hvc  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:02.264 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833965hvc  [0;39m 无选座
2023-08-09 21:14:02.264 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833965hvc  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:02.264 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833965hvc  [0;39m 无选座
2023-08-09 21:14:02.265 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833965hvc  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:02.265 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833965hvc  [0;39m 无选座
2023-08-09 21:14:02.265 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833965hvc  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:02.265 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833965hvc  [0;39m 无选座
2023-08-09 21:14:02.265 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833965hvc  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:02.265 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833965hvc  [0;39m 无选座
2023-08-09 21:14:02.265 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833965hvc  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:02.265 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833965hvc  [0;39m 无选座
2023-08-09 21:14:02.265 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833965hvc  [0;39m 座位7在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:02.266 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833965hvc  [0;39m 无选座
2023-08-09 21:14:02.266 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833965hvc  [0;39m 座位8在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:02.266 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833965hvc  [0;39m 无选座
2023-08-09 21:14:02.266 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m1691586833965hvc  [0;39m 座位9在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:14:02.266 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m1691586833965hvc  [0;39m 座位9被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:14:02.266 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m1691586833965hvc  [0;39m 选中座位
2023-08-09 21:14:02.266 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m1691586833965hvc  [0;39m 最终选座:[DailyTrainSeat [Hash = 1599884480, id=1688913096434913280, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=02, col=D, seatType=2, carriageSeatIndex=9, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:14:02.394 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m1691586833965hvc  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918115]
2023-08-09 21:14:02.395 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m1691586833965hvc  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918115
2023-08-09 21:14:02.395 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833965hvc  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:02.395 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833965hvc  [0;39m 参数值: DailyTrainSeat [Hash = 375585806, id=1688913096434913280, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:14:02 CST 2023]
2023-08-09 21:14:02.396 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586833965hvc  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:14:02.397 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586833965hvc  [0;39m ==> Parameters: 01(String), 2023-08-09 21:14:02.395(Timestamp), 1688913096434913280(Long)
2023-08-09 21:14:03.005 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918102', branchId=7854700236664918106, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:03.005 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918102 7854700236664918106 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:03.005 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:03.019 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918102', branchId=7854700236664918108, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:03.019 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918102 7854700236664918108 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:03.019 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:03.024 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586833965hvc  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918115, branchId:7854700236664918117, lockKeys:daily_train_seat:1688913096434913280
2023-08-09 21:14:03.159 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918102', branchId=7854700236664918112, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:03.160 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918102 7854700236664918112 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:03.160 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:03.170 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586833965hvc  [0;39m <==    Updates: 1
2023-08-09 21:14:03.170 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833965hvc  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:03.171 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m1691586833965hvc  [0;39m 影响出发站区间:0-1
2023-08-09 21:14:03.171 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m1691586833965hvc  [0;39m 影响到达站区间:0-2
2023-08-09 21:14:03.171 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586833965hvc  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:14:03.172 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586833965hvc  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:14:03.532 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586833965hvc  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918115, branchId:7854700236664918121, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:03.571 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586833965hvc  [0;39m <==    Updates: 3
2023-08-09 21:14:03.802 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m1691586833965hvc  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:03.803 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833965hvc  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:03.803 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833965hvc  [0;39m 参数值: ConfirmOrder [Hash = 1566095190, id=1689263768225320960, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:03 CST 2023, tickets=null]
2023-08-09 21:14:03.804 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586833965hvc  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:03.805 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586833965hvc  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:03.802(Timestamp), 1689263768225320960(Long)
2023-08-09 21:14:03.986 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586833965hvc  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918115, branchId:7854700236664918126, lockKeys:confirm_order:1689263768225320960
2023-08-09 21:14:04.027 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586833965hvc  [0;39m <==    Updates: 1
2023-08-09 21:14:04.027 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833965hvc  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:04.028 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m1691586833965hvc  [0;39m transaction 192.168.0.102:8091:7854700236664918115 will be commit
2023-08-09 21:14:04.093 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m1691586833965hvc  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918115
2023-08-09 21:14:04.094 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m1691586833965hvc  [0;39m [192.168.0.102:8091:7854700236664918115] commit status: Committed
2023-08-09 21:14:04.094 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586833965hvc  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:04.116 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586833965hvc  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:04.116 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586833965hvc  [0;39m ------------- 结束 耗时：10142 ms -------------
2023-08-09 21:14:04.129 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m16915868338993l5  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:04.129 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868338993l5  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:04.130 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868338993l5  [0;39m 参数值: ConfirmOrder [Hash = 1762135175, id=1689263777134022656, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:04, updateTime=2023-08-09 21:14:04, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:04.131 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868338993l5  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:04.132 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868338993l5  [0;39m ==> Parameters: 1689263777134022656(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:04.129(Timestamp), 2023-08-09 21:14:04.129(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:04.156 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868338993l5  [0;39m <==    Updates: 1
2023-08-09 21:14:04.156 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868338993l5  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:04.156 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868338993l5  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:04.156 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868338993l5  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@11ee552c
2023-08-09 21:14:04.157 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868338993l5  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:04.157 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868338993l5  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:04.180 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m16915868338993l5  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:04.181 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m16915868338993l5  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 16, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:04.181 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868338993l5  [0;39m <==      Total: 1
2023-08-09 21:14:04.182 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868338993l5  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:04.182 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m16915868338993l5  [0;39m 查出余票记录:DailyTrainTicket [Hash = 256151024, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=16, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:04.182 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m16915868338993l5  [0;39m 本次购票没有选座
2023-08-09 21:14:04.182 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868338993l5  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:04.182 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868338993l5  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@694ea114
2023-08-09 21:14:04.183 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868338993l5  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:14:04.184 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868338993l5  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:14:04.199 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m16915868338993l5  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:14:04.199 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m16915868338993l5  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:14:04.200 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868338993l5  [0;39m <==      Total: 1
2023-08-09 21:14:04.200 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868338993l5  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:04.200 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m16915868338993l5  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:14:04.200 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m16915868338993l5  [0;39m 从车厢2选座
2023-08-09 21:14:04.200 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868338993l5  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:04.201 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868338993l5  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@224f1b23
2023-08-09 21:14:04.202 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868338993l5  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:14:04.202 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868338993l5  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:14:04.217 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:14:04.218 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:14:04.219 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:14:04.220 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:14:04.220 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:14:04.221 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:14:04.221 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:14:04.222 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 01, 2023-08-08 22:00:35.282, 2023-08-09 21:13:59.639
2023-08-09 21:14:04.223 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 01, 2023-08-08 22:00:35.307, 2023-08-09 21:14:00.821
2023-08-09 21:14:04.223 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 01, 2023-08-08 22:00:35.334, 2023-08-09 21:14:02.395
2023-08-09 21:14:04.223 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 00, 2023-08-08 22:00:35.360, 2023-08-08 22:00:35.360
2023-08-09 21:14:04.224 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 00, 2023-08-08 22:00:35.437, 2023-08-08 22:00:35.437
2023-08-09 21:14:04.225 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 00, 2023-08-08 22:00:35.468, 2023-08-08 22:00:35.468
2023-08-09 21:14:04.227 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 00, 2023-08-08 22:00:35.495, 2023-08-08 22:00:35.495
2023-08-09 21:14:04.227 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 00, 2023-08-08 22:00:35.522, 2023-08-08 22:00:35.522
2023-08-09 21:14:04.228 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 00, 2023-08-08 22:00:35.550, 2023-08-08 22:00:35.550
2023-08-09 21:14:04.228 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 00, 2023-08-08 22:00:35.583, 2023-08-08 22:00:35.583
2023-08-09 21:14:04.229 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 00, 2023-08-08 22:00:35.610, 2023-08-08 22:00:35.610
2023-08-09 21:14:04.229 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 00, 2023-08-08 22:00:35.636, 2023-08-08 22:00:35.636
2023-08-09 21:14:04.230 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:14:04.231 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:14:04.231 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:14:04.232 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:14:04.232 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:14:04.233 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:14:04.234 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338993l5  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:14:04.235 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868338993l5  [0;39m <==      Total: 25
2023-08-09 21:14:04.235 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868338993l5  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:04.236 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m16915868338993l5  [0;39m 车厢2的座位数:25
2023-08-09 21:14:04.236 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338993l5  [0;39m 无选座
2023-08-09 21:14:04.236 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338993l5  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:04.237 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338993l5  [0;39m 无选座
2023-08-09 21:14:04.237 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338993l5  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:04.237 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338993l5  [0;39m 无选座
2023-08-09 21:14:04.237 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338993l5  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:04.238 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338993l5  [0;39m 无选座
2023-08-09 21:14:04.238 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338993l5  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:04.238 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338993l5  [0;39m 无选座
2023-08-09 21:14:04.238 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338993l5  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:04.238 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338993l5  [0;39m 无选座
2023-08-09 21:14:04.239 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338993l5  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:04.239 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338993l5  [0;39m 无选座
2023-08-09 21:14:04.239 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338993l5  [0;39m 座位7在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:04.239 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338993l5  [0;39m 无选座
2023-08-09 21:14:04.239 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338993l5  [0;39m 座位8在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:04.239 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338993l5  [0;39m 无选座
2023-08-09 21:14:04.239 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338993l5  [0;39m 座位9在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:04.239 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338993l5  [0;39m 无选座
2023-08-09 21:14:04.239 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m16915868338993l5  [0;39m 座位10在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:14:04.240 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m16915868338993l5  [0;39m 座位10被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:14:04.240 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m16915868338993l5  [0;39m 选中座位
2023-08-09 21:14:04.240 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m16915868338993l5  [0;39m 最终选座:[DailyTrainSeat [Hash = 362115003, id=1688913096539770880, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=02, col=F, seatType=2, carriageSeatIndex=10, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:14:04.261 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m16915868338993l5  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918128]
2023-08-09 21:14:04.261 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m16915868338993l5  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918128
2023-08-09 21:14:04.261 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868338993l5  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:04.261 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868338993l5  [0;39m 参数值: DailyTrainSeat [Hash = 1230149843, id=1688913096539770880, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:14:04 CST 2023]
2023-08-09 21:14:04.262 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868338993l5  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:14:04.262 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868338993l5  [0;39m ==> Parameters: 01(String), 2023-08-09 21:14:04.261(Timestamp), 1688913096539770880(Long)
2023-08-09 21:14:04.443 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868338993l5  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918128, branchId:7854700236664918130, lockKeys:daily_train_seat:1688913096539770880
2023-08-09 21:14:04.480 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868338993l5  [0;39m <==    Updates: 1
2023-08-09 21:14:04.480 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868338993l5  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:04.480 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m16915868338993l5  [0;39m 影响出发站区间:0-1
2023-08-09 21:14:04.481 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m16915868338993l5  [0;39m 影响到达站区间:0-2
2023-08-09 21:14:04.481 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868338993l5  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:14:04.482 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868338993l5  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:14:04.743 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868338993l5  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918128, branchId:7854700236664918132, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:04.781 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868338993l5  [0;39m <==    Updates: 3
2023-08-09 21:14:04.897 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918115', branchId=7854700236664918117, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:04.897 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918115 7854700236664918117 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:04.897 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:04.914 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918115', branchId=7854700236664918121, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:04.914 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918115 7854700236664918121 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:04.915 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:04.954 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918115', branchId=7854700236664918126, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:04.955 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918115 7854700236664918126 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:04.956 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:05.029 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m16915868338993l5  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:05.029 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868338993l5  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:05.030 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868338993l5  [0;39m 参数值: ConfirmOrder [Hash = 2082882043, id=1689263777134022656, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:05 CST 2023, tickets=null]
2023-08-09 21:14:05.031 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868338993l5  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:05.032 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868338993l5  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:05.029(Timestamp), 1689263777134022656(Long)
2023-08-09 21:14:05.194 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868338993l5  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918128, branchId:7854700236664918138, lockKeys:confirm_order:1689263777134022656
2023-08-09 21:14:05.235 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868338993l5  [0;39m <==    Updates: 1
2023-08-09 21:14:05.236 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868338993l5  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:05.237 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m16915868338993l5  [0;39m transaction 192.168.0.102:8091:7854700236664918128 will be commit
2023-08-09 21:14:05.298 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m16915868338993l5  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918128
2023-08-09 21:14:05.298 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m16915868338993l5  [0;39m [192.168.0.102:8091:7854700236664918128] commit status: Committed
2023-08-09 21:14:05.298 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m16915868338993l5  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:05.323 INFO  com.jktickets.aspect.LogAspect                    :94   [32m16915868338993l5  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:05.323 INFO  com.jktickets.aspect.LogAspect                    :95   [32m16915868338993l5  [0;39m ------------- 结束 耗时：11421 ms -------------
2023-08-09 21:14:05.339 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m16915868338314dw  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:05.340 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868338314dw  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:05.340 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868338314dw  [0;39m 参数值: ConfirmOrder [Hash = 627101055, id=1689263782213324800, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:05, updateTime=2023-08-09 21:14:05, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:05.341 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868338314dw  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:05.342 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868338314dw  [0;39m ==> Parameters: 1689263782213324800(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:05.34(Timestamp), 2023-08-09 21:14:05.34(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:05.372 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868338314dw  [0;39m <==    Updates: 1
2023-08-09 21:14:05.372 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868338314dw  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:05.373 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868338314dw  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:05.373 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868338314dw  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@7617d0fa
2023-08-09 21:14:05.374 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868338314dw  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:05.375 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868338314dw  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:05.388 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m16915868338314dw  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:05.389 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m16915868338314dw  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 15, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:05.389 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868338314dw  [0;39m <==      Total: 1
2023-08-09 21:14:05.390 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868338314dw  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:05.390 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m16915868338314dw  [0;39m 查出余票记录:DailyTrainTicket [Hash = 1046783225, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=15, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:05.390 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m16915868338314dw  [0;39m 本次购票没有选座
2023-08-09 21:14:05.390 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868338314dw  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:05.390 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868338314dw  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@48c973a4
2023-08-09 21:14:05.391 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868338314dw  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:14:05.391 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868338314dw  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:14:05.404 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m16915868338314dw  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:14:05.404 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m16915868338314dw  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:14:05.405 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868338314dw  [0;39m <==      Total: 1
2023-08-09 21:14:05.405 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868338314dw  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:05.405 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m16915868338314dw  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:14:05.405 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m16915868338314dw  [0;39m 从车厢2选座
2023-08-09 21:14:05.405 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868338314dw  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:05.405 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868338314dw  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@79ec3796
2023-08-09 21:14:05.406 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868338314dw  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:14:05.407 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868338314dw  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:14:05.425 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:14:05.425 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:14:05.426 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:14:05.427 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:14:05.427 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:14:05.427 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:14:05.428 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:14:05.428 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 01, 2023-08-08 22:00:35.282, 2023-08-09 21:13:59.639
2023-08-09 21:14:05.429 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 01, 2023-08-08 22:00:35.307, 2023-08-09 21:14:00.821
2023-08-09 21:14:05.429 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 01, 2023-08-08 22:00:35.334, 2023-08-09 21:14:02.395
2023-08-09 21:14:05.429 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 01, 2023-08-08 22:00:35.360, 2023-08-09 21:14:04.261
2023-08-09 21:14:05.430 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 00, 2023-08-08 22:00:35.437, 2023-08-08 22:00:35.437
2023-08-09 21:14:05.430 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 00, 2023-08-08 22:00:35.468, 2023-08-08 22:00:35.468
2023-08-09 21:14:05.430 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 00, 2023-08-08 22:00:35.495, 2023-08-08 22:00:35.495
2023-08-09 21:14:05.431 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 00, 2023-08-08 22:00:35.522, 2023-08-08 22:00:35.522
2023-08-09 21:14:05.431 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 00, 2023-08-08 22:00:35.550, 2023-08-08 22:00:35.550
2023-08-09 21:14:05.432 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 00, 2023-08-08 22:00:35.583, 2023-08-08 22:00:35.583
2023-08-09 21:14:05.432 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 00, 2023-08-08 22:00:35.610, 2023-08-08 22:00:35.610
2023-08-09 21:14:05.432 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 00, 2023-08-08 22:00:35.636, 2023-08-08 22:00:35.636
2023-08-09 21:14:05.433 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:14:05.434 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:14:05.434 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:14:05.435 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:14:05.435 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:14:05.436 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:14:05.436 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868338314dw  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:14:05.436 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868338314dw  [0;39m <==      Total: 25
2023-08-09 21:14:05.437 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868338314dw  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:05.437 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m16915868338314dw  [0;39m 车厢2的座位数:25
2023-08-09 21:14:05.437 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338314dw  [0;39m 无选座
2023-08-09 21:14:05.438 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338314dw  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:05.438 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338314dw  [0;39m 无选座
2023-08-09 21:14:05.438 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338314dw  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:05.438 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338314dw  [0;39m 无选座
2023-08-09 21:14:05.438 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338314dw  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:05.438 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338314dw  [0;39m 无选座
2023-08-09 21:14:05.439 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338314dw  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:05.439 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338314dw  [0;39m 无选座
2023-08-09 21:14:05.439 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338314dw  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:05.439 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338314dw  [0;39m 无选座
2023-08-09 21:14:05.439 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338314dw  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:05.439 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338314dw  [0;39m 无选座
2023-08-09 21:14:05.439 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338314dw  [0;39m 座位7在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:05.439 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338314dw  [0;39m 无选座
2023-08-09 21:14:05.439 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338314dw  [0;39m 座位8在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:05.439 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338314dw  [0;39m 无选座
2023-08-09 21:14:05.439 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338314dw  [0;39m 座位9在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:05.439 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338314dw  [0;39m 无选座
2023-08-09 21:14:05.440 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868338314dw  [0;39m 座位10在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:05.440 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868338314dw  [0;39m 无选座
2023-08-09 21:14:05.440 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m16915868338314dw  [0;39m 座位11在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:14:05.440 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m16915868338314dw  [0;39m 座位11被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:14:05.440 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m16915868338314dw  [0;39m 选中座位
2023-08-09 21:14:05.440 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m16915868338314dw  [0;39m 最终选座:[DailyTrainSeat [Hash = 1642269839, id=1688913096862732288, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=03, col=A, seatType=2, carriageSeatIndex=11, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:14:05.463 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m16915868338314dw  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918140]
2023-08-09 21:14:05.463 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m16915868338314dw  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918140
2023-08-09 21:14:05.463 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868338314dw  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:05.463 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868338314dw  [0;39m 参数值: DailyTrainSeat [Hash = 1848607030, id=1688913096862732288, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:14:05 CST 2023]
2023-08-09 21:14:05.464 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868338314dw  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:14:05.464 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868338314dw  [0;39m ==> Parameters: 01(String), 2023-08-09 21:14:05.463(Timestamp), 1688913096862732288(Long)
2023-08-09 21:14:05.631 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868338314dw  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918140, branchId:7854700236664918142, lockKeys:daily_train_seat:1688913096862732288
2023-08-09 21:14:05.679 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868338314dw  [0;39m <==    Updates: 1
2023-08-09 21:14:05.679 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868338314dw  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:05.680 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m16915868338314dw  [0;39m 影响出发站区间:0-1
2023-08-09 21:14:05.680 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m16915868338314dw  [0;39m 影响到达站区间:0-2
2023-08-09 21:14:05.681 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868338314dw  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:14:05.681 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868338314dw  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:14:05.868 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868338314dw  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918140, branchId:7854700236664918144, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:05.888 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918128', branchId=7854700236664918130, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:05.888 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918128 7854700236664918130 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:05.888 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:05.903 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868338314dw  [0;39m <==    Updates: 3
2023-08-09 21:14:05.903 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918128', branchId=7854700236664918132, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:05.904 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918128 7854700236664918132 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:05.904 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:05.933 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918128', branchId=7854700236664918138, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:05.934 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918128 7854700236664918138 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:05.934 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:06.150 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m16915868338314dw  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:06.151 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868338314dw  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:06.151 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868338314dw  [0;39m 参数值: ConfirmOrder [Hash = 2098022846, id=1689263782213324800, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:06 CST 2023, tickets=null]
2023-08-09 21:14:06.151 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868338314dw  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:06.152 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868338314dw  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:06.151(Timestamp), 1689263782213324800(Long)
2023-08-09 21:14:06.314 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868338314dw  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918140, branchId:7854700236664918150, lockKeys:confirm_order:1689263782213324800
2023-08-09 21:14:06.354 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868338314dw  [0;39m <==    Updates: 1
2023-08-09 21:14:06.354 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868338314dw  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:06.355 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m16915868338314dw  [0;39m transaction 192.168.0.102:8091:7854700236664918140 will be commit
2023-08-09 21:14:06.408 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m16915868338314dw  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918140
2023-08-09 21:14:06.409 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m16915868338314dw  [0;39m [192.168.0.102:8091:7854700236664918140] commit status: Committed
2023-08-09 21:14:06.409 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m16915868338314dw  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:06.439 INFO  com.jktickets.aspect.LogAspect                    :94   [32m16915868338314dw  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:06.440 INFO  com.jktickets.aspect.LogAspect                    :95   [32m16915868338314dw  [0;39m ------------- 结束 耗时：12606 ms -------------
2023-08-09 21:14:06.454 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m16915868337676jr  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:06.455 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868337676jr  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:06.455 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868337676jr  [0;39m 参数值: ConfirmOrder [Hash = 976740379, id=1689263786885779456, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:06, updateTime=2023-08-09 21:14:06, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:06.456 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868337676jr  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:06.456 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868337676jr  [0;39m ==> Parameters: 1689263786885779456(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:06.454(Timestamp), 2023-08-09 21:14:06.454(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:06.483 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868337676jr  [0;39m <==    Updates: 1
2023-08-09 21:14:06.484 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868337676jr  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:06.484 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868337676jr  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:06.484 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868337676jr  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@425b51af
2023-08-09 21:14:06.485 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868337676jr  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:06.486 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868337676jr  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:06.500 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m16915868337676jr  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:06.501 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m16915868337676jr  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 14, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:06.502 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868337676jr  [0;39m <==      Total: 1
2023-08-09 21:14:06.502 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868337676jr  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:06.502 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m16915868337676jr  [0;39m 查出余票记录:DailyTrainTicket [Hash = 692696766, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=14, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:06.503 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m16915868337676jr  [0;39m 本次购票没有选座
2023-08-09 21:14:06.503 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868337676jr  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:06.503 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868337676jr  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@4111bf69
2023-08-09 21:14:06.504 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868337676jr  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:14:06.504 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868337676jr  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:14:06.518 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m16915868337676jr  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:14:06.519 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m16915868337676jr  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:14:06.519 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868337676jr  [0;39m <==      Total: 1
2023-08-09 21:14:06.519 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868337676jr  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:06.519 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m16915868337676jr  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:14:06.519 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m16915868337676jr  [0;39m 从车厢2选座
2023-08-09 21:14:06.520 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868337676jr  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:06.520 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868337676jr  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@2835e4d8
2023-08-09 21:14:06.521 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868337676jr  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:14:06.521 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868337676jr  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:14:06.534 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:14:06.534 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:14:06.535 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:14:06.536 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:14:06.536 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:14:06.536 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:14:06.537 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:14:06.537 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 01, 2023-08-08 22:00:35.282, 2023-08-09 21:13:59.639
2023-08-09 21:14:06.538 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 01, 2023-08-08 22:00:35.307, 2023-08-09 21:14:00.821
2023-08-09 21:14:06.538 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 01, 2023-08-08 22:00:35.334, 2023-08-09 21:14:02.395
2023-08-09 21:14:06.539 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 01, 2023-08-08 22:00:35.360, 2023-08-09 21:14:04.261
2023-08-09 21:14:06.539 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 01, 2023-08-08 22:00:35.437, 2023-08-09 21:14:05.463
2023-08-09 21:14:06.540 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 00, 2023-08-08 22:00:35.468, 2023-08-08 22:00:35.468
2023-08-09 21:14:06.540 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 00, 2023-08-08 22:00:35.495, 2023-08-08 22:00:35.495
2023-08-09 21:14:06.541 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 00, 2023-08-08 22:00:35.522, 2023-08-08 22:00:35.522
2023-08-09 21:14:06.541 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 00, 2023-08-08 22:00:35.550, 2023-08-08 22:00:35.550
2023-08-09 21:14:06.541 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 00, 2023-08-08 22:00:35.583, 2023-08-08 22:00:35.583
2023-08-09 21:14:06.542 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 00, 2023-08-08 22:00:35.610, 2023-08-08 22:00:35.610
2023-08-09 21:14:06.542 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 00, 2023-08-08 22:00:35.636, 2023-08-08 22:00:35.636
2023-08-09 21:14:06.543 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:14:06.543 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:14:06.544 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:14:06.544 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:14:06.544 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:14:06.545 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:14:06.545 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868337676jr  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:14:06.545 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868337676jr  [0;39m <==      Total: 25
2023-08-09 21:14:06.546 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868337676jr  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:06.546 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m16915868337676jr  [0;39m 车厢2的座位数:25
2023-08-09 21:14:06.546 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868337676jr  [0;39m 无选座
2023-08-09 21:14:06.546 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868337676jr  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:06.546 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868337676jr  [0;39m 无选座
2023-08-09 21:14:06.546 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868337676jr  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:06.546 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868337676jr  [0;39m 无选座
2023-08-09 21:14:06.547 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868337676jr  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:06.547 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868337676jr  [0;39m 无选座
2023-08-09 21:14:06.547 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868337676jr  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:06.547 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868337676jr  [0;39m 无选座
2023-08-09 21:14:06.547 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868337676jr  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:06.547 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868337676jr  [0;39m 无选座
2023-08-09 21:14:06.547 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868337676jr  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:06.547 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868337676jr  [0;39m 无选座
2023-08-09 21:14:06.547 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868337676jr  [0;39m 座位7在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:06.548 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868337676jr  [0;39m 无选座
2023-08-09 21:14:06.548 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868337676jr  [0;39m 座位8在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:06.548 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868337676jr  [0;39m 无选座
2023-08-09 21:14:06.548 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868337676jr  [0;39m 座位9在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:06.548 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868337676jr  [0;39m 无选座
2023-08-09 21:14:06.548 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868337676jr  [0;39m 座位10在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:06.548 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868337676jr  [0;39m 无选座
2023-08-09 21:14:06.548 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868337676jr  [0;39m 座位11在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:06.548 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868337676jr  [0;39m 无选座
2023-08-09 21:14:06.548 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m16915868337676jr  [0;39m 座位12在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:14:06.548 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m16915868337676jr  [0;39m 座位12被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:14:06.548 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m16915868337676jr  [0;39m 选中座位
2023-08-09 21:14:06.548 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m16915868337676jr  [0;39m 最终选座:[DailyTrainSeat [Hash = 741165, id=1688913096992755712, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=03, col=B, seatType=2, carriageSeatIndex=12, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:14:06.570 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m16915868337676jr  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918152]
2023-08-09 21:14:06.571 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m16915868337676jr  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918152
2023-08-09 21:14:06.571 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868337676jr  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:06.571 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868337676jr  [0;39m 参数值: DailyTrainSeat [Hash = 590477009, id=1688913096992755712, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:14:06 CST 2023]
2023-08-09 21:14:06.572 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868337676jr  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:14:06.572 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868337676jr  [0;39m ==> Parameters: 01(String), 2023-08-09 21:14:06.571(Timestamp), 1688913096992755712(Long)
2023-08-09 21:14:06.756 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868337676jr  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918152, branchId:7854700236664918154, lockKeys:daily_train_seat:1688913096992755712
2023-08-09 21:14:06.799 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868337676jr  [0;39m <==    Updates: 1
2023-08-09 21:14:06.800 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868337676jr  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:06.800 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m16915868337676jr  [0;39m 影响出发站区间:0-1
2023-08-09 21:14:06.800 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m16915868337676jr  [0;39m 影响到达站区间:0-2
2023-08-09 21:14:06.801 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868337676jr  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:14:06.801 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868337676jr  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:14:06.890 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918140', branchId=7854700236664918142, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:06.890 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918140 7854700236664918142 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:06.890 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:06.904 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918140', branchId=7854700236664918144, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:06.904 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918140 7854700236664918144 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:06.904 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:06.938 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918140', branchId=7854700236664918150, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:06.938 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918140 7854700236664918150 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:06.938 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:07.020 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868337676jr  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918152, branchId:7854700236664918157, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:07.057 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868337676jr  [0;39m <==    Updates: 3
2023-08-09 21:14:07.298 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m16915868337676jr  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:07.299 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868337676jr  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:07.299 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868337676jr  [0;39m 参数值: ConfirmOrder [Hash = 2010767981, id=1689263786885779456, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:07 CST 2023, tickets=null]
2023-08-09 21:14:07.299 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868337676jr  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:07.300 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868337676jr  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:07.299(Timestamp), 1689263786885779456(Long)
2023-08-09 21:14:07.499 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868337676jr  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918152, branchId:7854700236664918162, lockKeys:confirm_order:1689263786885779456
2023-08-09 21:14:07.540 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868337676jr  [0;39m <==    Updates: 1
2023-08-09 21:14:07.540 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868337676jr  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:07.540 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m16915868337676jr  [0;39m transaction 192.168.0.102:8091:7854700236664918152 will be commit
2023-08-09 21:14:07.611 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m16915868337676jr  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918152
2023-08-09 21:14:07.612 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m16915868337676jr  [0;39m [192.168.0.102:8091:7854700236664918152] commit status: Committed
2023-08-09 21:14:07.612 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m16915868337676jr  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:07.634 INFO  com.jktickets.aspect.LogAspect                    :94   [32m16915868337676jr  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:07.635 INFO  com.jktickets.aspect.LogAspect                    :95   [32m16915868337676jr  [0;39m ------------- 结束 耗时：13866 ms -------------
2023-08-09 21:14:07.645 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586833702rlf  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:07.645 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833702rlf  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:07.646 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833702rlf  [0;39m 参数值: ConfirmOrder [Hash = 2139424357, id=1689263791881195520, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:07, updateTime=2023-08-09 21:14:07, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:07.646 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586833702rlf  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:07.647 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586833702rlf  [0;39m ==> Parameters: 1689263791881195520(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:07.645(Timestamp), 2023-08-09 21:14:07.645(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:07.682 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586833702rlf  [0;39m <==    Updates: 1
2023-08-09 21:14:07.683 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833702rlf  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:07.683 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833702rlf  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:07.683 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833702rlf  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@728766f
2023-08-09 21:14:07.684 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586833702rlf  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:07.685 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586833702rlf  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:07.699 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586833702rlf  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:07.700 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 13, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:07.700 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586833702rlf  [0;39m <==      Total: 1
2023-08-09 21:14:07.700 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833702rlf  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:07.700 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586833702rlf  [0;39m 查出余票记录:DailyTrainTicket [Hash = 974292749, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=13, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:07.701 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m1691586833702rlf  [0;39m 本次购票没有选座
2023-08-09 21:14:07.701 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833702rlf  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:07.701 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833702rlf  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@58f32072
2023-08-09 21:14:07.702 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586833702rlf  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:14:07.702 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586833702rlf  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:14:07.715 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586833702rlf  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:14:07.716 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:14:07.716 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586833702rlf  [0;39m <==      Total: 1
2023-08-09 21:14:07.716 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833702rlf  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:07.716 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m1691586833702rlf  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:14:07.716 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m1691586833702rlf  [0;39m 从车厢2选座
2023-08-09 21:14:07.717 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833702rlf  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:07.717 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833702rlf  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@693d9b22
2023-08-09 21:14:07.718 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586833702rlf  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:14:07.718 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586833702rlf  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:14:07.731 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:14:07.732 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:14:07.732 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:14:07.733 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:14:07.734 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:14:07.734 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:14:07.734 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:14:07.734 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 01, 2023-08-08 22:00:35.282, 2023-08-09 21:13:59.639
2023-08-09 21:14:07.735 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 01, 2023-08-08 22:00:35.307, 2023-08-09 21:14:00.821
2023-08-09 21:14:07.736 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 01, 2023-08-08 22:00:35.334, 2023-08-09 21:14:02.395
2023-08-09 21:14:07.736 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 01, 2023-08-08 22:00:35.360, 2023-08-09 21:14:04.261
2023-08-09 21:14:07.736 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 01, 2023-08-08 22:00:35.437, 2023-08-09 21:14:05.463
2023-08-09 21:14:07.737 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 01, 2023-08-08 22:00:35.468, 2023-08-09 21:14:06.571
2023-08-09 21:14:07.737 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 00, 2023-08-08 22:00:35.495, 2023-08-08 22:00:35.495
2023-08-09 21:14:07.738 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 00, 2023-08-08 22:00:35.522, 2023-08-08 22:00:35.522
2023-08-09 21:14:07.738 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 00, 2023-08-08 22:00:35.550, 2023-08-08 22:00:35.550
2023-08-09 21:14:07.739 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 00, 2023-08-08 22:00:35.583, 2023-08-08 22:00:35.583
2023-08-09 21:14:07.739 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 00, 2023-08-08 22:00:35.610, 2023-08-08 22:00:35.610
2023-08-09 21:14:07.739 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 00, 2023-08-08 22:00:35.636, 2023-08-08 22:00:35.636
2023-08-09 21:14:07.740 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:14:07.740 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:14:07.741 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:14:07.741 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:14:07.741 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:14:07.742 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:14:07.743 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833702rlf  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:14:07.743 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586833702rlf  [0;39m <==      Total: 25
2023-08-09 21:14:07.743 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833702rlf  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:07.743 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m1691586833702rlf  [0;39m 车厢2的座位数:25
2023-08-09 21:14:07.743 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833702rlf  [0;39m 无选座
2023-08-09 21:14:07.743 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833702rlf  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:07.743 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833702rlf  [0;39m 无选座
2023-08-09 21:14:07.744 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833702rlf  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:07.744 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833702rlf  [0;39m 无选座
2023-08-09 21:14:07.744 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833702rlf  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:07.744 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833702rlf  [0;39m 无选座
2023-08-09 21:14:07.744 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833702rlf  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:07.744 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833702rlf  [0;39m 无选座
2023-08-09 21:14:07.744 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833702rlf  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:07.744 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833702rlf  [0;39m 无选座
2023-08-09 21:14:07.744 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833702rlf  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:07.744 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833702rlf  [0;39m 无选座
2023-08-09 21:14:07.744 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833702rlf  [0;39m 座位7在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:07.744 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833702rlf  [0;39m 无选座
2023-08-09 21:14:07.745 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833702rlf  [0;39m 座位8在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:07.745 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833702rlf  [0;39m 无选座
2023-08-09 21:14:07.745 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833702rlf  [0;39m 座位9在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:07.745 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833702rlf  [0;39m 无选座
2023-08-09 21:14:07.745 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833702rlf  [0;39m 座位10在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:07.745 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833702rlf  [0;39m 无选座
2023-08-09 21:14:07.745 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833702rlf  [0;39m 座位11在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:07.745 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833702rlf  [0;39m 无选座
2023-08-09 21:14:07.745 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833702rlf  [0;39m 座位12在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:07.745 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833702rlf  [0;39m 无选座
2023-08-09 21:14:07.746 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m1691586833702rlf  [0;39m 座位13在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:14:07.746 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m1691586833702rlf  [0;39m 座位13被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:14:07.746 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m1691586833702rlf  [0;39m 选中座位
2023-08-09 21:14:07.746 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m1691586833702rlf  [0;39m 最终选座:[DailyTrainSeat [Hash = 109579218, id=1688913097106001920, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=03, col=C, seatType=2, carriageSeatIndex=13, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:14:07.765 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m1691586833702rlf  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918164]
2023-08-09 21:14:07.766 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m1691586833702rlf  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918164
2023-08-09 21:14:07.766 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833702rlf  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:07.766 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833702rlf  [0;39m 参数值: DailyTrainSeat [Hash = 2133656024, id=1688913097106001920, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:14:07 CST 2023]
2023-08-09 21:14:07.767 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586833702rlf  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:14:07.768 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586833702rlf  [0;39m ==> Parameters: 01(String), 2023-08-09 21:14:07.766(Timestamp), 1688913097106001920(Long)
2023-08-09 21:14:07.884 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918152', branchId=7854700236664918154, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:07.884 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918152 7854700236664918154 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:07.885 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:07.905 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918152', branchId=7854700236664918157, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:07.905 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918152 7854700236664918157 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:07.906 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:07.950 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918152', branchId=7854700236664918162, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:07.950 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586833702rlf  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918164, branchId:7854700236664918166, lockKeys:daily_train_seat:1688913097106001920
2023-08-09 21:14:07.951 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918152 7854700236664918162 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:07.951 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:08.011 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586833702rlf  [0;39m <==    Updates: 1
2023-08-09 21:14:08.012 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833702rlf  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:08.012 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m1691586833702rlf  [0;39m 影响出发站区间:0-1
2023-08-09 21:14:08.012 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m1691586833702rlf  [0;39m 影响到达站区间:0-2
2023-08-09 21:14:08.013 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586833702rlf  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:14:08.014 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586833702rlf  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:14:08.278 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586833702rlf  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918164, branchId:7854700236664918170, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:08.315 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586833702rlf  [0;39m <==    Updates: 3
2023-08-09 21:14:08.570 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m1691586833702rlf  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:08.570 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833702rlf  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:08.571 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833702rlf  [0;39m 参数值: ConfirmOrder [Hash = 1694622850, id=1689263791881195520, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:08 CST 2023, tickets=null]
2023-08-09 21:14:08.571 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586833702rlf  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:08.572 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586833702rlf  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:08.57(Timestamp), 1689263791881195520(Long)
2023-08-09 21:14:08.766 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586833702rlf  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918164, branchId:7854700236664918174, lockKeys:confirm_order:1689263791881195520
2023-08-09 21:14:08.805 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586833702rlf  [0;39m <==    Updates: 1
2023-08-09 21:14:08.806 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833702rlf  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:08.806 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m1691586833702rlf  [0;39m transaction 192.168.0.102:8091:7854700236664918164 will be commit
2023-08-09 21:14:08.878 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m1691586833702rlf  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918164
2023-08-09 21:14:08.879 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m1691586833702rlf  [0;39m [192.168.0.102:8091:7854700236664918164] commit status: Committed
2023-08-09 21:14:08.879 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586833702rlf  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:08.904 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586833702rlf  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:08.904 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586833702rlf  [0;39m ------------- 结束 耗时：15196 ms -------------
2023-08-09 21:14:08.917 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586833681cij  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:08.917 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833681cij  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:08.917 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833681cij  [0;39m 参数值: ConfirmOrder [Hash = 889834594, id=1689263797216350208, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:08, updateTime=2023-08-09 21:14:08, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:08.918 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586833681cij  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:08.918 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586833681cij  [0;39m ==> Parameters: 1689263797216350208(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:08.917(Timestamp), 2023-08-09 21:14:08.917(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:08.954 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586833681cij  [0;39m <==    Updates: 1
2023-08-09 21:14:08.954 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833681cij  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:08.955 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833681cij  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:08.955 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833681cij  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@64681783
2023-08-09 21:14:08.956 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586833681cij  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:08.956 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586833681cij  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:08.969 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586833681cij  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:08.970 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586833681cij  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 12, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:08.971 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586833681cij  [0;39m <==      Total: 1
2023-08-09 21:14:08.971 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833681cij  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:08.971 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586833681cij  [0;39m 查出余票记录:DailyTrainTicket [Hash = 258394984, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=12, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:08.971 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m1691586833681cij  [0;39m 本次购票没有选座
2023-08-09 21:14:08.972 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833681cij  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:08.972 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833681cij  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@44564c44
2023-08-09 21:14:08.972 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586833681cij  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:14:08.973 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586833681cij  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:14:08.985 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586833681cij  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:14:08.987 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586833681cij  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:14:08.987 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586833681cij  [0;39m <==      Total: 1
2023-08-09 21:14:08.988 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833681cij  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:08.988 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m1691586833681cij  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:14:08.988 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m1691586833681cij  [0;39m 从车厢2选座
2023-08-09 21:14:08.989 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833681cij  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:08.989 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833681cij  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@2f84dd3d
2023-08-09 21:14:08.990 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586833681cij  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:14:08.990 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586833681cij  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:14:09.004 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:14:09.004 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:14:09.005 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:14:09.005 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:14:09.006 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:14:09.006 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:14:09.006 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:14:09.007 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 01, 2023-08-08 22:00:35.282, 2023-08-09 21:13:59.639
2023-08-09 21:14:09.007 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 01, 2023-08-08 22:00:35.307, 2023-08-09 21:14:00.821
2023-08-09 21:14:09.008 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 01, 2023-08-08 22:00:35.334, 2023-08-09 21:14:02.395
2023-08-09 21:14:09.008 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 01, 2023-08-08 22:00:35.360, 2023-08-09 21:14:04.261
2023-08-09 21:14:09.008 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 01, 2023-08-08 22:00:35.437, 2023-08-09 21:14:05.463
2023-08-09 21:14:09.009 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 01, 2023-08-08 22:00:35.468, 2023-08-09 21:14:06.571
2023-08-09 21:14:09.010 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 01, 2023-08-08 22:00:35.495, 2023-08-09 21:14:07.766
2023-08-09 21:14:09.010 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 00, 2023-08-08 22:00:35.522, 2023-08-08 22:00:35.522
2023-08-09 21:14:09.011 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 00, 2023-08-08 22:00:35.550, 2023-08-08 22:00:35.550
2023-08-09 21:14:09.011 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 00, 2023-08-08 22:00:35.583, 2023-08-08 22:00:35.583
2023-08-09 21:14:09.012 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 00, 2023-08-08 22:00:35.610, 2023-08-08 22:00:35.610
2023-08-09 21:14:09.012 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 00, 2023-08-08 22:00:35.636, 2023-08-08 22:00:35.636
2023-08-09 21:14:09.013 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:14:09.013 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:14:09.014 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:14:09.014 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:14:09.015 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:14:09.016 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:14:09.016 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681cij  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:14:09.016 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586833681cij  [0;39m <==      Total: 25
2023-08-09 21:14:09.017 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833681cij  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:09.017 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m1691586833681cij  [0;39m 车厢2的座位数:25
2023-08-09 21:14:09.017 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681cij  [0;39m 无选座
2023-08-09 21:14:09.017 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681cij  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:09.017 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681cij  [0;39m 无选座
2023-08-09 21:14:09.017 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681cij  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:09.017 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681cij  [0;39m 无选座
2023-08-09 21:14:09.018 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681cij  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:09.018 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681cij  [0;39m 无选座
2023-08-09 21:14:09.018 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681cij  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:09.018 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681cij  [0;39m 无选座
2023-08-09 21:14:09.018 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681cij  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:09.018 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681cij  [0;39m 无选座
2023-08-09 21:14:09.018 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681cij  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:09.019 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681cij  [0;39m 无选座
2023-08-09 21:14:09.019 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681cij  [0;39m 座位7在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:09.019 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681cij  [0;39m 无选座
2023-08-09 21:14:09.019 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681cij  [0;39m 座位8在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:09.019 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681cij  [0;39m 无选座
2023-08-09 21:14:09.019 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681cij  [0;39m 座位9在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:09.019 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681cij  [0;39m 无选座
2023-08-09 21:14:09.019 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681cij  [0;39m 座位10在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:09.019 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681cij  [0;39m 无选座
2023-08-09 21:14:09.020 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681cij  [0;39m 座位11在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:09.020 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681cij  [0;39m 无选座
2023-08-09 21:14:09.020 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681cij  [0;39m 座位12在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:09.020 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681cij  [0;39m 无选座
2023-08-09 21:14:09.020 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681cij  [0;39m 座位13在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:09.020 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681cij  [0;39m 无选座
2023-08-09 21:14:09.020 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m1691586833681cij  [0;39m 座位14在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:14:09.020 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m1691586833681cij  [0;39m 座位14被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:14:09.020 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m1691586833681cij  [0;39m 选中座位
2023-08-09 21:14:09.021 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m1691586833681cij  [0;39m 最终选座:[DailyTrainSeat [Hash = 1614947526, id=1688913097219248128, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=03, col=D, seatType=2, carriageSeatIndex=14, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:14:09.045 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m1691586833681cij  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918177]
2023-08-09 21:14:09.046 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m1691586833681cij  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918177
2023-08-09 21:14:09.046 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833681cij  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:09.046 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833681cij  [0;39m 参数值: DailyTrainSeat [Hash = 877325075, id=1688913097219248128, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:14:09 CST 2023]
2023-08-09 21:14:09.047 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586833681cij  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:14:09.047 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586833681cij  [0;39m ==> Parameters: 01(String), 2023-08-09 21:14:09.046(Timestamp), 1688913097219248128(Long)
2023-08-09 21:14:09.235 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586833681cij  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918177, branchId:7854700236664918179, lockKeys:daily_train_seat:1688913097219248128
2023-08-09 21:14:09.289 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586833681cij  [0;39m <==    Updates: 1
2023-08-09 21:14:09.289 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833681cij  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:09.289 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m1691586833681cij  [0;39m 影响出发站区间:0-1
2023-08-09 21:14:09.289 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m1691586833681cij  [0;39m 影响到达站区间:0-2
2023-08-09 21:14:09.290 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586833681cij  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:14:09.290 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586833681cij  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:14:09.515 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586833681cij  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918177, branchId:7854700236664918181, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:09.554 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586833681cij  [0;39m <==    Updates: 3
2023-08-09 21:14:09.810 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m1691586833681cij  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:09.810 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833681cij  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:09.810 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833681cij  [0;39m 参数值: ConfirmOrder [Hash = 994967117, id=1689263797216350208, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:09 CST 2023, tickets=null]
2023-08-09 21:14:09.811 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586833681cij  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:09.812 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586833681cij  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:09.81(Timestamp), 1689263797216350208(Long)
2023-08-09 21:14:09.877 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918164', branchId=7854700236664918166, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:09.877 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918164 7854700236664918166 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:09.877 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:09.895 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918164', branchId=7854700236664918170, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:09.896 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918164 7854700236664918170 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:09.896 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:09.949 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918164', branchId=7854700236664918174, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:09.949 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918164 7854700236664918174 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:09.949 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:09.984 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586833681cij  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918177, branchId:7854700236664918187, lockKeys:confirm_order:1689263797216350208
2023-08-09 21:14:10.022 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586833681cij  [0;39m <==    Updates: 1
2023-08-09 21:14:10.023 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833681cij  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:10.025 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m1691586833681cij  [0;39m transaction 192.168.0.102:8091:7854700236664918177 will be commit
2023-08-09 21:14:10.090 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m1691586833681cij  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918177
2023-08-09 21:14:10.090 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m1691586833681cij  [0;39m [192.168.0.102:8091:7854700236664918177] commit status: Committed
2023-08-09 21:14:10.090 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586833681cij  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:10.113 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586833681cij  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:10.113 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586833681cij  [0;39m ------------- 结束 耗时：16428 ms -------------
2023-08-09 21:14:10.125 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m169158683368179t  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:10.126 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158683368179t  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:10.126 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158683368179t  [0;39m 参数值: ConfirmOrder [Hash = 942704222, id=1689263802283069440, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:10, updateTime=2023-08-09 21:14:10, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:10.127 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m169158683368179t  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:10.128 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m169158683368179t  [0;39m ==> Parameters: 1689263802283069440(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:10.125(Timestamp), 2023-08-09 21:14:10.125(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:10.156 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m169158683368179t  [0;39m <==    Updates: 1
2023-08-09 21:14:10.157 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158683368179t  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:10.158 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158683368179t  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:10.158 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158683368179t  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@4037dc3a
2023-08-09 21:14:10.160 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m169158683368179t  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:10.161 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m169158683368179t  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:10.174 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m169158683368179t  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:10.175 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m169158683368179t  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 11, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:10.176 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m169158683368179t  [0;39m <==      Total: 1
2023-08-09 21:14:10.177 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158683368179t  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:10.177 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m169158683368179t  [0;39m 查出余票记录:DailyTrainTicket [Hash = 2069205110, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=11, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:10.178 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m169158683368179t  [0;39m 本次购票没有选座
2023-08-09 21:14:10.178 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158683368179t  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:10.179 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158683368179t  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@259b7855
2023-08-09 21:14:10.180 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m169158683368179t  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:14:10.181 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m169158683368179t  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:14:10.194 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m169158683368179t  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:14:10.195 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m169158683368179t  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:14:10.196 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m169158683368179t  [0;39m <==      Total: 1
2023-08-09 21:14:10.196 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158683368179t  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:10.197 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m169158683368179t  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:14:10.197 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m169158683368179t  [0;39m 从车厢2选座
2023-08-09 21:14:10.197 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158683368179t  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:10.198 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158683368179t  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@43a5d7e1
2023-08-09 21:14:10.199 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m169158683368179t  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:14:10.200 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m169158683368179t  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:14:10.216 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:14:10.218 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:14:10.219 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:14:10.222 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:14:10.224 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:14:10.226 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:14:10.228 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:14:10.231 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 01, 2023-08-08 22:00:35.282, 2023-08-09 21:13:59.639
2023-08-09 21:14:10.233 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 01, 2023-08-08 22:00:35.307, 2023-08-09 21:14:00.821
2023-08-09 21:14:10.236 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 01, 2023-08-08 22:00:35.334, 2023-08-09 21:14:02.395
2023-08-09 21:14:10.239 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 01, 2023-08-08 22:00:35.360, 2023-08-09 21:14:04.261
2023-08-09 21:14:10.241 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 01, 2023-08-08 22:00:35.437, 2023-08-09 21:14:05.463
2023-08-09 21:14:10.242 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 01, 2023-08-08 22:00:35.468, 2023-08-09 21:14:06.571
2023-08-09 21:14:10.243 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 01, 2023-08-08 22:00:35.495, 2023-08-09 21:14:07.766
2023-08-09 21:14:10.245 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 01, 2023-08-08 22:00:35.522, 2023-08-09 21:14:09.046
2023-08-09 21:14:10.245 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 00, 2023-08-08 22:00:35.550, 2023-08-08 22:00:35.550
2023-08-09 21:14:10.246 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 00, 2023-08-08 22:00:35.583, 2023-08-08 22:00:35.583
2023-08-09 21:14:10.246 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 00, 2023-08-08 22:00:35.610, 2023-08-08 22:00:35.610
2023-08-09 21:14:10.247 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 00, 2023-08-08 22:00:35.636, 2023-08-08 22:00:35.636
2023-08-09 21:14:10.248 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:14:10.248 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:14:10.249 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:14:10.249 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:14:10.250 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:14:10.251 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:14:10.252 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158683368179t  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:14:10.253 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m169158683368179t  [0;39m <==      Total: 25
2023-08-09 21:14:10.253 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158683368179t  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:10.254 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m169158683368179t  [0;39m 车厢2的座位数:25
2023-08-09 21:14:10.254 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683368179t  [0;39m 无选座
2023-08-09 21:14:10.254 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158683368179t  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:10.254 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683368179t  [0;39m 无选座
2023-08-09 21:14:10.254 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158683368179t  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:10.254 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683368179t  [0;39m 无选座
2023-08-09 21:14:10.255 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158683368179t  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:10.255 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683368179t  [0;39m 无选座
2023-08-09 21:14:10.255 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158683368179t  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:10.255 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683368179t  [0;39m 无选座
2023-08-09 21:14:10.255 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158683368179t  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:10.255 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683368179t  [0;39m 无选座
2023-08-09 21:14:10.255 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158683368179t  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:10.255 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683368179t  [0;39m 无选座
2023-08-09 21:14:10.256 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158683368179t  [0;39m 座位7在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:10.256 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683368179t  [0;39m 无选座
2023-08-09 21:14:10.256 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158683368179t  [0;39m 座位8在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:10.256 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683368179t  [0;39m 无选座
2023-08-09 21:14:10.256 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158683368179t  [0;39m 座位9在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:10.256 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683368179t  [0;39m 无选座
2023-08-09 21:14:10.256 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158683368179t  [0;39m 座位10在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:10.256 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683368179t  [0;39m 无选座
2023-08-09 21:14:10.257 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158683368179t  [0;39m 座位11在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:10.257 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683368179t  [0;39m 无选座
2023-08-09 21:14:10.257 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158683368179t  [0;39m 座位12在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:10.258 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683368179t  [0;39m 无选座
2023-08-09 21:14:10.258 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158683368179t  [0;39m 座位13在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:10.258 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683368179t  [0;39m 无选座
2023-08-09 21:14:10.258 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158683368179t  [0;39m 座位14在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:10.259 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158683368179t  [0;39m 无选座
2023-08-09 21:14:10.259 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m169158683368179t  [0;39m 座位15在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:14:10.259 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m169158683368179t  [0;39m 座位15被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:14:10.260 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m169158683368179t  [0;39m 选中座位
2023-08-09 21:14:10.260 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m169158683368179t  [0;39m 最终选座:[DailyTrainSeat [Hash = 1778623170, id=1688913097336688640, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=03, col=F, seatType=2, carriageSeatIndex=15, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:14:10.278 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m169158683368179t  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918189]
2023-08-09 21:14:10.278 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m169158683368179t  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918189
2023-08-09 21:14:10.278 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158683368179t  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:10.278 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158683368179t  [0;39m 参数值: DailyTrainSeat [Hash = 750783588, id=1688913097336688640, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:14:10 CST 2023]
2023-08-09 21:14:10.279 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m169158683368179t  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:14:10.279 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m169158683368179t  [0;39m ==> Parameters: 01(String), 2023-08-09 21:14:10.278(Timestamp), 1688913097336688640(Long)
2023-08-09 21:14:10.513 INFO  io.seata.rm.AbstractResourceManager               :73   [32m169158683368179t  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918189, branchId:7854700236664918191, lockKeys:daily_train_seat:1688913097336688640
2023-08-09 21:14:10.608 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m169158683368179t  [0;39m <==    Updates: 1
2023-08-09 21:14:10.609 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158683368179t  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:10.609 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m169158683368179t  [0;39m 影响出发站区间:0-1
2023-08-09 21:14:10.610 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m169158683368179t  [0;39m 影响到达站区间:0-2
2023-08-09 21:14:10.610 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m169158683368179t  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:14:10.611 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m169158683368179t  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:14:10.884 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918177', branchId=7854700236664918179, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:10.884 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918177 7854700236664918179 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:10.884 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:10.900 INFO  io.seata.rm.AbstractResourceManager               :73   [32m169158683368179t  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918189, branchId:7854700236664918193, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:10.903 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918177', branchId=7854700236664918181, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:10.903 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918177 7854700236664918181 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:10.903 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:10.932 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918177', branchId=7854700236664918187, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:10.932 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918177 7854700236664918187 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:10.932 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:10.938 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m169158683368179t  [0;39m <==    Updates: 3
2023-08-09 21:14:11.152 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m169158683368179t  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:11.153 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158683368179t  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:11.153 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158683368179t  [0;39m 参数值: ConfirmOrder [Hash = 1733009246, id=1689263802283069440, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:11 CST 2023, tickets=null]
2023-08-09 21:14:11.154 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m169158683368179t  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:11.155 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m169158683368179t  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:11.153(Timestamp), 1689263802283069440(Long)
2023-08-09 21:14:11.312 INFO  io.seata.rm.AbstractResourceManager               :73   [32m169158683368179t  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918189, branchId:7854700236664918199, lockKeys:confirm_order:1689263802283069440
2023-08-09 21:14:11.352 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m169158683368179t  [0;39m <==    Updates: 1
2023-08-09 21:14:11.354 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158683368179t  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:11.354 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m169158683368179t  [0;39m transaction 192.168.0.102:8091:7854700236664918189 will be commit
2023-08-09 21:14:11.414 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m169158683368179t  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918189
2023-08-09 21:14:11.414 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m169158683368179t  [0;39m [192.168.0.102:8091:7854700236664918189] commit status: Committed
2023-08-09 21:14:11.415 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m169158683368179t  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:11.449 INFO  com.jktickets.aspect.LogAspect                    :94   [32m169158683368179t  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:11.449 INFO  com.jktickets.aspect.LogAspect                    :95   [32m169158683368179t  [0;39m ------------- 结束 耗时：17766 ms -------------
2023-08-09 21:14:11.461 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586833681abr  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:11.462 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833681abr  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:11.462 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833681abr  [0;39m 参数值: ConfirmOrder [Hash = 64947493, id=1689263807890853888, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:11, updateTime=2023-08-09 21:14:11, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:11.463 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586833681abr  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:11.465 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586833681abr  [0;39m ==> Parameters: 1689263807890853888(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:11.461(Timestamp), 2023-08-09 21:14:11.461(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:11.494 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586833681abr  [0;39m <==    Updates: 1
2023-08-09 21:14:11.494 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833681abr  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:11.495 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833681abr  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:11.495 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833681abr  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@75db9f38
2023-08-09 21:14:11.496 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586833681abr  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:11.496 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586833681abr  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:11.517 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586833681abr  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:11.519 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586833681abr  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 10, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:11.522 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586833681abr  [0;39m <==      Total: 1
2023-08-09 21:14:11.522 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833681abr  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:11.522 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586833681abr  [0;39m 查出余票记录:DailyTrainTicket [Hash = 24529473, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=10, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:11.523 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m1691586833681abr  [0;39m 本次购票没有选座
2023-08-09 21:14:11.523 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833681abr  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:11.523 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833681abr  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@3e41e782
2023-08-09 21:14:11.524 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586833681abr  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:14:11.525 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586833681abr  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:14:11.538 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586833681abr  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:14:11.539 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586833681abr  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:14:11.543 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586833681abr  [0;39m <==      Total: 1
2023-08-09 21:14:11.544 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833681abr  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:11.545 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m1691586833681abr  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:14:11.545 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m1691586833681abr  [0;39m 从车厢2选座
2023-08-09 21:14:11.546 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833681abr  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:11.547 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833681abr  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@4a797c1c
2023-08-09 21:14:11.550 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586833681abr  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:14:11.551 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586833681abr  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:14:11.564 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:14:11.565 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:14:11.566 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:14:11.567 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:14:11.568 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:14:11.569 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:14:11.569 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:14:11.570 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 01, 2023-08-08 22:00:35.282, 2023-08-09 21:13:59.639
2023-08-09 21:14:11.571 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 01, 2023-08-08 22:00:35.307, 2023-08-09 21:14:00.821
2023-08-09 21:14:11.572 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 01, 2023-08-08 22:00:35.334, 2023-08-09 21:14:02.395
2023-08-09 21:14:11.573 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 01, 2023-08-08 22:00:35.360, 2023-08-09 21:14:04.261
2023-08-09 21:14:11.573 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 01, 2023-08-08 22:00:35.437, 2023-08-09 21:14:05.463
2023-08-09 21:14:11.574 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 01, 2023-08-08 22:00:35.468, 2023-08-09 21:14:06.571
2023-08-09 21:14:11.575 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 01, 2023-08-08 22:00:35.495, 2023-08-09 21:14:07.766
2023-08-09 21:14:11.576 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 01, 2023-08-08 22:00:35.522, 2023-08-09 21:14:09.046
2023-08-09 21:14:11.577 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 01, 2023-08-08 22:00:35.550, 2023-08-09 21:14:10.278
2023-08-09 21:14:11.577 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 00, 2023-08-08 22:00:35.583, 2023-08-08 22:00:35.583
2023-08-09 21:14:11.578 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 00, 2023-08-08 22:00:35.610, 2023-08-08 22:00:35.610
2023-08-09 21:14:11.579 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 00, 2023-08-08 22:00:35.636, 2023-08-08 22:00:35.636
2023-08-09 21:14:11.580 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:14:11.581 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:14:11.582 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:14:11.583 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:14:11.584 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:14:11.585 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:14:11.586 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586833681abr  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:14:11.586 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586833681abr  [0;39m <==      Total: 25
2023-08-09 21:14:11.587 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833681abr  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:11.587 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m1691586833681abr  [0;39m 车厢2的座位数:25
2023-08-09 21:14:11.587 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681abr  [0;39m 无选座
2023-08-09 21:14:11.588 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681abr  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:11.588 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681abr  [0;39m 无选座
2023-08-09 21:14:11.588 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681abr  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:11.588 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681abr  [0;39m 无选座
2023-08-09 21:14:11.588 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681abr  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:11.588 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681abr  [0;39m 无选座
2023-08-09 21:14:11.589 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681abr  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:11.589 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681abr  [0;39m 无选座
2023-08-09 21:14:11.589 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681abr  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:11.589 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681abr  [0;39m 无选座
2023-08-09 21:14:11.589 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681abr  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:11.590 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681abr  [0;39m 无选座
2023-08-09 21:14:11.590 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681abr  [0;39m 座位7在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:11.590 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681abr  [0;39m 无选座
2023-08-09 21:14:11.590 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681abr  [0;39m 座位8在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:11.590 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681abr  [0;39m 无选座
2023-08-09 21:14:11.590 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681abr  [0;39m 座位9在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:11.591 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681abr  [0;39m 无选座
2023-08-09 21:14:11.591 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681abr  [0;39m 座位10在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:11.591 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681abr  [0;39m 无选座
2023-08-09 21:14:11.591 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681abr  [0;39m 座位11在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:11.591 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681abr  [0;39m 无选座
2023-08-09 21:14:11.591 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681abr  [0;39m 座位12在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:11.591 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681abr  [0;39m 无选座
2023-08-09 21:14:11.592 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681abr  [0;39m 座位13在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:11.592 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681abr  [0;39m 无选座
2023-08-09 21:14:11.592 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681abr  [0;39m 座位14在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:11.592 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681abr  [0;39m 无选座
2023-08-09 21:14:11.592 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586833681abr  [0;39m 座位15在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:11.592 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586833681abr  [0;39m 无选座
2023-08-09 21:14:11.592 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m1691586833681abr  [0;39m 座位16在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:14:11.592 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m1691586833681abr  [0;39m 座位16被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:14:11.592 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m1691586833681abr  [0;39m 选中座位
2023-08-09 21:14:11.593 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m1691586833681abr  [0;39m 最终选座:[DailyTrainSeat [Hash = 704425196, id=1688913097475100672, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=04, col=A, seatType=2, carriageSeatIndex=16, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:14:11.609 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m1691586833681abr  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918201]
2023-08-09 21:14:11.609 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m1691586833681abr  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918201
2023-08-09 21:14:11.609 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833681abr  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:11.610 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833681abr  [0;39m 参数值: DailyTrainSeat [Hash = 306480239, id=1688913097475100672, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:14:11 CST 2023]
2023-08-09 21:14:11.611 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586833681abr  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:14:11.611 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586833681abr  [0;39m ==> Parameters: 01(String), 2023-08-09 21:14:11.609(Timestamp), 1688913097475100672(Long)
2023-08-09 21:14:11.770 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586833681abr  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918201, branchId:7854700236664918203, lockKeys:daily_train_seat:1688913097475100672
2023-08-09 21:14:11.807 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586833681abr  [0;39m <==    Updates: 1
2023-08-09 21:14:11.808 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833681abr  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:11.808 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m1691586833681abr  [0;39m 影响出发站区间:0-1
2023-08-09 21:14:11.808 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m1691586833681abr  [0;39m 影响到达站区间:0-2
2023-08-09 21:14:11.809 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586833681abr  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:14:11.810 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586833681abr  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:14:11.898 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918189', branchId=7854700236664918191, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:11.898 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918189 7854700236664918191 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:11.898 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:11.917 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918189', branchId=7854700236664918193, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:11.917 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918189 7854700236664918193 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:11.918 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:11.949 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918189', branchId=7854700236664918199, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:11.950 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918189 7854700236664918199 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:11.950 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:12.014 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586833681abr  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918201, branchId:7854700236664918207, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:12.066 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586833681abr  [0;39m <==    Updates: 3
2023-08-09 21:14:12.323 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m1691586833681abr  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:12.323 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586833681abr  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:12.323 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586833681abr  [0;39m 参数值: ConfirmOrder [Hash = 965647924, id=1689263807890853888, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:12 CST 2023, tickets=null]
2023-08-09 21:14:12.324 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586833681abr  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:12.324 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586833681abr  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:12.323(Timestamp), 1689263807890853888(Long)
2023-08-09 21:14:12.491 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586833681abr  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918201, branchId:7854700236664918211, lockKeys:confirm_order:1689263807890853888
2023-08-09 21:14:12.532 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586833681abr  [0;39m <==    Updates: 1
2023-08-09 21:14:12.533 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586833681abr  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:12.533 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m1691586833681abr  [0;39m transaction 192.168.0.102:8091:7854700236664918201 will be commit
2023-08-09 21:14:12.640 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m1691586833681abr  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918201
2023-08-09 21:14:12.640 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m1691586833681abr  [0;39m [192.168.0.102:8091:7854700236664918201] commit status: Committed
2023-08-09 21:14:12.641 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586833681abr  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:12.666 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586833681abr  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:12.667 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586833681abr  [0;39m ------------- 结束 耗时：18984 ms -------------
2023-08-09 21:14:12.887 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918201', branchId=7854700236664918203, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:12.887 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918201 7854700236664918203 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:12.887 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:12.907 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918201', branchId=7854700236664918207, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:12.907 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918201 7854700236664918207 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:12.907 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:12.959 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918201', branchId=7854700236664918211, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:12.959 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918201 7854700236664918211 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:12.959 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:30.358 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m16915868703587qp  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.359 INFO  com.jktickets.utils.JwtUtil                       :64   [32m16915868703587qp  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.360 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m16915868703587qp  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.363 INFO  com.jktickets.aspect.LogAspect                    :57   [32m16915868703587qp  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.364 INFO  com.jktickets.aspect.LogAspect                    :58   [32m16915868703587qp  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.364 INFO  com.jktickets.aspect.LogAspect                    :59   [32m16915868703587qp  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.364 INFO  com.jktickets.aspect.LogAspect                    :60   [32m16915868703587qp  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.364 INFO  com.jktickets.aspect.LogAspect                    :82   [32m16915868703587qp  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.379 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m16915868703587qp  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:30.386 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586870386zrw  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.387 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586870386zrw  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.387 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586870386zrw  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.389 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586870386zrw  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.389 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586870386zrw  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.389 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586870386zrw  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.389 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586870386zrw  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.390 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586870386zrw  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.390 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868703587qp  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:30.390 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868703587qp  [0;39m 参数值: ConfirmOrder [Hash = 509427967, id=1689263887276445696, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:30, updateTime=2023-08-09 21:14:30, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:30.408 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586870386zrw  [0;39m 很遗憾，没抢到锁
2023-08-09 21:14:30.407 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868703587qp  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:30.409 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586870386zrw  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:30.410 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868703587qp  [0;39m ==> Parameters: 1689263887276445696(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:30.38(Timestamp), 2023-08-09 21:14:30.38(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:30.419 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586870419wht  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.420 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586870419wht  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.420 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586870419wht  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.423 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586870419wht  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.423 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586870419wht  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.423 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586870419wht  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.423 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586870419wht  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.424 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586870419wht  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.437 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868703587qp  [0;39m <==    Updates: 1
2023-08-09 21:14:30.428 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586870386zrw  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:14:30.438 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868703587qp  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:30.438 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868703587qp  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:30.439 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868703587qp  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@1065e2d5
2023-08-09 21:14:30.440 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586870386zrw  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:14:30.441 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868703587qp  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:30.442 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868703587qp  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:30.452 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586870452yul  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.452 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586870452yul  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.452 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586870452yul  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.453 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586870452yul  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.454 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586870452yul  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.454 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586870452yul  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.454 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586870452yul  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.454 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586870452yul  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.456 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m16915868703587qp  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:30.458 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m16915868703587qp  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 9, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:30.459 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868703587qp  [0;39m <==      Total: 1
2023-08-09 21:14:30.460 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868703587qp  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:30.460 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m16915868703587qp  [0;39m 查出余票记录:DailyTrainTicket [Hash = 1505304714, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=9, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:30.464 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m16915868703587qp  [0;39m 本次购票没有选座
2023-08-09 21:14:30.467 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586870452yul  [0;39m 很遗憾，没抢到锁
2023-08-09 21:14:30.467 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586870452yul  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:30.467 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868703587qp  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:30.468 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868703587qp  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@7eaeb11a
2023-08-09 21:14:30.471 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868703587qp  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:14:30.472 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868703587qp  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:14:30.480 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586870452yul  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:14:30.481 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586870452yul  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:14:30.484 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m16915868703587qp  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:14:30.486 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m16915868703587qp  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:14:30.487 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m16915868704879kk  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.487 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868703587qp  [0;39m <==      Total: 1
2023-08-09 21:14:30.487 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868703587qp  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:30.488 INFO  com.jktickets.utils.JwtUtil                       :64   [32m16915868704879kk  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.488 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m16915868703587qp  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:14:30.488 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m16915868704879kk  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.488 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m16915868703587qp  [0;39m 从车厢2选座
2023-08-09 21:14:30.489 INFO  com.jktickets.aspect.LogAspect                    :57   [32m16915868704879kk  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.490 INFO  com.jktickets.aspect.LogAspect                    :58   [32m16915868704879kk  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.490 INFO  com.jktickets.aspect.LogAspect                    :59   [32m16915868704879kk  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.490 INFO  com.jktickets.aspect.LogAspect                    :60   [32m16915868704879kk  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.490 INFO  com.jktickets.aspect.LogAspect                    :82   [32m16915868704879kk  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.492 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868703587qp  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:30.492 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868703587qp  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@a5e6139
2023-08-09 21:14:30.494 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868703587qp  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:14:30.495 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868703587qp  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:14:30.508 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:14:30.509 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:14:30.510 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:14:30.512 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:14:30.514 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:14:30.516 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:14:30.518 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:14:30.519 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m16915868705196zb  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.520 INFO  com.jktickets.utils.JwtUtil                       :64   [32m16915868705196zb  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.520 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 01, 2023-08-08 22:00:35.282, 2023-08-09 21:13:59.639
2023-08-09 21:14:30.520 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m16915868705196zb  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.521 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 01, 2023-08-08 22:00:35.307, 2023-08-09 21:14:00.821
2023-08-09 21:14:30.522 INFO  com.jktickets.aspect.LogAspect                    :57   [32m16915868705196zb  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.522 INFO  com.jktickets.aspect.LogAspect                    :58   [32m16915868705196zb  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.522 INFO  com.jktickets.aspect.LogAspect                    :59   [32m16915868705196zb  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.522 INFO  com.jktickets.aspect.LogAspect                    :60   [32m16915868705196zb  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.523 INFO  com.jktickets.aspect.LogAspect                    :82   [32m16915868705196zb  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.523 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 01, 2023-08-08 22:00:35.334, 2023-08-09 21:14:02.395
2023-08-09 21:14:30.524 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 01, 2023-08-08 22:00:35.360, 2023-08-09 21:14:04.261
2023-08-09 21:14:30.525 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 01, 2023-08-08 22:00:35.437, 2023-08-09 21:14:05.463
2023-08-09 21:14:30.526 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 01, 2023-08-08 22:00:35.468, 2023-08-09 21:14:06.571
2023-08-09 21:14:30.527 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 01, 2023-08-08 22:00:35.495, 2023-08-09 21:14:07.766
2023-08-09 21:14:30.528 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 01, 2023-08-08 22:00:35.522, 2023-08-09 21:14:09.046
2023-08-09 21:14:30.530 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 01, 2023-08-08 22:00:35.550, 2023-08-09 21:14:10.278
2023-08-09 21:14:30.531 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 01, 2023-08-08 22:00:35.583, 2023-08-09 21:14:11.609
2023-08-09 21:14:30.534 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 00, 2023-08-08 22:00:35.610, 2023-08-08 22:00:35.610
2023-08-09 21:14:30.534 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m16915868705196zb  [0;39m 很遗憾，没抢到锁
2023-08-09 21:14:30.534 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m16915868705196zb  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:30.535 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 00, 2023-08-08 22:00:35.636, 2023-08-08 22:00:35.636
2023-08-09 21:14:30.536 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:14:30.537 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:14:30.538 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:14:30.538 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:14:30.539 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:14:30.541 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:14:30.541 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868703587qp  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:14:30.541 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868703587qp  [0;39m <==      Total: 25
2023-08-09 21:14:30.541 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868703587qp  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:30.542 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m16915868703587qp  [0;39m 车厢2的座位数:25
2023-08-09 21:14:30.542 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868703587qp  [0;39m 无选座
2023-08-09 21:14:30.542 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868703587qp  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:30.542 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868703587qp  [0;39m 无选座
2023-08-09 21:14:30.542 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868703587qp  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:30.542 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868703587qp  [0;39m 无选座
2023-08-09 21:14:30.542 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868703587qp  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:30.542 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868703587qp  [0;39m 无选座
2023-08-09 21:14:30.542 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868703587qp  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:30.542 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868703587qp  [0;39m 无选座
2023-08-09 21:14:30.544 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868703587qp  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:30.544 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868703587qp  [0;39m 无选座
2023-08-09 21:14:30.544 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868703587qp  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:30.544 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868703587qp  [0;39m 无选座
2023-08-09 21:14:30.544 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868703587qp  [0;39m 座位7在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:30.544 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868703587qp  [0;39m 无选座
2023-08-09 21:14:30.544 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868703587qp  [0;39m 座位8在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:30.544 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868703587qp  [0;39m 无选座
2023-08-09 21:14:30.544 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868703587qp  [0;39m 座位9在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:30.544 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868703587qp  [0;39m 无选座
2023-08-09 21:14:30.544 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868703587qp  [0;39m 座位10在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:30.545 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868703587qp  [0;39m 无选座
2023-08-09 21:14:30.545 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868703587qp  [0;39m 座位11在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:30.545 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868703587qp  [0;39m 无选座
2023-08-09 21:14:30.546 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868703587qp  [0;39m 座位12在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:30.546 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868703587qp  [0;39m 无选座
2023-08-09 21:14:30.546 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868703587qp  [0;39m 座位13在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:30.546 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868703587qp  [0;39m 无选座
2023-08-09 21:14:30.547 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868703587qp  [0;39m 座位14在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:30.547 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m16915868705196zb  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:14:30.548 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868703587qp  [0;39m 无选座
2023-08-09 21:14:30.548 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868703587qp  [0;39m 座位15在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:30.548 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868703587qp  [0;39m 无选座
2023-08-09 21:14:30.548 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868703587qp  [0;39m 座位16在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:30.548 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868703587qp  [0;39m 无选座
2023-08-09 21:14:30.548 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m16915868705196zb  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:14:30.549 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m16915868703587qp  [0;39m 座位17在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:14:30.552 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586870552cnq  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.552 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m16915868703587qp  [0;39m 座位17被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:14:30.552 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m16915868703587qp  [0;39m 选中座位
2023-08-09 21:14:30.552 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586870552cnq  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.553 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586870552cnq  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.553 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m16915868703587qp  [0;39m 最终选座:[DailyTrainSeat [Hash = 173869713, id=1688913097588346880, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=04, col=B, seatType=2, carriageSeatIndex=17, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:14:30.555 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586870552cnq  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.555 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586870552cnq  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.555 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586870552cnq  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.555 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586870552cnq  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.556 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586870552cnq  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.586 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586870586mca  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.587 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586870586mca  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.587 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586870586mca  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.588 INFO  io.seata.tm.TransactionManagerHolder              :40   [32m16915868703587qp  [0;39m TransactionManager Singleton io.seata.tm.DefaultTransactionManager@204c07ce
2023-08-09 21:14:30.588 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586870586mca  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.588 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586870586mca  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.588 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586870586mca  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.588 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586870586mca  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.589 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586870586mca  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.604 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586870586mca  [0;39m 很遗憾，没抢到锁
2023-08-09 21:14:30.604 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586870586mca  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:30.612 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m16915868703587qp  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918214]
2023-08-09 21:14:30.613 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m16915868703587qp  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918214
2023-08-09 21:14:30.613 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868703587qp  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:30.614 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868703587qp  [0;39m 参数值: DailyTrainSeat [Hash = 1933522974, id=1688913097588346880, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:14:30 CST 2023]
2023-08-09 21:14:30.617 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586870586mca  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:14:30.617 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586870617jbn  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.618 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586870586mca  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:14:30.618 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586870617jbn  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.619 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586870617jbn  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.621 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586870617jbn  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.622 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586870617jbn  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.623 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586870617jbn  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.623 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586870617jbn  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.624 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586870617jbn  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.641 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868703587qp  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:14:30.651 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586870651grn  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.652 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586870651grn  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.652 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586870651grn  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.653 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586870651grn  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.653 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586870651grn  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.654 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586870651grn  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.654 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586870651grn  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.654 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586870651grn  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.671 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586870651grn  [0;39m 很遗憾，没抢到锁
2023-08-09 21:14:30.671 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586870651grn  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:30.683 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586870651grn  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:14:30.684 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586870684uuf  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.684 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586870651grn  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:14:30.685 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586870684uuf  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.685 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586870684uuf  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.687 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586870684uuf  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.687 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586870684uuf  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.687 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586870684uuf  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.688 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586870684uuf  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.688 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586870684uuf  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.717 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586870717mhl  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.718 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586870717mhl  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.718 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586870717mhl  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.719 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586870717mhl  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.719 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586870717mhl  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.719 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586870717mhl  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.720 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586870717mhl  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.720 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586870717mhl  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.733 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586870717mhl  [0;39m 很遗憾，没抢到锁
2023-08-09 21:14:30.733 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586870717mhl  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:30.748 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586870748g4s  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.748 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586870717mhl  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:14:30.748 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586870748g4s  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.748 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586870748g4s  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.749 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586870717mhl  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:14:30.749 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586870748g4s  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.750 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586870748g4s  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.750 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586870748g4s  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.750 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586870748g4s  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.751 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586870748g4s  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.791 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m16915868707916xr  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.792 INFO  com.jktickets.utils.JwtUtil                       :64   [32m16915868707916xr  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.801 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m16915868707916xr  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.803 INFO  com.jktickets.aspect.LogAspect                    :57   [32m16915868707916xr  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.804 INFO  com.jktickets.aspect.LogAspect                    :58   [32m16915868707916xr  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.804 INFO  com.jktickets.aspect.LogAspect                    :59   [32m16915868707916xr  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.804 INFO  com.jktickets.aspect.LogAspect                    :60   [32m16915868707916xr  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.804 INFO  com.jktickets.aspect.LogAspect                    :82   [32m16915868707916xr  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.816 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586870816l7i  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.816 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586870816l7i  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.816 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m16915868707916xr  [0;39m 很遗憾，没抢到锁
2023-08-09 21:14:30.817 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586870816l7i  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.817 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m16915868707916xr  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:30.818 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586870816l7i  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.818 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586870816l7i  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.818 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586870816l7i  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.818 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586870816l7i  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.818 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586870816l7i  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.828 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m16915868707916xr  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:14:30.829 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m16915868707916xr  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:14:30.849 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m16915868708498z8  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.850 INFO  com.jktickets.utils.JwtUtil                       :64   [32m16915868708498z8  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.850 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m16915868708498z8  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.851 INFO  com.jktickets.aspect.LogAspect                    :57   [32m16915868708498z8  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.852 INFO  com.jktickets.aspect.LogAspect                    :58   [32m16915868708498z8  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.852 INFO  com.jktickets.aspect.LogAspect                    :59   [32m16915868708498z8  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.852 INFO  com.jktickets.aspect.LogAspect                    :60   [32m16915868708498z8  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.852 INFO  com.jktickets.aspect.LogAspect                    :82   [32m16915868708498z8  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.865 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m16915868708498z8  [0;39m 很遗憾，没抢到锁
2023-08-09 21:14:30.865 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m16915868708498z8  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:30.877 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m16915868708498z8  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:14:30.878 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m16915868708498z8  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:14:30.884 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m169158687088484i  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.884 INFO  com.jktickets.utils.JwtUtil                       :64   [32m169158687088484i  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.884 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m169158687088484i  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.886 INFO  com.jktickets.aspect.LogAspect                    :57   [32m169158687088484i  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.886 INFO  com.jktickets.aspect.LogAspect                    :58   [32m169158687088484i  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.886 INFO  com.jktickets.aspect.LogAspect                    :59   [32m169158687088484i  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.886 INFO  com.jktickets.aspect.LogAspect                    :60   [32m169158687088484i  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.886 INFO  com.jktickets.aspect.LogAspect                    :82   [32m169158687088484i  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.900 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868703587qp  [0;39m ==> Parameters: 01(String), 2023-08-09 21:14:30.613(Timestamp), 1688913097588346880(Long)
2023-08-09 21:14:30.912 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586870912gvw  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.912 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586870912gvw  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.912 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586870912gvw  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.913 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586870912gvw  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.913 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586870912gvw  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.914 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586870912gvw  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.914 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586870912gvw  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.914 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586870912gvw  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.925 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m16915868703587qp  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] client.rm.lock.retryInterval+SEATA_GROUP+train
2023-08-09 21:14:30.926 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m16915868703587qp  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.rm.lock.retryInterval, group=SEATA_GROUP, cnt=1
2023-08-09 21:14:30.926 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m16915868703587qp  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.rm.lock.retryInterval, group=SEATA_GROUP, cnt=2
2023-08-09 21:14:30.926 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586870912gvw  [0;39m 很遗憾，没抢到锁
2023-08-09 21:14:30.926 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586870912gvw  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:30.927 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m16915868703587qp  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] client.rm.lock.retryTimes+SEATA_GROUP+train
2023-08-09 21:14:30.927 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m16915868703587qp  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.rm.lock.retryTimes, group=SEATA_GROUP, cnt=1
2023-08-09 21:14:30.927 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m16915868703587qp  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.rm.lock.retryTimes, group=SEATA_GROUP, cnt=2
2023-08-09 21:14:30.938 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586870912gvw  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:14:30.939 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586870912gvw  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:14:30.947 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586870947s14  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.947 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586870947s14  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.948 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586870947s14  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.949 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586870947s14  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.949 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586870947s14  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.949 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586870947s14  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.949 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586870947s14  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.949 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586870947s14  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.979 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586870978lmm  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:30.979 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586870978lmm  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.979 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586870978lmm  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:30.980 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586870978lmm  [0;39m ------------- 开始 -------------
2023-08-09 21:14:30.980 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586870978lmm  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:30.980 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586870978lmm  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:30.980 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586870978lmm  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:30.981 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586870978lmm  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:30.992 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586870978lmm  [0;39m 很遗憾，没抢到锁
2023-08-09 21:14:30.992 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586870978lmm  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:31.008 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586870978lmm  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:14:31.009 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586870978lmm  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:14:31.016 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m169158687101670k  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:31.016 INFO  com.jktickets.utils.JwtUtil                       :64   [32m169158687101670k  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.016 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m169158687101670k  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.018 INFO  com.jktickets.aspect.LogAspect                    :57   [32m169158687101670k  [0;39m ------------- 开始 -------------
2023-08-09 21:14:31.018 INFO  com.jktickets.aspect.LogAspect                    :58   [32m169158687101670k  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:31.018 INFO  com.jktickets.aspect.LogAspect                    :59   [32m169158687101670k  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:31.018 INFO  com.jktickets.aspect.LogAspect                    :60   [32m169158687101670k  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:31.019 INFO  com.jktickets.aspect.LogAspect                    :82   [32m169158687101670k  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:31.045 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m16915868710456a5  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:31.046 INFO  com.jktickets.utils.JwtUtil                       :64   [32m16915868710456a5  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.046 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m16915868710456a5  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.047 INFO  com.jktickets.aspect.LogAspect                    :57   [32m16915868710456a5  [0;39m ------------- 开始 -------------
2023-08-09 21:14:31.047 INFO  com.jktickets.aspect.LogAspect                    :58   [32m16915868710456a5  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:31.047 INFO  com.jktickets.aspect.LogAspect                    :59   [32m16915868710456a5  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:31.047 INFO  com.jktickets.aspect.LogAspect                    :60   [32m16915868710456a5  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:31.048 INFO  com.jktickets.aspect.LogAspect                    :82   [32m16915868710456a5  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:31.060 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m16915868710456a5  [0;39m 很遗憾，没抢到锁
2023-08-09 21:14:31.060 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m16915868710456a5  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:31.072 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m16915868710456a5  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:14:31.073 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m16915868710456a5  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:14:31.083 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586871082iea  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:31.083 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586871082iea  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.083 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586871082iea  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.084 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586871082iea  [0;39m ------------- 开始 -------------
2023-08-09 21:14:31.085 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586871082iea  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:31.085 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586871082iea  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:31.085 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586871082iea  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:31.085 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586871082iea  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:31.112 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586871112g2o  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:31.113 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586871112g2o  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.113 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586871112g2o  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.114 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586871112g2o  [0;39m ------------- 开始 -------------
2023-08-09 21:14:31.114 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586871112g2o  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:31.115 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586871112g2o  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:31.115 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586871112g2o  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:31.115 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586871112g2o  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:31.126 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586871112g2o  [0;39m 很遗憾，没抢到锁
2023-08-09 21:14:31.126 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586871112g2o  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:31.137 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586871112g2o  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:14:31.138 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586871112g2o  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:14:31.146 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m16915868711469bm  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:31.147 INFO  com.jktickets.utils.JwtUtil                       :64   [32m16915868711469bm  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.147 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m16915868711469bm  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.149 INFO  com.jktickets.aspect.LogAspect                    :57   [32m16915868711469bm  [0;39m ------------- 开始 -------------
2023-08-09 21:14:31.149 INFO  com.jktickets.aspect.LogAspect                    :58   [32m16915868711469bm  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:31.149 INFO  com.jktickets.aspect.LogAspect                    :59   [32m16915868711469bm  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:31.149 INFO  com.jktickets.aspect.LogAspect                    :60   [32m16915868711469bm  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:31.149 INFO  com.jktickets.aspect.LogAspect                    :82   [32m16915868711469bm  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:31.176 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586871176dzc  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:31.177 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586871176dzc  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.177 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586871176dzc  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.178 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586871176dzc  [0;39m ------------- 开始 -------------
2023-08-09 21:14:31.178 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586871176dzc  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:31.178 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586871176dzc  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:31.178 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586871176dzc  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:31.178 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586871176dzc  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:31.189 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586871176dzc  [0;39m 很遗憾，没抢到锁
2023-08-09 21:14:31.190 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586871176dzc  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:31.200 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586871176dzc  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:14:31.201 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586871176dzc  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:14:31.212 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586871212z9x  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:31.213 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586871212z9x  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.213 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586871212z9x  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.214 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586871212z9x  [0;39m ------------- 开始 -------------
2023-08-09 21:14:31.214 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586871212z9x  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:31.214 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586871212z9x  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:31.214 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586871212z9x  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:31.214 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586871212z9x  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:31.237 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868703587qp  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918214, branchId:7854700236664918217, lockKeys:daily_train_seat:1688913097588346880
2023-08-09 21:14:31.245 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586871245zx5  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:31.245 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586871245zx5  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.245 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586871245zx5  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.247 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586871245zx5  [0;39m ------------- 开始 -------------
2023-08-09 21:14:31.247 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586871245zx5  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:31.247 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586871245zx5  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:31.248 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586871245zx5  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:31.248 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586871245zx5  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:31.260 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586871245zx5  [0;39m 很遗憾，没抢到锁
2023-08-09 21:14:31.260 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586871245zx5  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:31.277 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586871277u95  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:31.277 WARN  i.s.c.l.EnhancedServiceLoader$InnerEnhancedServiceLoader:545  [32m16915868703587qp  [0;39m Load [io.seata.rm.datasource.undo.parser.ProtostuffUndoLogParser] class fail: io/protostuff/runtime/IdStrategy
2023-08-09 21:14:31.278 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586871277u95  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.278 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586871277u95  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.279 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586871245zx5  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:14:31.280 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586871245zx5  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:14:31.280 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586871277u95  [0;39m ------------- 开始 -------------
2023-08-09 21:14:31.280 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586871277u95  [0;39m 请求地址: http://192.168.0.102:8002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:31.281 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586871277u95  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:31.281 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586871277u95  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:31.282 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586871277u95  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:31.311 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586871311gyr  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:31.313 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586871311gyr  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.313 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586871311gyr  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:31.315 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586871311gyr  [0;39m ------------- 开始 -------------
2023-08-09 21:14:31.315 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586871311gyr  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:14:31.315 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586871311gyr  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:14:31.315 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586871311gyr  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:31.316 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586871311gyr  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:14:31.338 INFO  com.jktickets.service.ConfirmOrderService         :186  [32m1691586871311gyr  [0;39m 很遗憾，没抢到锁
2023-08-09 21:14:31.339 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586871311gyr  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:31.361 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586871311gyr  [0;39m 业务异常:当前抢票人数多，请稍后重试
2023-08-09 21:14:31.363 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586871311gyr  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='当前抢票人数多，请稍后重试'})]
2023-08-09 21:14:31.374 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868703587qp  [0;39m <==    Updates: 1
2023-08-09 21:14:31.374 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868703587qp  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:31.375 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m16915868703587qp  [0;39m 影响出发站区间:0-1
2023-08-09 21:14:31.375 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m16915868703587qp  [0;39m 影响到达站区间:0-2
2023-08-09 21:14:31.390 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868703587qp  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:14:31.393 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868703587qp  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:14:31.697 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868703587qp  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918214, branchId:7854700236664918219, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:31.741 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868703587qp  [0;39m <==    Updates: 3
2023-08-09 21:14:31.833 INFO  com.alibaba.nacos.client.naming                   :167  [32m16915868703587qp  [0;39m [SUBSCRIBE-SERVICE] service:member-service, group:DEFAULT_GROUP, clusters: 
2023-08-09 21:14:31.837 INFO  com.alibaba.nacos.client.naming                   :184  [32m16915868703587qp  [0;39m init new ips(1) service: DEFAULT_GROUP@@member-service -> [{"ip":"192.168.0.102","port":8001,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@member-service","metadata":{"preserved.register.source":"SPRING_CLOUD"},"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2023-08-09 21:14:31.837 INFO  com.alibaba.nacos.client.naming                   :169  [32m16915868703587qp  [0;39m current ips:(1) service: DEFAULT_GROUP@@member-service -> [{"ip":"192.168.0.102","port":8001,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@member-service","metadata":{"preserved.register.source":"SPRING_CLOUD"},"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2023-08-09 21:14:32.100 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m16915868703587qp  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:32.104 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868703587qp  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:32.105 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868703587qp  [0;39m 参数值: ConfirmOrder [Hash = 1658369933, id=1689263887276445696, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:32 CST 2023, tickets=null]
2023-08-09 21:14:32.107 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868703587qp  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:32.108 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868703587qp  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:32.104(Timestamp), 1689263887276445696(Long)
2023-08-09 21:14:32.362 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868703587qp  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918214, branchId:7854700236664918224, lockKeys:confirm_order:1689263887276445696
2023-08-09 21:14:32.362 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [12798e1c-1141-4ec9-b3e0-0a1888c349fa] Receive server push request, request = NotifySubscriberRequest, requestId = 13
2023-08-09 21:14:32.363 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [12798e1c-1141-4ec9-b3e0-0a1888c349fa] Ack server push request, request = NotifySubscriberRequest, requestId = 13
2023-08-09 21:14:32.405 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868703587qp  [0;39m <==    Updates: 1
2023-08-09 21:14:32.406 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868703587qp  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:32.406 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m16915868703587qp  [0;39m transaction 192.168.0.102:8091:7854700236664918214 will be commit
2023-08-09 21:14:32.479 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m16915868703587qp  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918214
2023-08-09 21:14:32.480 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m16915868703587qp  [0;39m [192.168.0.102:8091:7854700236664918214] commit status: Committed
2023-08-09 21:14:32.480 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m16915868703587qp  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:32.508 INFO  com.jktickets.aspect.LogAspect                    :94   [32m16915868703587qp  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:32.509 INFO  com.jktickets.aspect.LogAspect                    :95   [32m16915868703587qp  [0;39m ------------- 结束 耗时：2146 ms -------------
2023-08-09 21:14:32.525 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586871277u95  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:32.525 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586871277u95  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:32.525 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586871277u95  [0;39m 参数值: ConfirmOrder [Hash = 1421442078, id=1689263896235479040, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:32, updateTime=2023-08-09 21:14:32, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:32.526 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586871277u95  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:32.527 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586871277u95  [0;39m ==> Parameters: 1689263896235479040(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:32.525(Timestamp), 2023-08-09 21:14:32.525(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:32.550 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586871277u95  [0;39m <==    Updates: 1
2023-08-09 21:14:32.551 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586871277u95  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:32.551 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586871277u95  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:32.551 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586871277u95  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@2cdc61d3
2023-08-09 21:14:32.552 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586871277u95  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:32.553 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586871277u95  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:32.565 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586871277u95  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:32.566 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586871277u95  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 8, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:32.567 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586871277u95  [0;39m <==      Total: 1
2023-08-09 21:14:32.567 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586871277u95  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:32.567 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586871277u95  [0;39m 查出余票记录:DailyTrainTicket [Hash = 982561076, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=8, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:32.568 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m1691586871277u95  [0;39m 本次购票没有选座
2023-08-09 21:14:32.568 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586871277u95  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:32.568 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586871277u95  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@78c55d2e
2023-08-09 21:14:32.569 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586871277u95  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:14:32.569 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586871277u95  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:14:32.582 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586871277u95  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:14:32.583 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586871277u95  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:14:32.583 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586871277u95  [0;39m <==      Total: 1
2023-08-09 21:14:32.584 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586871277u95  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:32.584 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m1691586871277u95  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:14:32.584 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m1691586871277u95  [0;39m 从车厢2选座
2023-08-09 21:14:32.584 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586871277u95  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:32.584 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586871277u95  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@2198397b
2023-08-09 21:14:32.585 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586871277u95  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:14:32.586 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586871277u95  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:14:32.599 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:14:32.600 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:14:32.600 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:14:32.601 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:14:32.602 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:14:32.603 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:14:32.603 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:14:32.604 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 01, 2023-08-08 22:00:35.282, 2023-08-09 21:13:59.639
2023-08-09 21:14:32.605 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 01, 2023-08-08 22:00:35.307, 2023-08-09 21:14:00.821
2023-08-09 21:14:32.606 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 01, 2023-08-08 22:00:35.334, 2023-08-09 21:14:02.395
2023-08-09 21:14:32.606 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 01, 2023-08-08 22:00:35.360, 2023-08-09 21:14:04.261
2023-08-09 21:14:32.607 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 01, 2023-08-08 22:00:35.437, 2023-08-09 21:14:05.463
2023-08-09 21:14:32.607 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 01, 2023-08-08 22:00:35.468, 2023-08-09 21:14:06.571
2023-08-09 21:14:32.608 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 01, 2023-08-08 22:00:35.495, 2023-08-09 21:14:07.766
2023-08-09 21:14:32.608 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 01, 2023-08-08 22:00:35.522, 2023-08-09 21:14:09.046
2023-08-09 21:14:32.609 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 01, 2023-08-08 22:00:35.550, 2023-08-09 21:14:10.278
2023-08-09 21:14:32.610 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 01, 2023-08-08 22:00:35.583, 2023-08-09 21:14:11.609
2023-08-09 21:14:32.610 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 01, 2023-08-08 22:00:35.610, 2023-08-09 21:14:30.613
2023-08-09 21:14:32.611 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 00, 2023-08-08 22:00:35.636, 2023-08-08 22:00:35.636
2023-08-09 21:14:32.612 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:14:32.612 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:14:32.613 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:14:32.613 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:14:32.614 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:14:32.615 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:14:32.615 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871277u95  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:14:32.616 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586871277u95  [0;39m <==      Total: 25
2023-08-09 21:14:32.616 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586871277u95  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:32.616 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m1691586871277u95  [0;39m 车厢2的座位数:25
2023-08-09 21:14:32.616 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871277u95  [0;39m 无选座
2023-08-09 21:14:32.616 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871277u95  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:32.617 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871277u95  [0;39m 无选座
2023-08-09 21:14:32.617 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871277u95  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:32.617 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871277u95  [0;39m 无选座
2023-08-09 21:14:32.617 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871277u95  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:32.617 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871277u95  [0;39m 无选座
2023-08-09 21:14:32.617 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871277u95  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:32.617 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871277u95  [0;39m 无选座
2023-08-09 21:14:32.617 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871277u95  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:32.617 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871277u95  [0;39m 无选座
2023-08-09 21:14:32.617 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871277u95  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:32.617 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871277u95  [0;39m 无选座
2023-08-09 21:14:32.618 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871277u95  [0;39m 座位7在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:32.618 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871277u95  [0;39m 无选座
2023-08-09 21:14:32.618 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871277u95  [0;39m 座位8在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:32.618 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871277u95  [0;39m 无选座
2023-08-09 21:14:32.618 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871277u95  [0;39m 座位9在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:32.618 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871277u95  [0;39m 无选座
2023-08-09 21:14:32.618 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871277u95  [0;39m 座位10在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:32.618 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871277u95  [0;39m 无选座
2023-08-09 21:14:32.618 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871277u95  [0;39m 座位11在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:32.618 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871277u95  [0;39m 无选座
2023-08-09 21:14:32.619 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871277u95  [0;39m 座位12在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:32.619 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871277u95  [0;39m 无选座
2023-08-09 21:14:32.619 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871277u95  [0;39m 座位13在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:32.619 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871277u95  [0;39m 无选座
2023-08-09 21:14:32.619 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871277u95  [0;39m 座位14在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:32.619 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871277u95  [0;39m 无选座
2023-08-09 21:14:32.619 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871277u95  [0;39m 座位15在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:32.619 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871277u95  [0;39m 无选座
2023-08-09 21:14:32.619 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871277u95  [0;39m 座位16在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:32.619 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871277u95  [0;39m 无选座
2023-08-09 21:14:32.619 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871277u95  [0;39m 座位17在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:32.619 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871277u95  [0;39m 无选座
2023-08-09 21:14:32.620 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m1691586871277u95  [0;39m 座位18在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:14:32.620 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m1691586871277u95  [0;39m 座位18被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:14:32.620 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m1691586871277u95  [0;39m 选中座位
2023-08-09 21:14:32.620 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m1691586871277u95  [0;39m 最终选座:[DailyTrainSeat [Hash = 1287661481, id=1688913097697398784, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=04, col=C, seatType=2, carriageSeatIndex=18, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:14:32.637 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m1691586871277u95  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918226]
2023-08-09 21:14:32.637 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m1691586871277u95  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918226
2023-08-09 21:14:32.637 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586871277u95  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:32.637 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586871277u95  [0;39m 参数值: DailyTrainSeat [Hash = 950282148, id=1688913097697398784, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:14:32 CST 2023]
2023-08-09 21:14:32.639 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586871277u95  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:14:32.640 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586871277u95  [0;39m ==> Parameters: 01(String), 2023-08-09 21:14:32.637(Timestamp), 1688913097697398784(Long)
2023-08-09 21:14:32.820 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586871277u95  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918226, branchId:7854700236664918228, lockKeys:daily_train_seat:1688913097697398784
2023-08-09 21:14:32.864 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586871277u95  [0;39m <==    Updates: 1
2023-08-09 21:14:32.865 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586871277u95  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:32.865 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m1691586871277u95  [0;39m 影响出发站区间:0-1
2023-08-09 21:14:32.865 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m1691586871277u95  [0;39m 影响到达站区间:0-2
2023-08-09 21:14:32.867 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586871277u95  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:14:32.871 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586871277u95  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:14:32.886 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918214', branchId=7854700236664918217, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:32.889 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918214 7854700236664918217 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:32.892 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:32.910 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918214', branchId=7854700236664918219, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:32.910 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918214 7854700236664918219 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:32.910 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:32.946 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918214', branchId=7854700236664918224, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:32.947 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918214 7854700236664918224 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:32.947 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:33.080 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586871277u95  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918226, branchId:7854700236664918232, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:33.122 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586871277u95  [0;39m <==    Updates: 3
2023-08-09 21:14:33.351 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m1691586871277u95  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:33.351 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586871277u95  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:33.352 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586871277u95  [0;39m 参数值: ConfirmOrder [Hash = 627138310, id=1689263896235479040, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:33 CST 2023, tickets=null]
2023-08-09 21:14:33.354 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586871277u95  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:33.356 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586871277u95  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:33.351(Timestamp), 1689263896235479040(Long)
2023-08-09 21:14:33.568 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586871277u95  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918226, branchId:7854700236664918236, lockKeys:confirm_order:1689263896235479040
2023-08-09 21:14:33.608 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586871277u95  [0;39m <==    Updates: 1
2023-08-09 21:14:33.609 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586871277u95  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:33.609 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m1691586871277u95  [0;39m transaction 192.168.0.102:8091:7854700236664918226 will be commit
2023-08-09 21:14:33.661 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m1691586871277u95  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918226
2023-08-09 21:14:33.662 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m1691586871277u95  [0;39m [192.168.0.102:8091:7854700236664918226] commit status: Committed
2023-08-09 21:14:33.662 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586871277u95  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:33.683 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586871277u95  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:33.684 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586871277u95  [0;39m ------------- 结束 耗时：2404 ms -------------
2023-08-09 21:14:33.709 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586871212z9x  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:33.709 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586871212z9x  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:33.710 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586871212z9x  [0;39m 参数值: ConfirmOrder [Hash = 1292548706, id=1689263901201534976, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:33, updateTime=2023-08-09 21:14:33, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:33.710 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586871212z9x  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:33.711 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586871212z9x  [0;39m ==> Parameters: 1689263901201534976(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:33.709(Timestamp), 2023-08-09 21:14:33.709(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:33.737 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586871212z9x  [0;39m <==    Updates: 1
2023-08-09 21:14:33.737 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586871212z9x  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:33.738 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586871212z9x  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:33.738 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586871212z9x  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@72f42bc6
2023-08-09 21:14:33.739 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586871212z9x  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:33.740 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586871212z9x  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:33.754 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586871212z9x  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:33.755 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 7, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:33.755 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586871212z9x  [0;39m <==      Total: 1
2023-08-09 21:14:33.756 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586871212z9x  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:33.756 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586871212z9x  [0;39m 查出余票记录:DailyTrainTicket [Hash = 2113330585, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=7, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:33.756 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m1691586871212z9x  [0;39m 本次购票没有选座
2023-08-09 21:14:33.756 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586871212z9x  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:33.757 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586871212z9x  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@49638898
2023-08-09 21:14:33.757 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586871212z9x  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:14:33.758 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586871212z9x  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:14:33.774 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586871212z9x  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:14:33.775 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:14:33.776 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586871212z9x  [0;39m <==      Total: 1
2023-08-09 21:14:33.776 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586871212z9x  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:33.777 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m1691586871212z9x  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:14:33.777 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m1691586871212z9x  [0;39m 从车厢2选座
2023-08-09 21:14:33.777 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586871212z9x  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:33.777 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586871212z9x  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@4fd278fb
2023-08-09 21:14:33.780 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586871212z9x  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:14:33.781 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586871212z9x  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:14:33.810 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:14:33.811 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:14:33.813 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:14:33.815 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:14:33.815 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:14:33.816 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:14:33.817 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:14:33.819 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 01, 2023-08-08 22:00:35.282, 2023-08-09 21:13:59.639
2023-08-09 21:14:33.820 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 01, 2023-08-08 22:00:35.307, 2023-08-09 21:14:00.821
2023-08-09 21:14:33.821 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 01, 2023-08-08 22:00:35.334, 2023-08-09 21:14:02.395
2023-08-09 21:14:33.822 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 01, 2023-08-08 22:00:35.360, 2023-08-09 21:14:04.261
2023-08-09 21:14:33.823 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 01, 2023-08-08 22:00:35.437, 2023-08-09 21:14:05.463
2023-08-09 21:14:33.825 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 01, 2023-08-08 22:00:35.468, 2023-08-09 21:14:06.571
2023-08-09 21:14:33.826 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 01, 2023-08-08 22:00:35.495, 2023-08-09 21:14:07.766
2023-08-09 21:14:33.827 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 01, 2023-08-08 22:00:35.522, 2023-08-09 21:14:09.046
2023-08-09 21:14:33.828 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 01, 2023-08-08 22:00:35.550, 2023-08-09 21:14:10.278
2023-08-09 21:14:33.829 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 01, 2023-08-08 22:00:35.583, 2023-08-09 21:14:11.609
2023-08-09 21:14:33.830 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 01, 2023-08-08 22:00:35.610, 2023-08-09 21:14:30.613
2023-08-09 21:14:33.831 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 01, 2023-08-08 22:00:35.636, 2023-08-09 21:14:32.637
2023-08-09 21:14:33.833 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 00, 2023-08-08 22:00:35.664, 2023-08-08 22:00:35.664
2023-08-09 21:14:33.834 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:14:33.835 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:14:33.837 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:14:33.838 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:14:33.840 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:14:33.841 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871212z9x  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:14:33.841 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586871212z9x  [0;39m <==      Total: 25
2023-08-09 21:14:33.842 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586871212z9x  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:33.842 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m1691586871212z9x  [0;39m 车厢2的座位数:25
2023-08-09 21:14:33.842 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.843 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871212z9x  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:33.843 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.843 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871212z9x  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:33.843 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.844 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871212z9x  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:33.844 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.844 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871212z9x  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:33.844 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.844 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871212z9x  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:33.844 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.845 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871212z9x  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:33.845 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.845 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871212z9x  [0;39m 座位7在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:33.845 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.845 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871212z9x  [0;39m 座位8在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:33.846 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.846 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871212z9x  [0;39m 座位9在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:33.846 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.846 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871212z9x  [0;39m 座位10在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:33.846 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.846 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871212z9x  [0;39m 座位11在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:33.847 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.847 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871212z9x  [0;39m 座位12在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:33.847 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.847 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871212z9x  [0;39m 座位13在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:33.848 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.848 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871212z9x  [0;39m 座位14在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:33.848 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.848 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871212z9x  [0;39m 座位15在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:33.849 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.849 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871212z9x  [0;39m 座位16在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:33.849 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.849 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871212z9x  [0;39m 座位17在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:33.849 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.850 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871212z9x  [0;39m 座位18在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:33.850 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871212z9x  [0;39m 无选座
2023-08-09 21:14:33.850 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m1691586871212z9x  [0;39m 座位19在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:14:33.850 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m1691586871212z9x  [0;39m 座位19被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:14:33.850 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m1691586871212z9x  [0;39m 选中座位
2023-08-09 21:14:33.851 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m1691586871212z9x  [0;39m 最终选座:[DailyTrainSeat [Hash = 1360125113, id=1688913097814839296, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=04, col=D, seatType=2, carriageSeatIndex=19, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:14:33.896 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m1691586871212z9x  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918238]
2023-08-09 21:14:33.897 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m1691586871212z9x  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918238
2023-08-09 21:14:33.897 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586871212z9x  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:33.897 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586871212z9x  [0;39m 参数值: DailyTrainSeat [Hash = 458592547, id=1688913097814839296, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:14:33 CST 2023]
2023-08-09 21:14:33.899 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586871212z9x  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:14:33.899 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586871212z9x  [0;39m ==> Parameters: 01(String), 2023-08-09 21:14:33.897(Timestamp), 1688913097814839296(Long)
2023-08-09 21:14:33.925 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918226', branchId=7854700236664918228, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:33.925 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918226 7854700236664918228 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:33.925 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:33.941 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918226', branchId=7854700236664918232, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:33.941 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918226 7854700236664918232 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:33.941 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:33.970 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918226', branchId=7854700236664918236, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:33.970 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918226 7854700236664918236 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:33.970 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:34.061 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586871212z9x  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918238, branchId:7854700236664918242, lockKeys:daily_train_seat:1688913097814839296
2023-08-09 21:14:34.104 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586871212z9x  [0;39m <==    Updates: 1
2023-08-09 21:14:34.105 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586871212z9x  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:34.105 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m1691586871212z9x  [0;39m 影响出发站区间:0-1
2023-08-09 21:14:34.105 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m1691586871212z9x  [0;39m 影响到达站区间:0-2
2023-08-09 21:14:34.106 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586871212z9x  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:14:34.107 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586871212z9x  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:14:34.322 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586871212z9x  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918238, branchId:7854700236664918244, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:34.367 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586871212z9x  [0;39m <==    Updates: 3
2023-08-09 21:14:34.610 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m1691586871212z9x  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:34.611 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586871212z9x  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:34.611 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586871212z9x  [0;39m 参数值: ConfirmOrder [Hash = 2040020060, id=1689263901201534976, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:34 CST 2023, tickets=null]
2023-08-09 21:14:34.612 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586871212z9x  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:34.613 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586871212z9x  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:34.61(Timestamp), 1689263901201534976(Long)
2023-08-09 21:14:34.797 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586871212z9x  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918238, branchId:7854700236664918248, lockKeys:confirm_order:1689263901201534976
2023-08-09 21:14:34.841 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586871212z9x  [0;39m <==    Updates: 1
2023-08-09 21:14:34.841 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586871212z9x  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:34.841 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m1691586871212z9x  [0;39m transaction 192.168.0.102:8091:7854700236664918238 will be commit
2023-08-09 21:14:34.918 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m1691586871212z9x  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918238
2023-08-09 21:14:34.918 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m1691586871212z9x  [0;39m [192.168.0.102:8091:7854700236664918238] commit status: Committed
2023-08-09 21:14:34.918 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586871212z9x  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:34.946 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586871212z9x  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:34.946 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586871212z9x  [0;39m ------------- 结束 耗时：3732 ms -------------
2023-08-09 21:14:34.961 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m16915868711469bm  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:34.962 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868711469bm  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:34.963 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868711469bm  [0;39m 参数值: ConfirmOrder [Hash = 1021103160, id=1689263906456997888, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:34, updateTime=2023-08-09 21:14:34, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:34.963 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868711469bm  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:34.966 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868711469bm  [0;39m ==> Parameters: 1689263906456997888(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:34.962(Timestamp), 2023-08-09 21:14:34.962(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:34.991 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868711469bm  [0;39m <==    Updates: 1
2023-08-09 21:14:34.992 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868711469bm  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:34.992 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868711469bm  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:34.992 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868711469bm  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@5fc52423
2023-08-09 21:14:34.996 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868711469bm  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:34.997 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868711469bm  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:35.013 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m16915868711469bm  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:35.015 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m16915868711469bm  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 6, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:35.016 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868711469bm  [0;39m <==      Total: 1
2023-08-09 21:14:35.017 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868711469bm  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:35.017 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m16915868711469bm  [0;39m 查出余票记录:DailyTrainTicket [Hash = 1259522773, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=6, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:35.018 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m16915868711469bm  [0;39m 本次购票没有选座
2023-08-09 21:14:35.018 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868711469bm  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:35.019 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868711469bm  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@9d8759f
2023-08-09 21:14:35.020 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868711469bm  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:14:35.021 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868711469bm  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:14:35.038 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m16915868711469bm  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:14:35.039 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m16915868711469bm  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:14:35.040 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m16915868711469bm  [0;39m <==      Total: 1
2023-08-09 21:14:35.041 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868711469bm  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:35.041 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m16915868711469bm  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:14:35.041 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m16915868711469bm  [0;39m 从车厢2选座
2023-08-09 21:14:35.042 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868711469bm  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:35.042 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868711469bm  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@2308278
2023-08-09 21:14:35.044 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868711469bm  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:14:35.045 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868711469bm  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:14:35.059 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:14:35.060 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:14:35.061 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:14:35.063 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:14:35.064 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:14:35.065 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:14:35.066 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:14:35.067 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 01, 2023-08-08 22:00:35.282, 2023-08-09 21:13:59.639
2023-08-09 21:14:35.068 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 01, 2023-08-08 22:00:35.307, 2023-08-09 21:14:00.821
2023-08-09 21:14:35.069 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 01, 2023-08-08 22:00:35.334, 2023-08-09 21:14:02.395
2023-08-09 21:14:35.070 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 01, 2023-08-08 22:00:35.360, 2023-08-09 21:14:04.261
2023-08-09 21:14:35.071 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 01, 2023-08-08 22:00:35.437, 2023-08-09 21:14:05.463
2023-08-09 21:14:35.072 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 01, 2023-08-08 22:00:35.468, 2023-08-09 21:14:06.571
2023-08-09 21:14:35.073 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 01, 2023-08-08 22:00:35.495, 2023-08-09 21:14:07.766
2023-08-09 21:14:35.075 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 01, 2023-08-08 22:00:35.522, 2023-08-09 21:14:09.046
2023-08-09 21:14:35.076 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 01, 2023-08-08 22:00:35.550, 2023-08-09 21:14:10.278
2023-08-09 21:14:35.077 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 01, 2023-08-08 22:00:35.583, 2023-08-09 21:14:11.609
2023-08-09 21:14:35.078 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 01, 2023-08-08 22:00:35.610, 2023-08-09 21:14:30.613
2023-08-09 21:14:35.079 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 01, 2023-08-08 22:00:35.636, 2023-08-09 21:14:32.637
2023-08-09 21:14:35.080 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 01, 2023-08-08 22:00:35.664, 2023-08-09 21:14:33.897
2023-08-09 21:14:35.081 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 00, 2023-08-08 22:00:35.690, 2023-08-08 22:00:35.690
2023-08-09 21:14:35.083 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:14:35.084 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:14:35.085 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:14:35.086 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:14:35.087 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m16915868711469bm  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:14:35.087 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m16915868711469bm  [0;39m <==      Total: 25
2023-08-09 21:14:35.089 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868711469bm  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:35.089 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m16915868711469bm  [0;39m 车厢2的座位数:25
2023-08-09 21:14:35.089 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.089 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.090 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.090 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.090 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.090 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.091 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.091 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.091 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.091 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.091 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.091 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.092 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.092 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位7在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.093 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.093 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位8在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.093 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.093 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位9在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.093 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.094 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位10在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.094 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.094 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位11在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.094 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.094 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位12在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.095 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.095 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位13在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.095 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.095 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位14在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.095 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.096 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位15在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.096 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.096 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位16在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.096 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.096 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位17在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.097 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.097 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位18在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.097 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.097 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m16915868711469bm  [0;39m 座位19在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:35.097 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m16915868711469bm  [0;39m 无选座
2023-08-09 21:14:35.097 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m16915868711469bm  [0;39m 座位20在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:14:35.098 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m16915868711469bm  [0;39m 座位20被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:14:35.098 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m16915868711469bm  [0;39m 选中座位
2023-08-09 21:14:35.098 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m16915868711469bm  [0;39m 最终选座:[DailyTrainSeat [Hash = 353851006, id=1688913097923891200, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=04, col=F, seatType=2, carriageSeatIndex=20, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:14:35.117 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m16915868711469bm  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918251]
2023-08-09 21:14:35.117 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m16915868711469bm  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918251
2023-08-09 21:14:35.117 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868711469bm  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:35.118 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868711469bm  [0;39m 参数值: DailyTrainSeat [Hash = 2084437630, id=1688913097923891200, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:14:35 CST 2023]
2023-08-09 21:14:35.119 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868711469bm  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:14:35.121 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868711469bm  [0;39m ==> Parameters: 01(String), 2023-08-09 21:14:35.117(Timestamp), 1688913097923891200(Long)
2023-08-09 21:14:35.317 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868711469bm  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918251, branchId:7854700236664918253, lockKeys:daily_train_seat:1688913097923891200
2023-08-09 21:14:35.386 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m16915868711469bm  [0;39m <==    Updates: 1
2023-08-09 21:14:35.387 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868711469bm  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:35.387 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m16915868711469bm  [0;39m 影响出发站区间:0-1
2023-08-09 21:14:35.387 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m16915868711469bm  [0;39m 影响到达站区间:0-2
2023-08-09 21:14:35.388 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868711469bm  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:14:35.390 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868711469bm  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:14:35.592 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868711469bm  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918251, branchId:7854700236664918255, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:35.637 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m16915868711469bm  [0;39m <==    Updates: 3
2023-08-09 21:14:35.879 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918238', branchId=7854700236664918242, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:35.879 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918238 7854700236664918242 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:35.879 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:35.890 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m16915868711469bm  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:35.891 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868711469bm  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:35.891 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868711469bm  [0;39m 参数值: ConfirmOrder [Hash = 1346788252, id=1689263906456997888, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:35 CST 2023, tickets=null]
2023-08-09 21:14:35.892 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868711469bm  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:35.893 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918238', branchId=7854700236664918244, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:35.894 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918238 7854700236664918244 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:35.894 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:35.894 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868711469bm  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:35.891(Timestamp), 1689263906456997888(Long)
2023-08-09 21:14:35.922 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918238', branchId=7854700236664918248, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:35.922 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918238 7854700236664918248 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:35.922 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:36.078 INFO  io.seata.rm.AbstractResourceManager               :73   [32m16915868711469bm  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918251, branchId:7854700236664918261, lockKeys:confirm_order:1689263906456997888
2023-08-09 21:14:36.114 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m16915868711469bm  [0;39m <==    Updates: 1
2023-08-09 21:14:36.115 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868711469bm  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:36.115 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m16915868711469bm  [0;39m transaction 192.168.0.102:8091:7854700236664918251 will be commit
2023-08-09 21:14:36.214 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m16915868711469bm  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918251
2023-08-09 21:14:36.214 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m16915868711469bm  [0;39m [192.168.0.102:8091:7854700236664918251] commit status: Committed
2023-08-09 21:14:36.215 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m16915868711469bm  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:36.249 INFO  com.jktickets.aspect.LogAspect                    :94   [32m16915868711469bm  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:36.249 INFO  com.jktickets.aspect.LogAspect                    :95   [32m16915868711469bm  [0;39m ------------- 结束 耗时：5100 ms -------------
2023-08-09 21:14:36.262 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586871082iea  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:36.262 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586871082iea  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:36.262 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586871082iea  [0;39m 参数值: ConfirmOrder [Hash = 892324596, id=1689263911909593088, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:36, updateTime=2023-08-09 21:14:36, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:36.263 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586871082iea  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:36.263 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586871082iea  [0;39m ==> Parameters: 1689263911909593088(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:36.262(Timestamp), 2023-08-09 21:14:36.262(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:36.291 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586871082iea  [0;39m <==    Updates: 1
2023-08-09 21:14:36.292 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586871082iea  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:36.293 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586871082iea  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:36.294 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586871082iea  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@4daf5663
2023-08-09 21:14:36.296 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586871082iea  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:36.298 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586871082iea  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:36.313 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586871082iea  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:36.315 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586871082iea  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 5, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:36.317 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586871082iea  [0;39m <==      Total: 1
2023-08-09 21:14:36.320 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586871082iea  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:36.321 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586871082iea  [0;39m 查出余票记录:DailyTrainTicket [Hash = 791238466, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=5, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:36.322 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m1691586871082iea  [0;39m 本次购票没有选座
2023-08-09 21:14:36.323 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586871082iea  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:36.323 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586871082iea  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@6ea0b850
2023-08-09 21:14:36.326 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586871082iea  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:14:36.328 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586871082iea  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:14:36.343 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586871082iea  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:14:36.344 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586871082iea  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:14:36.345 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586871082iea  [0;39m <==      Total: 1
2023-08-09 21:14:36.346 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586871082iea  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:36.346 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m1691586871082iea  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:14:36.347 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m1691586871082iea  [0;39m 从车厢2选座
2023-08-09 21:14:36.347 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586871082iea  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:36.347 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586871082iea  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@50d346e9
2023-08-09 21:14:36.349 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586871082iea  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:14:36.350 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586871082iea  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:14:36.366 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:14:36.367 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:14:36.369 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:14:36.370 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:14:36.371 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:14:36.372 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:14:36.373 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:14:36.374 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 01, 2023-08-08 22:00:35.282, 2023-08-09 21:13:59.639
2023-08-09 21:14:36.376 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 01, 2023-08-08 22:00:35.307, 2023-08-09 21:14:00.821
2023-08-09 21:14:36.377 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 01, 2023-08-08 22:00:35.334, 2023-08-09 21:14:02.395
2023-08-09 21:14:36.378 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 01, 2023-08-08 22:00:35.360, 2023-08-09 21:14:04.261
2023-08-09 21:14:36.379 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 01, 2023-08-08 22:00:35.437, 2023-08-09 21:14:05.463
2023-08-09 21:14:36.380 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 01, 2023-08-08 22:00:35.468, 2023-08-09 21:14:06.571
2023-08-09 21:14:36.381 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 01, 2023-08-08 22:00:35.495, 2023-08-09 21:14:07.766
2023-08-09 21:14:36.382 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 01, 2023-08-08 22:00:35.522, 2023-08-09 21:14:09.046
2023-08-09 21:14:36.384 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 01, 2023-08-08 22:00:35.550, 2023-08-09 21:14:10.278
2023-08-09 21:14:36.385 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 01, 2023-08-08 22:00:35.583, 2023-08-09 21:14:11.609
2023-08-09 21:14:36.385 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 01, 2023-08-08 22:00:35.610, 2023-08-09 21:14:30.613
2023-08-09 21:14:36.386 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 01, 2023-08-08 22:00:35.636, 2023-08-09 21:14:32.637
2023-08-09 21:14:36.388 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 01, 2023-08-08 22:00:35.664, 2023-08-09 21:14:33.897
2023-08-09 21:14:36.389 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 01, 2023-08-08 22:00:35.690, 2023-08-09 21:14:35.117
2023-08-09 21:14:36.390 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 00, 2023-08-08 22:00:35.716, 2023-08-08 22:00:35.716
2023-08-09 21:14:36.391 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:14:36.391 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:14:36.393 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:14:36.394 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586871082iea  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:14:36.395 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586871082iea  [0;39m <==      Total: 25
2023-08-09 21:14:36.396 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586871082iea  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:36.396 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m1691586871082iea  [0;39m 车厢2的座位数:25
2023-08-09 21:14:36.397 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.397 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.397 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.398 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.398 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.398 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.399 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.399 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.400 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.400 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.400 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.400 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.400 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.401 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位7在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.401 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.401 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位8在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.401 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.401 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位9在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.401 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.401 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位10在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.401 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.402 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位11在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.402 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.402 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位12在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.402 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.402 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位13在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.402 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.402 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位14在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.402 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.403 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位15在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.403 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.403 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位16在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.403 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.403 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位17在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.403 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.403 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位18在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.404 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.404 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位19在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.404 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.404 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586871082iea  [0;39m 座位20在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:36.404 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586871082iea  [0;39m 无选座
2023-08-09 21:14:36.404 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m1691586871082iea  [0;39m 座位21在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:14:36.404 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m1691586871082iea  [0;39m 座位21被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:14:36.404 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m1691586871082iea  [0;39m 选中座位
2023-08-09 21:14:36.404 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m1691586871082iea  [0;39m 最终选座:[DailyTrainSeat [Hash = 1025114615, id=1688913098037137408, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=05, col=A, seatType=2, carriageSeatIndex=21, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:14:36.423 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m1691586871082iea  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918263]
2023-08-09 21:14:36.423 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m1691586871082iea  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918263
2023-08-09 21:14:36.423 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586871082iea  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:36.424 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586871082iea  [0;39m 参数值: DailyTrainSeat [Hash = 1458854005, id=1688913098037137408, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:14:36 CST 2023]
2023-08-09 21:14:36.424 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586871082iea  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:14:36.425 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586871082iea  [0;39m ==> Parameters: 01(String), 2023-08-09 21:14:36.423(Timestamp), 1688913098037137408(Long)
2023-08-09 21:14:36.600 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586871082iea  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918263, branchId:7854700236664918265, lockKeys:daily_train_seat:1688913098037137408
2023-08-09 21:14:36.638 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586871082iea  [0;39m <==    Updates: 1
2023-08-09 21:14:36.638 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586871082iea  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:36.639 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m1691586871082iea  [0;39m 影响出发站区间:0-1
2023-08-09 21:14:36.639 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m1691586871082iea  [0;39m 影响到达站区间:0-2
2023-08-09 21:14:36.640 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586871082iea  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:14:36.640 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586871082iea  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:14:36.877 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586871082iea  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918263, branchId:7854700236664918267, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:36.884 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918251', branchId=7854700236664918253, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:36.885 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918251 7854700236664918253 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:36.885 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:36.901 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918251', branchId=7854700236664918255, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:36.902 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918251 7854700236664918255 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:36.902 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:36.915 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586871082iea  [0;39m <==    Updates: 3
2023-08-09 21:14:36.939 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918251', branchId=7854700236664918261, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:36.939 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918251 7854700236664918261 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:36.939 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:37.180 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m1691586871082iea  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:37.180 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586871082iea  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:37.180 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586871082iea  [0;39m 参数值: ConfirmOrder [Hash = 1273947687, id=1689263911909593088, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:37 CST 2023, tickets=null]
2023-08-09 21:14:37.181 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586871082iea  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:37.182 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586871082iea  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:37.18(Timestamp), 1689263911909593088(Long)
2023-08-09 21:14:37.362 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586871082iea  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918263, branchId:7854700236664918273, lockKeys:confirm_order:1689263911909593088
2023-08-09 21:14:37.405 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586871082iea  [0;39m <==    Updates: 1
2023-08-09 21:14:37.406 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586871082iea  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:37.406 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m1691586871082iea  [0;39m transaction 192.168.0.102:8091:7854700236664918263 will be commit
2023-08-09 21:14:37.465 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m1691586871082iea  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918263
2023-08-09 21:14:37.466 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m1691586871082iea  [0;39m [192.168.0.102:8091:7854700236664918263] commit status: Committed
2023-08-09 21:14:37.466 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586871082iea  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:37.490 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586871082iea  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:37.491 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586871082iea  [0;39m ------------- 结束 耗时：6407 ms -------------
2023-08-09 21:14:37.503 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m169158687101670k  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:37.504 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158687101670k  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:37.504 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158687101670k  [0;39m 参数值: ConfirmOrder [Hash = 387533398, id=1689263917114724352, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:37, updateTime=2023-08-09 21:14:37, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:37.504 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m169158687101670k  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:37.506 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m169158687101670k  [0;39m ==> Parameters: 1689263917114724352(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:37.503(Timestamp), 2023-08-09 21:14:37.503(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:37.530 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m169158687101670k  [0;39m <==    Updates: 1
2023-08-09 21:14:37.530 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158687101670k  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:37.530 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158687101670k  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:37.530 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158687101670k  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@741ddf28
2023-08-09 21:14:37.531 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m169158687101670k  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:37.532 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m169158687101670k  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:37.580 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m169158687101670k  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:37.581 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m169158687101670k  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 4, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:37.581 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m169158687101670k  [0;39m <==      Total: 1
2023-08-09 21:14:37.582 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158687101670k  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:37.582 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m169158687101670k  [0;39m 查出余票记录:DailyTrainTicket [Hash = 2117412714, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=4, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:37.582 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m169158687101670k  [0;39m 本次购票没有选座
2023-08-09 21:14:37.582 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158687101670k  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:37.582 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158687101670k  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@3b647469
2023-08-09 21:14:37.584 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m169158687101670k  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:14:37.584 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m169158687101670k  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:14:37.597 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m169158687101670k  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:14:37.598 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m169158687101670k  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:14:37.598 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m169158687101670k  [0;39m <==      Total: 1
2023-08-09 21:14:37.599 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158687101670k  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:37.599 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m169158687101670k  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:14:37.599 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m169158687101670k  [0;39m 从车厢2选座
2023-08-09 21:14:37.599 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158687101670k  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:37.599 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158687101670k  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@46f9afdb
2023-08-09 21:14:37.601 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m169158687101670k  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:14:37.601 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m169158687101670k  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:14:37.614 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:14:37.614 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:14:37.615 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:14:37.615 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:14:37.616 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:14:37.616 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:14:37.617 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:14:37.617 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 01, 2023-08-08 22:00:35.282, 2023-08-09 21:13:59.639
2023-08-09 21:14:37.618 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 01, 2023-08-08 22:00:35.307, 2023-08-09 21:14:00.821
2023-08-09 21:14:37.618 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 01, 2023-08-08 22:00:35.334, 2023-08-09 21:14:02.395
2023-08-09 21:14:37.619 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 01, 2023-08-08 22:00:35.360, 2023-08-09 21:14:04.261
2023-08-09 21:14:37.619 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 01, 2023-08-08 22:00:35.437, 2023-08-09 21:14:05.463
2023-08-09 21:14:37.620 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 01, 2023-08-08 22:00:35.468, 2023-08-09 21:14:06.571
2023-08-09 21:14:37.620 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 01, 2023-08-08 22:00:35.495, 2023-08-09 21:14:07.766
2023-08-09 21:14:37.621 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 01, 2023-08-08 22:00:35.522, 2023-08-09 21:14:09.046
2023-08-09 21:14:37.621 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 01, 2023-08-08 22:00:35.550, 2023-08-09 21:14:10.278
2023-08-09 21:14:37.621 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 01, 2023-08-08 22:00:35.583, 2023-08-09 21:14:11.609
2023-08-09 21:14:37.622 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 01, 2023-08-08 22:00:35.610, 2023-08-09 21:14:30.613
2023-08-09 21:14:37.622 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 01, 2023-08-08 22:00:35.636, 2023-08-09 21:14:32.637
2023-08-09 21:14:37.623 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 01, 2023-08-08 22:00:35.664, 2023-08-09 21:14:33.897
2023-08-09 21:14:37.623 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 01, 2023-08-08 22:00:35.690, 2023-08-09 21:14:35.117
2023-08-09 21:14:37.623 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 01, 2023-08-08 22:00:35.716, 2023-08-09 21:14:36.423
2023-08-09 21:14:37.624 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 00, 2023-08-08 22:00:35.760, 2023-08-08 22:00:35.760
2023-08-09 21:14:37.625 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:14:37.625 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:14:37.625 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687101670k  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:14:37.625 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m169158687101670k  [0;39m <==      Total: 25
2023-08-09 21:14:37.626 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158687101670k  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:37.626 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m169158687101670k  [0;39m 车厢2的座位数:25
2023-08-09 21:14:37.626 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.626 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.626 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.626 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.626 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.626 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.627 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.627 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.627 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.627 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.627 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.627 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.628 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.628 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位7在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.628 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.628 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位8在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.628 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.628 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位9在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.628 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.628 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位10在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.628 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.628 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位11在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.628 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.629 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位12在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.629 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.629 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位13在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.629 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.629 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位14在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.629 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.629 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位15在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.629 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.629 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位16在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.629 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.629 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位17在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.629 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.630 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位18在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.630 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.630 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位19在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.630 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.630 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位20在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.630 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.630 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687101670k  [0;39m 座位21在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:37.630 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687101670k  [0;39m 无选座
2023-08-09 21:14:37.630 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m169158687101670k  [0;39m 座位22在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:14:37.631 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m169158687101670k  [0;39m 座位22被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:14:37.631 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m169158687101670k  [0;39m 选中座位
2023-08-09 21:14:37.631 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m169158687101670k  [0;39m 最终选座:[DailyTrainSeat [Hash = 642805154, id=1688913098217492480, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=05, col=B, seatType=2, carriageSeatIndex=22, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:14:37.652 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m169158687101670k  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918275]
2023-08-09 21:14:37.652 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m169158687101670k  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918275
2023-08-09 21:14:37.652 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158687101670k  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:37.653 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158687101670k  [0;39m 参数值: DailyTrainSeat [Hash = 653312213, id=1688913098217492480, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:14:37 CST 2023]
2023-08-09 21:14:37.653 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m169158687101670k  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:14:37.654 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m169158687101670k  [0;39m ==> Parameters: 01(String), 2023-08-09 21:14:37.652(Timestamp), 1688913098217492480(Long)
2023-08-09 21:14:37.806 INFO  io.seata.rm.AbstractResourceManager               :73   [32m169158687101670k  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918275, branchId:7854700236664918277, lockKeys:daily_train_seat:1688913098217492480
2023-08-09 21:14:37.847 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m169158687101670k  [0;39m <==    Updates: 1
2023-08-09 21:14:37.848 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158687101670k  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:37.848 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m169158687101670k  [0;39m 影响出发站区间:0-1
2023-08-09 21:14:37.848 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m169158687101670k  [0;39m 影响到达站区间:0-2
2023-08-09 21:14:37.849 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m169158687101670k  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:14:37.849 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m169158687101670k  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:14:37.898 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918263', branchId=7854700236664918265, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:37.899 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918263 7854700236664918265 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:37.899 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:37.919 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918263', branchId=7854700236664918267, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:37.919 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918263 7854700236664918267 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:37.920 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:37.953 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918263', branchId=7854700236664918273, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:37.954 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918263 7854700236664918273 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:37.954 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:38.092 INFO  io.seata.rm.AbstractResourceManager               :73   [32m169158687101670k  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918275, branchId:7854700236664918281, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:38.134 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m169158687101670k  [0;39m <==    Updates: 3
2023-08-09 21:14:38.366 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m169158687101670k  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:38.367 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158687101670k  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:38.368 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158687101670k  [0;39m 参数值: ConfirmOrder [Hash = 1855499289, id=1689263917114724352, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:38 CST 2023, tickets=null]
2023-08-09 21:14:38.369 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m169158687101670k  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:38.370 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m169158687101670k  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:38.367(Timestamp), 1689263917114724352(Long)
2023-08-09 21:14:38.551 INFO  io.seata.rm.AbstractResourceManager               :73   [32m169158687101670k  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918275, branchId:7854700236664918285, lockKeys:confirm_order:1689263917114724352
2023-08-09 21:14:38.590 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m169158687101670k  [0;39m <==    Updates: 1
2023-08-09 21:14:38.590 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158687101670k  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:38.590 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m169158687101670k  [0;39m transaction 192.168.0.102:8091:7854700236664918275 will be commit
2023-08-09 21:14:38.658 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m169158687101670k  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918275
2023-08-09 21:14:38.658 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m169158687101670k  [0;39m [192.168.0.102:8091:7854700236664918275] commit status: Committed
2023-08-09 21:14:38.658 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m169158687101670k  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:38.705 INFO  com.jktickets.aspect.LogAspect                    :94   [32m169158687101670k  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:38.705 INFO  com.jktickets.aspect.LogAspect                    :95   [32m169158687101670k  [0;39m ------------- 结束 耗时：7687 ms -------------
2023-08-09 21:14:38.744 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586870947s14  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:38.745 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870947s14  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:38.745 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870947s14  [0;39m 参数值: ConfirmOrder [Hash = 950400454, id=1689263922324049920, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:38, updateTime=2023-08-09 21:14:38, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:38.745 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870947s14  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:38.746 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870947s14  [0;39m ==> Parameters: 1689263922324049920(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:38.744(Timestamp), 2023-08-09 21:14:38.744(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:38.773 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870947s14  [0;39m <==    Updates: 1
2023-08-09 21:14:38.773 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870947s14  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:38.774 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870947s14  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:38.774 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870947s14  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@46349385
2023-08-09 21:14:38.775 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870947s14  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:38.776 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870947s14  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:38.789 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586870947s14  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:38.789 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586870947s14  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 3, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:38.790 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870947s14  [0;39m <==      Total: 1
2023-08-09 21:14:38.790 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870947s14  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:38.790 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586870947s14  [0;39m 查出余票记录:DailyTrainTicket [Hash = 610854493, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=3, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:38.791 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m1691586870947s14  [0;39m 本次购票没有选座
2023-08-09 21:14:38.791 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870947s14  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:38.791 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870947s14  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@b74e26
2023-08-09 21:14:38.792 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586870947s14  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:14:38.793 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586870947s14  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:14:38.805 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586870947s14  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:14:38.807 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586870947s14  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:14:38.808 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586870947s14  [0;39m <==      Total: 1
2023-08-09 21:14:38.808 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870947s14  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:38.809 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m1691586870947s14  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:14:38.809 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m1691586870947s14  [0;39m 从车厢2选座
2023-08-09 21:14:38.809 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870947s14  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:38.810 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870947s14  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@47d5c1f
2023-08-09 21:14:38.812 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586870947s14  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:14:38.813 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586870947s14  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:14:38.828 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:14:38.829 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:14:38.830 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:14:38.831 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:14:38.832 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:14:38.833 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:14:38.834 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:14:38.836 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 01, 2023-08-08 22:00:35.282, 2023-08-09 21:13:59.639
2023-08-09 21:14:38.838 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 01, 2023-08-08 22:00:35.307, 2023-08-09 21:14:00.821
2023-08-09 21:14:38.839 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 01, 2023-08-08 22:00:35.334, 2023-08-09 21:14:02.395
2023-08-09 21:14:38.840 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 01, 2023-08-08 22:00:35.360, 2023-08-09 21:14:04.261
2023-08-09 21:14:38.842 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 01, 2023-08-08 22:00:35.437, 2023-08-09 21:14:05.463
2023-08-09 21:14:38.844 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 01, 2023-08-08 22:00:35.468, 2023-08-09 21:14:06.571
2023-08-09 21:14:38.846 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 01, 2023-08-08 22:00:35.495, 2023-08-09 21:14:07.766
2023-08-09 21:14:38.847 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 01, 2023-08-08 22:00:35.522, 2023-08-09 21:14:09.046
2023-08-09 21:14:38.849 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 01, 2023-08-08 22:00:35.550, 2023-08-09 21:14:10.278
2023-08-09 21:14:38.851 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 01, 2023-08-08 22:00:35.583, 2023-08-09 21:14:11.609
2023-08-09 21:14:38.853 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 01, 2023-08-08 22:00:35.610, 2023-08-09 21:14:30.613
2023-08-09 21:14:38.854 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 01, 2023-08-08 22:00:35.636, 2023-08-09 21:14:32.637
2023-08-09 21:14:38.856 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 01, 2023-08-08 22:00:35.664, 2023-08-09 21:14:33.897
2023-08-09 21:14:38.858 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 01, 2023-08-08 22:00:35.690, 2023-08-09 21:14:35.117
2023-08-09 21:14:38.859 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 01, 2023-08-08 22:00:35.716, 2023-08-09 21:14:36.423
2023-08-09 21:14:38.861 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 01, 2023-08-08 22:00:35.760, 2023-08-09 21:14:37.652
2023-08-09 21:14:38.862 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 00, 2023-08-08 22:00:35.803, 2023-08-08 22:00:35.803
2023-08-09 21:14:38.863 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:14:38.864 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870947s14  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:14:38.864 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586870947s14  [0;39m <==      Total: 25
2023-08-09 21:14:38.865 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870947s14  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:38.865 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m1691586870947s14  [0;39m 车厢2的座位数:25
2023-08-09 21:14:38.865 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.866 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.866 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.866 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.866 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.866 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.866 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.866 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.866 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.866 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.866 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.866 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.867 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.867 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位7在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.867 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.867 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位8在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.867 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.867 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位9在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.868 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.868 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位10在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.868 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.868 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位11在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.868 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.868 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位12在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.868 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.868 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位13在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.868 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.869 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位14在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.869 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.869 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位15在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.869 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.869 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位16在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.869 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.869 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位17在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.869 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.869 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位18在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.869 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.870 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位19在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.870 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.870 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位20在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.870 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.870 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位21在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.870 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.870 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870947s14  [0;39m 座位22在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:38.870 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870947s14  [0;39m 无选座
2023-08-09 21:14:38.870 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m1691586870947s14  [0;39m 座位23在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:14:38.870 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m1691586870947s14  [0;39m 座位23被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:14:38.870 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m1691586870947s14  [0;39m 选中座位
2023-08-09 21:14:38.871 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m1691586870947s14  [0;39m 最终选座:[DailyTrainSeat [Hash = 1563999347, id=1688913098402041856, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=05, col=C, seatType=2, carriageSeatIndex=23, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:14:38.883 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918275', branchId=7854700236664918277, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:38.884 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918275 7854700236664918277 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:38.884 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:38.887 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m1691586870947s14  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918287]
2023-08-09 21:14:38.887 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m1691586870947s14  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918287
2023-08-09 21:14:38.887 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870947s14  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:38.887 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870947s14  [0;39m 参数值: DailyTrainSeat [Hash = 385250881, id=1688913098402041856, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:14:38 CST 2023]
2023-08-09 21:14:38.888 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586870947s14  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:14:38.888 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586870947s14  [0;39m ==> Parameters: 01(String), 2023-08-09 21:14:38.887(Timestamp), 1688913098402041856(Long)
2023-08-09 21:14:38.903 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918275', branchId=7854700236664918281, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:38.903 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918275 7854700236664918281 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:38.903 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:38.944 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918275', branchId=7854700236664918285, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:38.945 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918275 7854700236664918285 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:38.945 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:39.051 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586870947s14  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918287, branchId:7854700236664918290, lockKeys:daily_train_seat:1688913098402041856
2023-08-09 21:14:39.090 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586870947s14  [0;39m <==    Updates: 1
2023-08-09 21:14:39.091 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870947s14  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:39.091 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m1691586870947s14  [0;39m 影响出发站区间:0-1
2023-08-09 21:14:39.091 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m1691586870947s14  [0;39m 影响到达站区间:0-2
2023-08-09 21:14:39.092 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586870947s14  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:14:39.093 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586870947s14  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:14:39.298 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586870947s14  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918287, branchId:7854700236664918292, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:39.339 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586870947s14  [0;39m <==    Updates: 3
2023-08-09 21:14:39.553 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m1691586870947s14  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:39.553 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870947s14  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:39.553 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870947s14  [0;39m 参数值: ConfirmOrder [Hash = 97466432, id=1689263922324049920, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:39 CST 2023, tickets=null]
2023-08-09 21:14:39.554 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586870947s14  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:39.555 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586870947s14  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:39.553(Timestamp), 1689263922324049920(Long)
2023-08-09 21:14:39.716 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586870947s14  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918287, branchId:7854700236664918296, lockKeys:confirm_order:1689263922324049920
2023-08-09 21:14:39.759 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586870947s14  [0;39m <==    Updates: 1
2023-08-09 21:14:39.760 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870947s14  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:39.760 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m1691586870947s14  [0;39m transaction 192.168.0.102:8091:7854700236664918287 will be commit
2023-08-09 21:14:39.815 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m1691586870947s14  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918287
2023-08-09 21:14:39.816 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m1691586870947s14  [0;39m [192.168.0.102:8091:7854700236664918287] commit status: Committed
2023-08-09 21:14:39.816 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586870947s14  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:39.847 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586870947s14  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:39.848 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586870947s14  [0;39m ------------- 结束 耗时：8899 ms -------------
2023-08-09 21:14:39.863 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m169158687088484i  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:39.864 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158687088484i  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:39.864 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158687088484i  [0;39m 参数值: ConfirmOrder [Hash = 331346824, id=1689263927017476096, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:39, updateTime=2023-08-09 21:14:39, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:39.864 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m169158687088484i  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:39.865 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m169158687088484i  [0;39m ==> Parameters: 1689263927017476096(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:39.864(Timestamp), 2023-08-09 21:14:39.864(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:39.882 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918287', branchId=7854700236664918290, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:39.882 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918287 7854700236664918290 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:39.882 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:39.894 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m169158687088484i  [0;39m <==    Updates: 1
2023-08-09 21:14:39.895 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158687088484i  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:39.895 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158687088484i  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:39.895 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158687088484i  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@4feb138a
2023-08-09 21:14:39.897 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m169158687088484i  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:39.897 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m169158687088484i  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:39.898 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918287', branchId=7854700236664918292, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:39.898 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918287 7854700236664918292 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:39.898 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:39.910 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m169158687088484i  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:39.911 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m169158687088484i  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 2, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:39.912 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m169158687088484i  [0;39m <==      Total: 1
2023-08-09 21:14:39.912 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158687088484i  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:39.912 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m169158687088484i  [0;39m 查出余票记录:DailyTrainTicket [Hash = 1345860773, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=2, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:39.913 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m169158687088484i  [0;39m 本次购票没有选座
2023-08-09 21:14:39.913 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158687088484i  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:39.913 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158687088484i  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@4cc5e867
2023-08-09 21:14:39.914 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m169158687088484i  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:14:39.915 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m169158687088484i  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:14:39.927 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918287', branchId=7854700236664918296, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:39.927 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m169158687088484i  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:14:39.927 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918287 7854700236664918296 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:39.927 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:39.928 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m169158687088484i  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:14:39.928 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m169158687088484i  [0;39m <==      Total: 1
2023-08-09 21:14:39.928 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158687088484i  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:39.928 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m169158687088484i  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:14:39.929 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m169158687088484i  [0;39m 从车厢2选座
2023-08-09 21:14:39.929 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158687088484i  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:39.929 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158687088484i  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@5a4b9271
2023-08-09 21:14:39.930 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m169158687088484i  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:14:39.930 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m169158687088484i  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:14:39.951 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:14:39.951 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:14:39.951 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:14:39.952 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:14:39.953 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:14:39.953 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:14:39.954 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:14:39.954 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 01, 2023-08-08 22:00:35.282, 2023-08-09 21:13:59.639
2023-08-09 21:14:39.955 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 01, 2023-08-08 22:00:35.307, 2023-08-09 21:14:00.821
2023-08-09 21:14:39.956 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 01, 2023-08-08 22:00:35.334, 2023-08-09 21:14:02.395
2023-08-09 21:14:39.956 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 01, 2023-08-08 22:00:35.360, 2023-08-09 21:14:04.261
2023-08-09 21:14:39.957 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 01, 2023-08-08 22:00:35.437, 2023-08-09 21:14:05.463
2023-08-09 21:14:39.957 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 01, 2023-08-08 22:00:35.468, 2023-08-09 21:14:06.571
2023-08-09 21:14:39.958 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 01, 2023-08-08 22:00:35.495, 2023-08-09 21:14:07.766
2023-08-09 21:14:39.958 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 01, 2023-08-08 22:00:35.522, 2023-08-09 21:14:09.046
2023-08-09 21:14:39.959 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 01, 2023-08-08 22:00:35.550, 2023-08-09 21:14:10.278
2023-08-09 21:14:39.959 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 01, 2023-08-08 22:00:35.583, 2023-08-09 21:14:11.609
2023-08-09 21:14:39.959 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 01, 2023-08-08 22:00:35.610, 2023-08-09 21:14:30.613
2023-08-09 21:14:39.960 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 01, 2023-08-08 22:00:35.636, 2023-08-09 21:14:32.637
2023-08-09 21:14:39.961 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 01, 2023-08-08 22:00:35.664, 2023-08-09 21:14:33.897
2023-08-09 21:14:39.961 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 01, 2023-08-08 22:00:35.690, 2023-08-09 21:14:35.117
2023-08-09 21:14:39.962 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 01, 2023-08-08 22:00:35.716, 2023-08-09 21:14:36.423
2023-08-09 21:14:39.962 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 01, 2023-08-08 22:00:35.760, 2023-08-09 21:14:37.652
2023-08-09 21:14:39.963 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 01, 2023-08-08 22:00:35.803, 2023-08-09 21:14:38.887
2023-08-09 21:14:39.963 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 00, 2023-08-08 22:00:35.833, 2023-08-08 22:00:35.833
2023-08-09 21:14:39.964 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m169158687088484i  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:14:39.964 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m169158687088484i  [0;39m <==      Total: 25
2023-08-09 21:14:39.964 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158687088484i  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:39.965 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m169158687088484i  [0;39m 车厢2的座位数:25
2023-08-09 21:14:39.965 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.965 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.965 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.965 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.965 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.965 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.965 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.965 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.965 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.965 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.965 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.966 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.966 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.966 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位7在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.966 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.966 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位8在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.966 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.966 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位9在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.966 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.966 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位10在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.966 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.966 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位11在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.966 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.967 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位12在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.967 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.967 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位13在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.967 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.967 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位14在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.967 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.967 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位15在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.967 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.968 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位16在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.968 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.968 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位17在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.968 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.968 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位18在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.968 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.968 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位19在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.968 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.968 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位20在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.969 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.969 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位21在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.969 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.969 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位22在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.969 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.969 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m169158687088484i  [0;39m 座位23在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:39.969 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m169158687088484i  [0;39m 无选座
2023-08-09 21:14:39.969 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m169158687088484i  [0;39m 座位24在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:14:39.969 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m169158687088484i  [0;39m 座位24被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:14:39.969 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m169158687088484i  [0;39m 选中座位
2023-08-09 21:14:39.969 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m169158687088484i  [0;39m 最终选座:[DailyTrainSeat [Hash = 1535472345, id=1688913098527870976, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=05, col=D, seatType=2, carriageSeatIndex=24, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:14:39.988 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m169158687088484i  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918299]
2023-08-09 21:14:39.989 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m169158687088484i  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918299
2023-08-09 21:14:39.989 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158687088484i  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:39.989 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158687088484i  [0;39m 参数值: DailyTrainSeat [Hash = 687209016, id=1688913098527870976, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:14:39 CST 2023]
2023-08-09 21:14:39.990 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m169158687088484i  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:14:39.991 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m169158687088484i  [0;39m ==> Parameters: 01(String), 2023-08-09 21:14:39.989(Timestamp), 1688913098527870976(Long)
2023-08-09 21:14:40.205 INFO  io.seata.rm.AbstractResourceManager               :73   [32m169158687088484i  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918299, branchId:7854700236664918301, lockKeys:daily_train_seat:1688913098527870976
2023-08-09 21:14:40.246 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m169158687088484i  [0;39m <==    Updates: 1
2023-08-09 21:14:40.247 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158687088484i  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:40.247 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m169158687088484i  [0;39m 影响出发站区间:0-1
2023-08-09 21:14:40.247 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m169158687088484i  [0;39m 影响到达站区间:0-2
2023-08-09 21:14:40.247 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m169158687088484i  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:14:40.248 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m169158687088484i  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:14:40.471 INFO  io.seata.rm.AbstractResourceManager               :73   [32m169158687088484i  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918299, branchId:7854700236664918303, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:40.521 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m169158687088484i  [0;39m <==    Updates: 3
2023-08-09 21:14:40.751 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m169158687088484i  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:40.751 INFO  com.jktickets.aspect.LogAspect                    :106  [32m169158687088484i  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:40.752 INFO  com.jktickets.aspect.LogAspect                    :111  [32m169158687088484i  [0;39m 参数值: ConfirmOrder [Hash = 973854153, id=1689263927017476096, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:40 CST 2023, tickets=null]
2023-08-09 21:14:40.753 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m169158687088484i  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:40.754 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m169158687088484i  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:40.751(Timestamp), 1689263927017476096(Long)
2023-08-09 21:14:40.963 INFO  io.seata.rm.AbstractResourceManager               :73   [32m169158687088484i  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918299, branchId:7854700236664918307, lockKeys:confirm_order:1689263927017476096
2023-08-09 21:14:41.000 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m169158687088484i  [0;39m <==    Updates: 1
2023-08-09 21:14:41.001 INFO  com.jktickets.aspect.LogAspect                    :120  [32m169158687088484i  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:41.001 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m169158687088484i  [0;39m transaction 192.168.0.102:8091:7854700236664918299 will be commit
2023-08-09 21:14:41.063 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m169158687088484i  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918299
2023-08-09 21:14:41.063 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m169158687088484i  [0;39m [192.168.0.102:8091:7854700236664918299] commit status: Committed
2023-08-09 21:14:41.063 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m169158687088484i  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:41.089 INFO  com.jktickets.aspect.LogAspect                    :94   [32m169158687088484i  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:41.089 INFO  com.jktickets.aspect.LogAspect                    :95   [32m169158687088484i  [0;39m ------------- 结束 耗时：10203 ms -------------
2023-08-09 21:14:41.100 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586870816l7i  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:41.100 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870816l7i  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:41.101 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870816l7i  [0;39m 参数值: ConfirmOrder [Hash = 960734962, id=1689263932201635840, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:41, updateTime=2023-08-09 21:14:41, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:41.101 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870816l7i  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:41.102 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870816l7i  [0;39m ==> Parameters: 1689263932201635840(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:41.1(Timestamp), 2023-08-09 21:14:41.1(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:41.127 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870816l7i  [0;39m <==    Updates: 1
2023-08-09 21:14:41.127 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870816l7i  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:41.128 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870816l7i  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:41.128 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870816l7i  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@656b1e3a
2023-08-09 21:14:41.129 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870816l7i  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:41.130 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870816l7i  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:41.146 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586870816l7i  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:41.147 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 1, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:41.147 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870816l7i  [0;39m <==      Total: 1
2023-08-09 21:14:41.148 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870816l7i  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:41.148 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586870816l7i  [0;39m 查出余票记录:DailyTrainTicket [Hash = 917518461, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=1, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:41.148 INFO  com.jktickets.service.ConfirmOrderService         :286  [32m1691586870816l7i  [0;39m 本次购票没有选座
2023-08-09 21:14:41.148 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870816l7i  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:41.148 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870816l7i  [0;39m 参数值: com.jktickets.domain.DailyTrainCarriageExample@5e1cfbb8
2023-08-09 21:14:41.149 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586870816l7i  [0;39m ==>  Preparing: select id, `date`, train_code, `index`, seat_type, seat_count, `row_count`, col_count, create_time, update_time from daily_train_carriage WHERE ( `date` = ? and train_code = ? and seat_type = ? )
2023-08-09 21:14:41.149 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586870816l7i  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(String)
2023-08-09 21:14:41.165 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586870816l7i  [0;39m <==    Columns: id, date, train_code, index, seat_type, seat_count, row_count, col_count, create_time, update_time
2023-08-09 21:14:41.166 TRACE c.j.m.DailyTrainCarriageMapper.selectByExample    :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913090554499072, 2023-08-08, 01, 2, 2, 25, 5, 5, 2023-08-08 22:00:33.933, 2023-08-08 22:00:33.933
2023-08-09 21:14:41.166 DEBUG c.j.m.DailyTrainCarriageMapper.selectByExample    :137  [32m1691586870816l7i  [0;39m <==      Total: 1
2023-08-09 21:14:41.167 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870816l7i  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainCarriageMapper.selectByExample(DailyTrainCarriageExample))
2023-08-09 21:14:41.167 INFO  com.jktickets.service.ConfirmOrderService         :340  [32m1691586870816l7i  [0;39m 共查出1个符合条件的车厢
2023-08-09 21:14:41.167 INFO  com.jktickets.service.ConfirmOrderService         :345  [32m1691586870816l7i  [0;39m 从车厢2选座
2023-08-09 21:14:41.167 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870816l7i  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:41.168 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870816l7i  [0;39m 参数值: com.jktickets.domain.DailyTrainSeatExample@720ddfdd
2023-08-09 21:14:41.168 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586870816l7i  [0;39m ==>  Preparing: select id, `date`, train_code, carriage_index, `row`, col, seat_type, carriage_seat_index, sell, create_time, update_time from daily_train_seat WHERE ( `date` = ? and train_code = ? and carriage_index = ? ) order by carriage_seat_index asc
2023-08-09 21:14:41.169 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586870816l7i  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 2(Integer)
2023-08-09 21:14:41.182 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==    Columns: id, date, train_code, carriage_index, row, col, seat_type, carriage_seat_index, sell, create_time, update_time
2023-08-09 21:14:41.182 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913095457640448, 2023-08-08, 01, 2, 01, A, 2, 1, 01, 2023-08-08 22:00:35.102, 2023-08-09 21:12:52.666
2023-08-09 21:14:41.182 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913095579275264, 2023-08-08, 01, 2, 01, B, 2, 2, 01, 2023-08-08 22:00:35.130, 2023-08-09 21:13:53.853
2023-08-09 21:14:41.183 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913095688327168, 2023-08-08, 01, 2, 01, C, 2, 3, 01, 2023-08-08 22:00:35.157, 2023-08-09 21:13:55.038
2023-08-09 21:14:41.184 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913095818350592, 2023-08-08, 01, 2, 01, D, 2, 4, 01, 2023-08-08 22:00:35.188, 2023-08-09 21:13:56.238
2023-08-09 21:14:41.184 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913095994511360, 2023-08-08, 01, 2, 01, F, 2, 5, 01, 2023-08-08 22:00:35.230, 2023-08-09 21:13:57.388
2023-08-09 21:14:41.185 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913096095174656, 2023-08-08, 01, 2, 02, A, 2, 6, 01, 2023-08-08 22:00:35.254, 2023-08-09 21:13:58.500
2023-08-09 21:14:41.185 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913096212615168, 2023-08-08, 01, 2, 02, B, 2, 7, 01, 2023-08-08 22:00:35.282, 2023-08-09 21:13:59.639
2023-08-09 21:14:41.185 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913096321667072, 2023-08-08, 01, 2, 02, C, 2, 8, 01, 2023-08-08 22:00:35.307, 2023-08-09 21:14:00.821
2023-08-09 21:14:41.186 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913096434913280, 2023-08-08, 01, 2, 02, D, 2, 9, 01, 2023-08-08 22:00:35.334, 2023-08-09 21:14:02.395
2023-08-09 21:14:41.186 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913096539770880, 2023-08-08, 01, 2, 02, F, 2, 10, 01, 2023-08-08 22:00:35.360, 2023-08-09 21:14:04.261
2023-08-09 21:14:41.187 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913096862732288, 2023-08-08, 01, 2, 03, A, 2, 11, 01, 2023-08-08 22:00:35.437, 2023-08-09 21:14:05.463
2023-08-09 21:14:41.188 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913096992755712, 2023-08-08, 01, 2, 03, B, 2, 12, 01, 2023-08-08 22:00:35.468, 2023-08-09 21:14:06.571
2023-08-09 21:14:41.188 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913097106001920, 2023-08-08, 01, 2, 03, C, 2, 13, 01, 2023-08-08 22:00:35.495, 2023-08-09 21:14:07.766
2023-08-09 21:14:41.189 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913097219248128, 2023-08-08, 01, 2, 03, D, 2, 14, 01, 2023-08-08 22:00:35.522, 2023-08-09 21:14:09.046
2023-08-09 21:14:41.189 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913097336688640, 2023-08-08, 01, 2, 03, F, 2, 15, 01, 2023-08-08 22:00:35.550, 2023-08-09 21:14:10.278
2023-08-09 21:14:41.190 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913097475100672, 2023-08-08, 01, 2, 04, A, 2, 16, 01, 2023-08-08 22:00:35.583, 2023-08-09 21:14:11.609
2023-08-09 21:14:41.190 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913097588346880, 2023-08-08, 01, 2, 04, B, 2, 17, 01, 2023-08-08 22:00:35.610, 2023-08-09 21:14:30.613
2023-08-09 21:14:41.190 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913097697398784, 2023-08-08, 01, 2, 04, C, 2, 18, 01, 2023-08-08 22:00:35.636, 2023-08-09 21:14:32.637
2023-08-09 21:14:41.191 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913097814839296, 2023-08-08, 01, 2, 04, D, 2, 19, 01, 2023-08-08 22:00:35.664, 2023-08-09 21:14:33.897
2023-08-09 21:14:41.192 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913097923891200, 2023-08-08, 01, 2, 04, F, 2, 20, 01, 2023-08-08 22:00:35.690, 2023-08-09 21:14:35.117
2023-08-09 21:14:41.192 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913098037137408, 2023-08-08, 01, 2, 05, A, 2, 21, 01, 2023-08-08 22:00:35.716, 2023-08-09 21:14:36.423
2023-08-09 21:14:41.192 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913098217492480, 2023-08-08, 01, 2, 05, B, 2, 22, 01, 2023-08-08 22:00:35.760, 2023-08-09 21:14:37.652
2023-08-09 21:14:41.193 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913098402041856, 2023-08-08, 01, 2, 05, C, 2, 23, 01, 2023-08-08 22:00:35.803, 2023-08-09 21:14:38.887
2023-08-09 21:14:41.193 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913098527870976, 2023-08-08, 01, 2, 05, D, 2, 24, 01, 2023-08-08 22:00:35.833, 2023-08-09 21:14:39.989
2023-08-09 21:14:41.194 TRACE c.j.mapper.DailyTrainSeatMapper.selectByExample   :143  [32m1691586870816l7i  [0;39m <==        Row: 1688913098645311488, 2023-08-08, 01, 2, 05, F, 2, 25, 00, 2023-08-08 22:00:35.862, 2023-08-08 22:00:35.862
2023-08-09 21:14:41.194 DEBUG c.j.mapper.DailyTrainSeatMapper.selectByExample   :137  [32m1691586870816l7i  [0;39m <==      Total: 25
2023-08-09 21:14:41.194 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870816l7i  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainSeatMapper.selectByExample(DailyTrainSeatExample))
2023-08-09 21:14:41.194 INFO  com.jktickets.service.ConfirmOrderService         :353  [32m1691586870816l7i  [0;39m 车厢2的座位数:25
2023-08-09 21:14:41.194 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.195 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位1在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.195 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.195 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位2在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.195 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.195 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位3在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.195 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.195 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位4在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.195 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.195 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位5在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.195 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.195 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位6在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.195 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.195 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位7在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.196 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.196 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位8在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.196 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.196 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位9在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.196 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.196 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位10在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.196 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.196 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位11在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.196 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.196 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位12在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.196 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.196 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位13在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.196 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.197 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位14在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.197 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.197 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位15在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.197 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.197 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位16在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.197 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.197 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位17在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.197 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.197 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位18在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.197 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.197 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位19在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.197 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.197 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位20在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.198 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.198 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位21在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.198 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.198 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位22在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.198 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.198 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位23在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.198 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.198 INFO  com.jktickets.service.ConfirmOrderService         :480  [32m1691586870816l7i  [0;39m 座位24在本次车站区间1-2已售过票,不可选中该座位
2023-08-09 21:14:41.198 INFO  com.jktickets.service.ConfirmOrderService         :383  [32m1691586870816l7i  [0;39m 无选座
2023-08-09 21:14:41.198 INFO  com.jktickets.service.ConfirmOrderService         :485  [32m1691586870816l7i  [0;39m 座位25在本次车站区间1-2没有售过票,可选中该座位
2023-08-09 21:14:41.198 INFO  com.jktickets.service.ConfirmOrderService         :504  [32m1691586870816l7i  [0;39m 座位25被选中，原售票信息:00,车站区间:1-2,即:01,最终售票信息:01
2023-08-09 21:14:41.198 INFO  com.jktickets.service.ConfirmOrderService         :396  [32m1691586870816l7i  [0;39m 选中座位
2023-08-09 21:14:41.198 INFO  com.jktickets.service.ConfirmOrderService         :295  [32m1691586870816l7i  [0;39m 最终选座:[DailyTrainSeat [Hash = 2083618843, id=1688913098645311488, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, carriageIndex=2, row=05, col=F, seatType=2, carriageSeatIndex=25, sell=01, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]]
2023-08-09 21:14:41.216 INFO  io.seata.tm.api.DefaultGlobalTransaction          :117  [32m1691586870816l7i  [0;39m Begin new global transaction [192.168.0.102:8091:7854700236664918310]
2023-08-09 21:14:41.216 INFO  com.jktickets.service.AfterConfirmOrderService    :74   [32m1691586870816l7i  [0;39m Seata全局事务ID:192.168.0.102:8091:7854700236664918310
2023-08-09 21:14:41.216 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870816l7i  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:41.216 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870816l7i  [0;39m 参数值: DailyTrainSeat [Hash = 1108401358, id=1688913098645311488, date=null, trainCode=null, carriageIndex=null, row=null, col=null, seatType=null, carriageSeatIndex=null, sell=01, createTime=null, updateTime=Wed Aug 09 21:14:41 CST 2023]
2023-08-09 21:14:41.217 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586870816l7i  [0;39m ==>  Preparing: update daily_train_seat SET sell = ?, update_time = ? where id = ?
2023-08-09 21:14:41.217 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586870816l7i  [0;39m ==> Parameters: 01(String), 2023-08-09 21:14:41.216(Timestamp), 1688913098645311488(Long)
2023-08-09 21:14:41.401 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586870816l7i  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918310, branchId:7854700236664918312, lockKeys:daily_train_seat:1688913098645311488
2023-08-09 21:14:41.447 DEBUG c.j.m.D.updateByPrimaryKeySelective               :137  [32m1691586870816l7i  [0;39m <==    Updates: 1
2023-08-09 21:14:41.447 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870816l7i  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.DailyTrainSeatMapper.updateByPrimaryKeySelective(DailyTrainSeat))
2023-08-09 21:14:41.448 INFO  com.jktickets.service.AfterConfirmOrderService    :105  [32m1691586870816l7i  [0;39m 影响出发站区间:0-1
2023-08-09 21:14:41.448 INFO  com.jktickets.service.AfterConfirmOrderService    :117  [32m1691586870816l7i  [0;39m 影响到达站区间:0-2
2023-08-09 21:14:41.448 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586870816l7i  [0;39m ==>  Preparing: update daily_train_ticket set edz = edz -1 where `date` = ? and train_code = ? and start_index >= ? and ? >=start_index and end_index >= ? and ? >= end_index
2023-08-09 21:14:41.449 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586870816l7i  [0;39m ==> Parameters: 2023-08-08 00:00:00.0(Timestamp), 01(String), 0(Integer), 1(Integer), 0(Integer), 2(Integer)
2023-08-09 21:14:41.695 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586870816l7i  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918310, branchId:7854700236664918314, lockKeys:daily_train_ticket:1688913099110879232,1688913099521921024,1688913100071374848
2023-08-09 21:14:41.738 DEBUG c.j.m.c.D.updateCountBySell                       :137  [32m1691586870816l7i  [0;39m <==    Updates: 3
2023-08-09 21:14:41.899 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918299', branchId=7854700236664918301, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:41.899 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918299 7854700236664918301 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:41.900 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:41.919 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918299', branchId=7854700236664918303, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:41.919 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918299 7854700236664918303 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:41.919 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:41.952 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918299', branchId=7854700236664918307, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:41.953 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918299 7854700236664918307 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:41.953 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:42.024 INFO  com.jktickets.service.AfterConfirmOrderService    :144  [32m1691586870816l7i  [0;39m 调用member接口，返回CommonRes(success=true, code=0, message=, result=添加Ticket成功)
2023-08-09 21:14:42.024 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870816l7i  [0;39m 执行SQL:  updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:42.025 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870816l7i  [0;39m 参数值: ConfirmOrder [Hash = 388414819, id=1689263932201635840, memberId=null, date=null, trainCode=null, start=null, end=null, dailyTrainTicketId=null, status=S, createTime=null, updateTime=Wed Aug 09 21:14:42 CST 2023, tickets=null]
2023-08-09 21:14:42.026 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586870816l7i  [0;39m ==>  Preparing: update confirm_order SET `status` = ?, update_time = ? where id = ?
2023-08-09 21:14:42.026 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586870816l7i  [0;39m ==> Parameters: S(String), 2023-08-09 21:14:42.024(Timestamp), 1689263932201635840(Long)
2023-08-09 21:14:42.196 INFO  io.seata.rm.AbstractResourceManager               :73   [32m1691586870816l7i  [0;39m branch register success, xid:192.168.0.102:8091:7854700236664918310, branchId:7854700236664918320, lockKeys:confirm_order:1689263932201635840
2023-08-09 21:14:42.243 DEBUG c.j.m.C.updateByPrimaryKeySelective               :137  [32m1691586870816l7i  [0;39m <==    Updates: 1
2023-08-09 21:14:42.243 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870816l7i  [0;39m SQL执行完成: updateByPrimaryKeySelective | execution(int com.jktickets.mapper.ConfirmOrderMapper.updateByPrimaryKeySelective(ConfirmOrder))
2023-08-09 21:14:42.244 INFO  io.seata.tm.api.DefaultGlobalTransaction          :133  [32m1691586870816l7i  [0;39m transaction 192.168.0.102:8091:7854700236664918310 will be commit
2023-08-09 21:14:42.298 INFO  io.seata.tm.api.DefaultGlobalTransaction          :209  [32m1691586870816l7i  [0;39m transaction end, xid = 192.168.0.102:8091:7854700236664918310
2023-08-09 21:14:42.298 INFO  io.seata.tm.api.DefaultGlobalTransaction          :155  [32m1691586870816l7i  [0;39m [192.168.0.102:8091:7854700236664918310] commit status: Committed
2023-08-09 21:14:42.298 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586870816l7i  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:42.328 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586870816l7i  [0;39m 返回结果: {"code":0,"message":"","success":true}
2023-08-09 21:14:42.328 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586870816l7i  [0;39m ------------- 结束 耗时：11510 ms -------------
2023-08-09 21:14:42.340 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586870748g4s  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:42.340 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870748g4s  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:42.340 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870748g4s  [0;39m 参数值: ConfirmOrder [Hash = 201370468, id=1689263937402572800, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:42, updateTime=2023-08-09 21:14:42, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:42.341 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870748g4s  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:42.341 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870748g4s  [0;39m ==> Parameters: 1689263937402572800(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:42.34(Timestamp), 2023-08-09 21:14:42.34(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:42.364 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870748g4s  [0;39m <==    Updates: 1
2023-08-09 21:14:42.365 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870748g4s  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:42.365 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870748g4s  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:42.365 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870748g4s  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@7729b9a
2023-08-09 21:14:42.366 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870748g4s  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:42.366 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870748g4s  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:42.382 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586870748g4s  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:42.383 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586870748g4s  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 0, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:42.383 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870748g4s  [0;39m <==      Total: 1
2023-08-09 21:14:42.383 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870748g4s  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:42.384 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586870748g4s  [0;39m 查出余票记录:DailyTrainTicket [Hash = 238622282, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=0, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:42.384 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586870748g4s  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:42.407 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586870748g4s  [0;39m 业务异常:余票不足
2023-08-09 21:14:42.408 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586870748g4s  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='余票不足'})]
2023-08-09 21:14:42.417 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586870684uuf  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:42.418 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870684uuf  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:42.418 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870684uuf  [0;39m 参数值: ConfirmOrder [Hash = 1180745457, id=1689263937729728512, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:42, updateTime=2023-08-09 21:14:42, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:42.418 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870684uuf  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:42.419 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870684uuf  [0;39m ==> Parameters: 1689263937729728512(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:42.417(Timestamp), 2023-08-09 21:14:42.417(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:42.451 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870684uuf  [0;39m <==    Updates: 1
2023-08-09 21:14:42.451 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870684uuf  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:42.451 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870684uuf  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:42.452 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870684uuf  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@5e2707f6
2023-08-09 21:14:42.453 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870684uuf  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:42.453 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870684uuf  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:42.466 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586870684uuf  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:42.467 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586870684uuf  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 0, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:42.468 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870684uuf  [0;39m <==      Total: 1
2023-08-09 21:14:42.469 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870684uuf  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:42.469 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586870684uuf  [0;39m 查出余票记录:DailyTrainTicket [Hash = 903969126, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=0, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:42.469 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586870684uuf  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:42.497 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586870684uuf  [0;39m 业务异常:余票不足
2023-08-09 21:14:42.498 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586870684uuf  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='余票不足'})]
2023-08-09 21:14:42.512 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586870617jbn  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:42.512 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870617jbn  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:42.513 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870617jbn  [0;39m 参数值: ConfirmOrder [Hash = 1673537093, id=1689263938123993088, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:42, updateTime=2023-08-09 21:14:42, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:42.514 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870617jbn  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:42.515 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870617jbn  [0;39m ==> Parameters: 1689263938123993088(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:42.512(Timestamp), 2023-08-09 21:14:42.512(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:42.542 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870617jbn  [0;39m <==    Updates: 1
2023-08-09 21:14:42.543 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870617jbn  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:42.543 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870617jbn  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:42.544 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870617jbn  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@13311852
2023-08-09 21:14:42.545 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870617jbn  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:42.546 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870617jbn  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:42.560 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586870617jbn  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:42.562 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586870617jbn  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 0, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:42.564 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870617jbn  [0;39m <==      Total: 1
2023-08-09 21:14:42.565 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870617jbn  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:42.566 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586870617jbn  [0;39m 查出余票记录:DailyTrainTicket [Hash = 1307441767, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=0, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:42.567 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586870617jbn  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:42.599 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586870617jbn  [0;39m 业务异常:余票不足
2023-08-09 21:14:42.601 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586870617jbn  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='余票不足'})]
2023-08-09 21:14:42.614 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586870552cnq  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:42.615 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870552cnq  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:42.616 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870552cnq  [0;39m 参数值: ConfirmOrder [Hash = 2063964698, id=1689263938556006400, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:42, updateTime=2023-08-09 21:14:42, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:42.618 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870552cnq  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:42.620 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870552cnq  [0;39m ==> Parameters: 1689263938556006400(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:42.615(Timestamp), 2023-08-09 21:14:42.615(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:42.649 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870552cnq  [0;39m <==    Updates: 1
2023-08-09 21:14:42.650 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870552cnq  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:42.650 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870552cnq  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:42.651 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870552cnq  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@7a7ad3cf
2023-08-09 21:14:42.654 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870552cnq  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:42.655 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870552cnq  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:42.671 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586870552cnq  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:42.673 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586870552cnq  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 0, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:42.675 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870552cnq  [0;39m <==      Total: 1
2023-08-09 21:14:42.676 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870552cnq  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:42.676 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586870552cnq  [0;39m 查出余票记录:DailyTrainTicket [Hash = 1949264802, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=0, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:42.677 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586870552cnq  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:42.738 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586870552cnq  [0;39m 业务异常:余票不足
2023-08-09 21:14:42.739 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586870552cnq  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='余票不足'})]
2023-08-09 21:14:42.753 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m16915868704879kk  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:42.754 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868704879kk  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:42.754 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868704879kk  [0;39m 参数值: ConfirmOrder [Hash = 461663830, id=1689263939134820352, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:42, updateTime=2023-08-09 21:14:42, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:42.754 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868704879kk  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:42.755 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868704879kk  [0;39m ==> Parameters: 1689263939134820352(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:42.753(Timestamp), 2023-08-09 21:14:42.753(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:42.782 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m16915868704879kk  [0;39m <==    Updates: 1
2023-08-09 21:14:42.783 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868704879kk  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:42.783 INFO  com.jktickets.aspect.LogAspect                    :106  [32m16915868704879kk  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:42.783 INFO  com.jktickets.aspect.LogAspect                    :111  [32m16915868704879kk  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@39f99f73
2023-08-09 21:14:42.785 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868704879kk  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:42.786 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868704879kk  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:42.798 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m16915868704879kk  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:42.799 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m16915868704879kk  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 0, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:42.800 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m16915868704879kk  [0;39m <==      Total: 1
2023-08-09 21:14:42.801 INFO  com.jktickets.aspect.LogAspect                    :120  [32m16915868704879kk  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:42.801 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m16915868704879kk  [0;39m 查出余票记录:DailyTrainTicket [Hash = 1780050143, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=0, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:42.801 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m16915868704879kk  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:42.834 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m16915868704879kk  [0;39m 业务异常:余票不足
2023-08-09 21:14:42.835 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m16915868704879kk  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='余票不足'})]
2023-08-09 21:14:42.847 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691586870419wht  [0;39m 恭喜，抢到锁了
2023-08-09 21:14:42.848 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870419wht  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:42.848 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870419wht  [0;39m 参数值: ConfirmOrder [Hash = 832847376, id=1689263939533279232, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:14:42, updateTime=2023-08-09 21:14:42, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:14:42.849 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870419wht  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:14:42.849 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870419wht  [0;39m ==> Parameters: 1689263939533279232(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:14:42.848(Timestamp), 2023-08-09 21:14:42.848(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:14:42.873 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691586870419wht  [0;39m <==    Updates: 1
2023-08-09 21:14:42.874 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870419wht  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:14:42.875 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586870419wht  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:42.875 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586870419wht  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@5fc33c6
2023-08-09 21:14:42.877 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870419wht  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:14:42.878 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870419wht  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:14:42.891 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918310', branchId=7854700236664918312, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:42.891 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918310 7854700236664918312 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:42.891 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:42.892 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586870419wht  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:42.893 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586870419wht  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 0, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:42.897 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586870419wht  [0;39m <==      Total: 1
2023-08-09 21:14:42.897 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586870419wht  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:42.897 INFO  com.jktickets.service.ConfirmOrderService         :223  [32m1691586870419wht  [0;39m 查出余票记录:DailyTrainTicket [Hash = 368960846, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=0, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:14:42.897 INFO  com.jktickets.service.ConfirmOrderService         :319  [32m1691586870419wht  [0;39m 购票流程结束，释放锁
2023-08-09 21:14:42.929 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918310', branchId=7854700236664918314, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:42.929 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918310 7854700236664918314 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:42.929 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:42.938 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691586870419wht  [0;39m 业务异常:余票不足
2023-08-09 21:14:42.939 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691586870419wht  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='余票不足'})]
2023-08-09 21:14:42.977 INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor:56   [32m                  [0;39m rm client handle branch commit process:BranchCommitRequest{xid='192.168.0.102:8091:7854700236664918310', branchId=7854700236664918320, branchType=AT, resourceId='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', applicationData='null'}
2023-08-09 21:14:42.977 INFO  io.seata.rm.AbstractRMHandler                     :96   [32m                  [0;39m Branch committing: 192.168.0.102:8091:7854700236664918310 7854700236664918320 jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business null
2023-08-09 21:14:42.977 INFO  io.seata.rm.AbstractRMHandler                     :104  [32m                  [0;39m Branch commit result: PhaseTwo_Committed
2023-08-09 21:14:56.848 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586896848yjw  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:56.849 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586896848yjw  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:56.849 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586896849ibu  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:56.849 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586896848yjw  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:56.850 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586896849ibu  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:56.850 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586896849ibu  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:56.850 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586896848yjw  [0;39m ------------- 开始 -------------
2023-08-09 21:14:56.850 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586896848yjw  [0;39m 请求地址: http://192.168.0.102:8002/business/station/queryAll GET
2023-08-09 21:14:56.850 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586896848yjw  [0;39m 类名方法: com.jktickets.controller.StationController.queryAllStationList
2023-08-09 21:14:56.851 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586896848yjw  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:56.851 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586896848yjw  [0;39m 请求参数: []
2023-08-09 21:14:56.851 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586896848yjw  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.StationMapper.selectByExample(StationExample))
2023-08-09 21:14:56.851 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586896848yjw  [0;39m 参数值: com.jktickets.domain.StationExample@2ea567d1
2023-08-09 21:14:56.864 DEBUG c.jktickets.mapper.StationMapper.selectByExample  :137  [32m1691586896848yjw  [0;39m ==>  Preparing: select id, `name`, name_pinyin, name_py, create_time, update_time from station order by name_pinyin asc
2023-08-09 21:14:56.865 DEBUG c.jktickets.mapper.StationMapper.selectByExample  :137  [32m1691586896848yjw  [0;39m ==> Parameters: 
2023-08-09 21:14:56.889 TRACE c.jktickets.mapper.StationMapper.selectByExample  :143  [32m1691586896848yjw  [0;39m <==    Columns: id, name, name_pinyin, name_py, create_time, update_time
2023-08-09 21:14:56.890 TRACE c.jktickets.mapper.StationMapper.selectByExample  :143  [32m1691586896848yjw  [0;39m <==        Row: 1680219843401486336, 杭州, hangzhou, hz, 2023-07-15 22:16:42.268, 2023-07-15 22:16:42.268
2023-08-09 21:14:56.891 TRACE c.jktickets.mapper.StationMapper.selectByExample  :143  [32m1691586896848yjw  [0;39m <==        Row: 1680205919650189312, 上海, shanghai, sh, 2023-07-15 21:21:22.591, 2023-07-15 21:21:22.591
2023-08-09 21:14:56.893 TRACE c.jktickets.mapper.StationMapper.selectByExample  :143  [32m1691586896848yjw  [0;39m <==        Row: 1680205862385356800, 温州, wenzhou, wz, 2023-07-15 21:21:08.871, 2023-07-15 21:21:08.871
2023-08-09 21:14:56.893 DEBUG c.jktickets.mapper.StationMapper.selectByExample  :137  [32m1691586896848yjw  [0;39m <==      Total: 3
2023-08-09 21:14:56.894 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586896848yjw  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.StationMapper.selectByExample(StationExample))
2023-08-09 21:14:56.895 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586896848yjw  [0;39m 返回结果: {"code":0,"message":"","result":[{"createTime":1689430602268,"id":1680219843401486336,"name":"杭州","namePinyin":"hangzhou","namePy":"hz","updateTime":1689430602268},{"createTime":1689427282591,"id":1680205919650189312,"name":"上海","namePinyin":"shanghai","namePy":"sh","updateTime":1689427282591},{"createTime":1689427268871,"id":1680205862385356800,"name":"温州","namePinyin":"wenzhou","namePy":"wz","updateTime":1689427268871}],"success":true}
2023-08-09 21:14:56.896 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586896848yjw  [0;39m ------------- 结束 耗时：46 ms -------------
2023-08-09 21:14:56.907 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691586896907g36  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:14:56.908 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691586896907g36  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:56.908 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691586896907g36  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:14:56.909 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586896907g36  [0;39m ------------- 开始 -------------
2023-08-09 21:14:56.909 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586896907g36  [0;39m 请求地址: http://192.168.0.102:8002/business/station/queryAll GET
2023-08-09 21:14:56.909 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586896907g36  [0;39m 类名方法: com.jktickets.controller.StationController.queryAllStationList
2023-08-09 21:14:56.910 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586896907g36  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:56.910 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586896907g36  [0;39m 请求参数: []
2023-08-09 21:14:56.910 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586896907g36  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.StationMapper.selectByExample(StationExample))
2023-08-09 21:14:56.910 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586896907g36  [0;39m 参数值: com.jktickets.domain.StationExample@3c8d0d74
2023-08-09 21:14:56.911 DEBUG c.jktickets.mapper.StationMapper.selectByExample  :137  [32m1691586896907g36  [0;39m ==>  Preparing: select id, `name`, name_pinyin, name_py, create_time, update_time from station order by name_pinyin asc
2023-08-09 21:14:56.912 DEBUG c.jktickets.mapper.StationMapper.selectByExample  :137  [32m1691586896907g36  [0;39m ==> Parameters: 
2023-08-09 21:14:56.924 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691586896849ibu  [0;39m ------------- 开始 -------------
2023-08-09 21:14:56.925 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691586896849ibu  [0;39m 请求地址: http://192.168.0.102:18002/business/dailyTrainTicket/queryList GET
2023-08-09 21:14:56.925 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691586896849ibu  [0;39m 类名方法: com.jktickets.controller.DailyTrainTicketController.queryDailyTrainTicketList
2023-08-09 21:14:56.925 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691586896849ibu  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:14:56.929 TRACE c.jktickets.mapper.StationMapper.selectByExample  :143  [32m1691586896907g36  [0;39m <==    Columns: id, name, name_pinyin, name_py, create_time, update_time
2023-08-09 21:14:56.929 TRACE c.jktickets.mapper.StationMapper.selectByExample  :143  [32m1691586896907g36  [0;39m <==        Row: 1680219843401486336, 杭州, hangzhou, hz, 2023-07-15 22:16:42.268, 2023-07-15 22:16:42.268
2023-08-09 21:14:56.929 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691586896849ibu  [0;39m 请求参数: [{"date":1691424000000,"end":"杭州","page":1,"size":10,"start":"温州"}]
2023-08-09 21:14:56.930 TRACE c.jktickets.mapper.StationMapper.selectByExample  :143  [32m1691586896907g36  [0;39m <==        Row: 1680205919650189312, 上海, shanghai, sh, 2023-07-15 21:21:22.591, 2023-07-15 21:21:22.591
2023-08-09 21:14:56.931 TRACE c.jktickets.mapper.StationMapper.selectByExample  :143  [32m1691586896907g36  [0;39m <==        Row: 1680205862385356800, 温州, wenzhou, wz, 2023-07-15 21:21:08.871, 2023-07-15 21:21:08.871
2023-08-09 21:14:56.931 DEBUG c.jktickets.mapper.StationMapper.selectByExample  :137  [32m1691586896907g36  [0;39m <==      Total: 3
2023-08-09 21:14:56.932 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586896907g36  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.StationMapper.selectByExample(StationExample))
2023-08-09 21:14:56.933 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586896907g36  [0;39m 返回结果: {"code":0,"message":"","result":[{"createTime":1689430602268,"id":1680219843401486336,"name":"杭州","namePinyin":"hangzhou","namePy":"hz","updateTime":1689430602268},{"createTime":1689427282591,"id":1680205919650189312,"name":"上海","namePinyin":"shanghai","namePy":"sh","updateTime":1689427282591},{"createTime":1689427268871,"id":1680205862385356800,"name":"温州","namePinyin":"wenzhou","namePy":"wz","updateTime":1689427268871}],"success":true}
2023-08-09 21:14:56.934 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586896907g36  [0;39m ------------- 结束 耗时：25 ms -------------
2023-08-09 21:14:56.985 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691586896849ibu  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:56.986 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691586896849ibu  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@735ba9e8
2023-08-09 21:14:57.075 DEBUG c.j.m.DailyTrainTicketMapper.selectByExample_COUNT:137  [32m1691586896849ibu  [0;39m ==>  Preparing: SELECT count(0) FROM daily_train_ticket WHERE (`date` = ? AND `start` = ? AND `end` = ?)
2023-08-09 21:14:57.076 DEBUG c.j.m.DailyTrainTicketMapper.selectByExample_COUNT:137  [32m1691586896849ibu  [0;39m ==> Parameters: 2023-08-08(Date), 温州(String), 杭州(String)
2023-08-09 21:14:57.087 TRACE c.j.m.DailyTrainTicketMapper.selectByExample_COUNT:143  [32m1691586896849ibu  [0;39m <==    Columns: count(0)
2023-08-09 21:14:57.088 TRACE c.j.m.DailyTrainTicketMapper.selectByExample_COUNT:143  [32m1691586896849ibu  [0;39m <==        Row: 1
2023-08-09 21:14:57.088 DEBUG c.j.m.DailyTrainTicketMapper.selectByExample_COUNT:137  [32m1691586896849ibu  [0;39m <==      Total: 1
2023-08-09 21:14:57.091 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586896849ibu  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and `start` = ? and `end` = ? ) order by id desc LIMIT ?
2023-08-09 21:14:57.091 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586896849ibu  [0;39m ==> Parameters: 2023-08-08(Date), 温州(String), 杭州(String), 10(Integer)
2023-08-09 21:14:57.114 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586896849ibu  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:14:57.115 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691586896849ibu  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 0, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:14:57.115 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691586896849ibu  [0;39m <==      Total: 1
2023-08-09 21:14:57.116 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691586896849ibu  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:14:57.118 INFO  com.jktickets.service.DailyTrainTicketService     :133  [32m1691586896849ibu  [0;39m 总行数：1
2023-08-09 21:14:57.118 INFO  com.jktickets.service.DailyTrainTicketService     :134  [32m1691586896849ibu  [0;39m 总页数：1
2023-08-09 21:14:57.163 INFO  com.jktickets.aspect.LogAspect                    :94   [32m1691586896849ibu  [0;39m 返回结果: {"code":0,"message":"","result":{"list":[{"createTime":1691503235973,"date":1691424000000,"edz":0,"edzPrice":3.96,"end":"杭州","endIndex":2,"endPinyin":"hangzhou","endTime":25200000,"id":1688913100071374848,"rw":-1,"rwPrice":7.92,"start":"温州","startIndex":1,"startPinyin":"wenzhou","startTime":51303000,"trainCode":"01","updateTime":1691503235973,"ydz":0,"ydzPrice":5.28,"yw":-1,"ywPrice":6.60}],"total":1},"success":true}
2023-08-09 21:14:57.163 INFO  com.jktickets.aspect.LogAspect                    :95   [32m1691586896849ibu  [0;39m ------------- 结束 耗时：239 ms -------------
2023-08-09 21:27:30.486 WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder  :102  [32m                  [0;39m [HttpClientBeanHolder] Start destroying common HttpClient
2023-08-09 21:27:30.486 WARN  com.alibaba.nacos.common.notify.NotifyCenter      :136  [32m                  [0;39m [NotifyCenter] Start destroying Publisher
2023-08-09 21:27:30.490 WARN  com.alibaba.nacos.common.notify.NotifyCenter      :153  [32m                  [0;39m [NotifyCenter] Destruction of the end
2023-08-09 21:27:30.491 WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder  :111  [32m                  [0;39m [HttpClientBeanHolder] Destruction of the end
2023-08-09 21:27:30.534 INFO  c.a.cloud.nacos.registry.NacosServiceRegistry     :95   [32m                  [0;39m De-registering from Nacos Server now...
2023-08-09 21:27:30.534 INFO  com.alibaba.nacos.client.naming                   :217  [32m                  [0;39m [DEREGISTER-SERVICE] train deregistering service business-service with instance: Instance{instanceId='null', ip='192.168.0.102', port=18002, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2023-08-09 21:27:30.537 INFO  c.a.cloud.nacos.registry.NacosServiceRegistry     :115  [32m                  [0;39m De-registration finished.
2023-08-09 21:27:30.538 INFO  com.alibaba.nacos.client.naming                   :256  [32m                  [0;39m com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2023-08-09 21:27:30.538 INFO  com.alibaba.nacos.client.naming                   :136  [32m                  [0;39m com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2023-08-09 21:27:30.539 INFO  com.alibaba.nacos.client.naming                   :138  [32m                  [0;39m com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2023-08-09 21:27:30.539 INFO  com.alibaba.nacos.client.naming                   :258  [32m                  [0;39m com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2023-08-09 21:27:30.539 INFO  com.alibaba.nacos.client.naming                   :204  [32m                  [0;39m com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2023-08-09 21:27:30.539 INFO  com.alibaba.nacos.client.naming                   :143  [32m                  [0;39m com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2023-08-09 21:27:30.539 INFO  com.alibaba.nacos.client.naming                   :145  [32m                  [0;39m com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2023-08-09 21:27:30.539 INFO  com.alibaba.nacos.client.naming                   :194  [32m                  [0;39m com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2023-08-09 21:27:30.539 WARN  com.alibaba.nacos.client.naming                   :74   [32m                  [0;39m [NamingHttpClientManager] Start destroying NacosRestTemplate
2023-08-09 21:27:30.539 WARN  com.alibaba.nacos.client.naming                   :81   [32m                  [0;39m [NamingHttpClientManager] Destruction of the end
2023-08-09 21:27:30.539 INFO  com.alibaba.nacos.client.naming                   :199  [32m                  [0;39m com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2023-08-09 21:27:30.539 INFO  com.alibaba.nacos.client.naming                   :484  [32m                  [0;39m com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2023-08-09 21:27:30.539 WARN  com.alibaba.nacos.client.naming                   :74   [32m                  [0;39m [NamingHttpClientManager] Start destroying NacosRestTemplate
2023-08-09 21:27:30.540 WARN  com.alibaba.nacos.client.naming                   :81   [32m                  [0;39m [NamingHttpClientManager] Destruction of the end
2023-08-09 21:27:30.540 INFO  com.alibaba.nacos.client.naming                   :486  [32m                  [0;39m com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2023-08-09 21:27:30.540 INFO  com.alibaba.nacos.common.remote.client            :429  [32m                  [0;39m Shutdown rpc client, set status to shutdown
2023-08-09 21:27:30.540 INFO  com.alibaba.nacos.common.remote.client            :431  [32m                  [0;39m Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@569f9fb0[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2023-08-09 21:27:30.540 INFO  com.alibaba.nacos.common.remote.client            :584  [32m                  [0;39m Close current connection 1691586711824_127.0.0.1_64585
2023-08-09 21:27:30.541 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :63   [32m                  [0;39m [1691586711824_127.0.0.1_64585]Ignore complete event,isRunning:false,isAbandon=false
2023-08-09 21:27:30.545 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :159  [32m                  [0;39m Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@296498a8[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 199]
2023-08-09 21:27:30.545 INFO  com.alibaba.nacos.client.naming                   :318  [32m                  [0;39m Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@7103c9c4[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 312]
2023-08-09 21:27:30.545 INFO  c.a.n.client.auth.ram.identify.CredentialWatcher  :106  [32m                  [0;39m [null] CredentialWatcher is stopped
2023-08-09 21:27:30.546 INFO  c.a.n.client.auth.ram.identify.CredentialService  :100  [32m                  [0;39m [null] CredentialService is freed
2023-08-09 21:27:30.546 INFO  com.alibaba.nacos.client.naming                   :211  [32m                  [0;39m com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2023-08-09 21:27:30.577 INFO  com.zaxxer.hikari.HikariDataSource                :350  [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2023-08-09 21:27:30.585 INFO  com.zaxxer.hikari.HikariDataSource                :352  [32m                  [0;39m HikariPool-1 - Shutdown completed.
2023-08-09 21:27:30.586 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:438  [32m                  [0;39m channel inactive: [id: 0xdee33f16, L:/192.168.0.102:64547 ! R:/192.168.0.102:8091]
2023-08-09 21:27:30.587 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :130  [32m                  [0;39m return to pool, rm channel:[id: 0xdee33f16, L:/192.168.0.102:64547 ! R:/192.168.0.102:8091]
2023-08-09 21:27:30.587 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :133  [32m                  [0;39m channel valid false,channel:[id: 0xdee33f16, L:/192.168.0.102:64547 ! R:/192.168.0.102:8091]
2023-08-09 21:27:30.587 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :120  [32m                  [0;39m will destroy channel:[id: 0xdee33f16, L:/192.168.0.102:64547 ! R:/192.168.0.102:8091]
2023-08-09 21:27:30.587 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:488  [32m                  [0;39m ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xdee33f16, L:/192.168.0.102:64547 ! R:/192.168.0.102:8091]) will closed
2023-08-09 21:27:30.587 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:488  [32m                  [0;39m ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xdee33f16, L:/192.168.0.102:64547 ! R:/192.168.0.102:8091]) will closed
2023-08-09 21:27:30.588 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:438  [32m                  [0;39m channel inactive: [id: 0x6500b726, L:/192.168.0.102:64550 ! R:/192.168.0.102:8091]
2023-08-09 21:27:30.588 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :130  [32m                  [0;39m return to pool, rm channel:[id: 0x6500b726, L:/192.168.0.102:64550 ! R:/192.168.0.102:8091]
2023-08-09 21:27:30.588 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :133  [32m                  [0;39m channel valid false,channel:[id: 0x6500b726, L:/192.168.0.102:64550 ! R:/192.168.0.102:8091]
2023-08-09 21:27:30.588 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :120  [32m                  [0;39m will destroy channel:[id: 0x6500b726, L:/192.168.0.102:64550 ! R:/192.168.0.102:8091]
2023-08-09 21:27:30.588 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:488  [32m                  [0;39m ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x6500b726, L:/192.168.0.102:64550 ! R:/192.168.0.102:8091]) will closed
2023-08-09 21:27:30.589 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:488  [32m                  [0;39m ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x6500b726, L:/192.168.0.102:64550 ! R:/192.168.0.102:8091]) will closed
2023-08-09 21:27:30.615 WARN  com.alibaba.nacos.common.notify.NotifyCenter      :136  [32m                  [0;39m [NotifyCenter] Start destroying Publisher
2023-08-09 21:27:30.616 WARN  com.alibaba.nacos.common.notify.NotifyCenter      :153  [32m                  [0;39m [NotifyCenter] Destruction of the end
2023-08-09 21:27:30.615 WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder  :102  [32m                  [0;39m [HttpClientBeanHolder] Start destroying common HttpClient
2023-08-09 21:27:30.617 WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder  :111  [32m                  [0;39m [HttpClientBeanHolder] Destruction of the end
2023-08-09 21:27:30.664 INFO  c.a.cloud.nacos.registry.NacosServiceRegistry     :95   [32m                  [0;39m De-registering from Nacos Server now...
2023-08-09 21:27:30.664 INFO  com.alibaba.nacos.client.naming                   :217  [32m                  [0;39m [DEREGISTER-SERVICE] train deregistering service business-service with instance: Instance{instanceId='null', ip='192.168.0.102', port=8002, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2023-08-09 21:27:30.667 INFO  c.a.cloud.nacos.registry.NacosServiceRegistry     :115  [32m                  [0;39m De-registration finished.
2023-08-09 21:27:30.668 INFO  com.alibaba.nacos.client.naming                   :256  [32m                  [0;39m com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2023-08-09 21:27:30.668 INFO  com.alibaba.nacos.client.naming                   :136  [32m                  [0;39m com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2023-08-09 21:27:30.668 INFO  com.alibaba.nacos.client.naming                   :138  [32m                  [0;39m com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2023-08-09 21:27:30.668 INFO  com.alibaba.nacos.client.naming                   :258  [32m                  [0;39m com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2023-08-09 21:27:30.668 INFO  com.alibaba.nacos.client.naming                   :204  [32m                  [0;39m com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2023-08-09 21:27:30.668 INFO  com.alibaba.nacos.client.naming                   :143  [32m                  [0;39m com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2023-08-09 21:27:30.669 INFO  com.alibaba.nacos.client.naming                   :145  [32m                  [0;39m com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2023-08-09 21:27:30.669 INFO  com.alibaba.nacos.client.naming                   :194  [32m                  [0;39m com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2023-08-09 21:27:30.669 WARN  com.alibaba.nacos.client.naming                   :74   [32m                  [0;39m [NamingHttpClientManager] Start destroying NacosRestTemplate
2023-08-09 21:27:30.669 WARN  com.alibaba.nacos.client.naming                   :81   [32m                  [0;39m [NamingHttpClientManager] Destruction of the end
2023-08-09 21:27:30.669 INFO  com.alibaba.nacos.client.naming                   :199  [32m                  [0;39m com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2023-08-09 21:27:30.669 INFO  com.alibaba.nacos.client.naming                   :484  [32m                  [0;39m com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2023-08-09 21:27:30.669 WARN  com.alibaba.nacos.client.naming                   :74   [32m                  [0;39m [NamingHttpClientManager] Start destroying NacosRestTemplate
2023-08-09 21:27:30.669 WARN  com.alibaba.nacos.client.naming                   :81   [32m                  [0;39m [NamingHttpClientManager] Destruction of the end
2023-08-09 21:27:30.669 INFO  com.alibaba.nacos.client.naming                   :486  [32m                  [0;39m com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2023-08-09 21:27:30.669 INFO  com.alibaba.nacos.common.remote.client            :429  [32m                  [0;39m Shutdown rpc client, set status to shutdown
2023-08-09 21:27:30.669 INFO  com.alibaba.nacos.common.remote.client            :431  [32m                  [0;39m Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@588ff2eb[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2023-08-09 21:27:30.669 INFO  com.alibaba.nacos.common.remote.client            :584  [32m                  [0;39m Close current connection 1691586689258_127.0.0.1_64527
2023-08-09 21:27:30.670 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :63   [32m                  [0;39m [1691586689258_127.0.0.1_64527]Ignore complete event,isRunning:false,isAbandon=false
2023-08-09 21:27:30.674 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :159  [32m                  [0;39m Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@f6a0b19[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 206]
2023-08-09 21:27:30.674 INFO  com.alibaba.nacos.client.naming                   :318  [32m                  [0;39m Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@f1b67be[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 319]
2023-08-09 21:27:30.675 INFO  c.a.n.client.auth.ram.identify.CredentialWatcher  :106  [32m                  [0;39m [null] CredentialWatcher is stopped
2023-08-09 21:27:30.675 INFO  c.a.n.client.auth.ram.identify.CredentialService  :100  [32m                  [0;39m [null] CredentialService is freed
2023-08-09 21:27:30.675 INFO  com.alibaba.nacos.client.naming                   :211  [32m                  [0;39m com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2023-08-09 21:27:30.708 INFO  com.zaxxer.hikari.HikariDataSource                :350  [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2023-08-09 21:27:30.716 INFO  com.zaxxer.hikari.HikariDataSource                :352  [32m                  [0;39m HikariPool-1 - Shutdown completed.
2023-08-09 21:27:30.717 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:438  [32m                  [0;39m channel inactive: [id: 0x61dcd1c5, L:/192.168.0.102:64485 ! R:/192.168.0.102:8091]
2023-08-09 21:27:30.718 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :130  [32m                  [0;39m return to pool, rm channel:[id: 0x61dcd1c5, L:/192.168.0.102:64485 ! R:/192.168.0.102:8091]
2023-08-09 21:27:30.718 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :133  [32m                  [0;39m channel valid false,channel:[id: 0x61dcd1c5, L:/192.168.0.102:64485 ! R:/192.168.0.102:8091]
2023-08-09 21:27:30.718 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :120  [32m                  [0;39m will destroy channel:[id: 0x61dcd1c5, L:/192.168.0.102:64485 ! R:/192.168.0.102:8091]
2023-08-09 21:27:30.718 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:488  [32m                  [0;39m ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x61dcd1c5, L:/192.168.0.102:64485 ! R:/192.168.0.102:8091]) will closed
2023-08-09 21:27:30.718 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:488  [32m                  [0;39m ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x61dcd1c5, L:/192.168.0.102:64485 ! R:/192.168.0.102:8091]) will closed
2023-08-09 21:27:30.719 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:438  [32m                  [0;39m channel inactive: [id: 0x8ad5f89b, L:/192.168.0.102:64490 ! R:/192.168.0.102:8091]
2023-08-09 21:27:30.719 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :130  [32m                  [0;39m return to pool, rm channel:[id: 0x8ad5f89b, L:/192.168.0.102:64490 ! R:/192.168.0.102:8091]
2023-08-09 21:27:30.719 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :133  [32m                  [0;39m channel valid false,channel:[id: 0x8ad5f89b, L:/192.168.0.102:64490 ! R:/192.168.0.102:8091]
2023-08-09 21:27:30.719 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :120  [32m                  [0;39m will destroy channel:[id: 0x8ad5f89b, L:/192.168.0.102:64490 ! R:/192.168.0.102:8091]
2023-08-09 21:27:30.719 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:488  [32m                  [0;39m ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x8ad5f89b, L:/192.168.0.102:64490 ! R:/192.168.0.102:8091]) will closed
2023-08-09 21:27:30.719 INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient:488  [32m                  [0;39m ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x8ad5f89b, L:/192.168.0.102:64490 ! R:/192.168.0.102:8091]) will closed
2023-08-09 21:27:39.573 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:27:39.589 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 8.0.0.Final
2023-08-09 21:27:39.660 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:27:39.700 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :250  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-08-09 21:27:40.026 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:27:40.028 INFO  com.alibaba.nacos.client.utils.ParamUtil          :87   [32m                  [0;39m [settings] [req-serv] nacos-server port:8848
2023-08-09 21:27:40.029 INFO  com.alibaba.nacos.client.utils.ParamUtil          :98   [32m                  [0;39m [settings] [http-client] connect timeout:1000
2023-08-09 21:27:40.030 INFO  com.alibaba.nacos.client.utils.ParamUtil          :105  [32m                  [0;39m PER_TASK_CONFIG_SIZE: 3000.0
2023-08-09 21:27:40.084 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:27:40.084 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:27:40.088 INFO  c.a.n.client.auth.ram.identify.CredentialWatcher  :165  [32m                  [0;39m null No credential found
2023-08-09 21:27:40.782 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:27:40.808 INFO  c.a.n.client.config.impl.LocalConfigInfoProcessor :63   [32m                  [0;39m LOCAL_SNAPSHOT_PATH:C:\Users\Administrator\nacos\config
2023-08-09 21:27:40.815 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of e38321a9-ffac-4c4b-83cc-716db2302a3f_config-0
2023-08-09 21:27:40.842 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [e38321a9-ffac-4c4b-83cc-716db2302a3f_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$601/0x0000000800f98a90
2023-08-09 21:27:40.843 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [e38321a9-ffac-4c4b-83cc-716db2302a3f_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$602/0x0000000800f98eb0
2023-08-09 21:27:40.844 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [e38321a9-ffac-4c4b-83cc-716db2302a3f_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2023-08-09 21:27:40.845 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [e38321a9-ffac-4c4b-83cc-716db2302a3f_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2023-08-09 21:27:40.854 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [e38321a9-ffac-4c4b-83cc-716db2302a3f_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:27:40.903 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:27:42.655 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [e38321a9-ffac-4c4b-83cc-716db2302a3f_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691587662416_127.0.0.1_65120
2023-08-09 21:27:42.657 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [e38321a9-ffac-4c4b-83cc-716db2302a3f_config-0] Notify connected event to listeners.
2023-08-09 21:27:42.657 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :639  [32m                  [0;39m [e38321a9-ffac-4c4b-83cc-716db2302a3f_config-0] Connected,notify listen context...
2023-08-09 21:27:42.658 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [e38321a9-ffac-4c4b-83cc-716db2302a3f_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:27:42.659 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [e38321a9-ffac-4c4b-83cc-716db2302a3f_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010ddaf0
2023-08-09 21:27:42.750 INFO  com.alibaba.nacos.client.config.impl.Limiter      :62   [32m                  [0;39m limitTime:5.0
2023-08-09 21:27:42.787 WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder :87   [32m                  [0;39m Ignore the empty nacos configuration and get it based on dataId[business-service] & group[DEFAULT_GROUP]
2023-08-09 21:27:42.798 WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder :87   [32m                  [0;39m Ignore the empty nacos configuration and get it based on dataId[business-service.properties] & group[DEFAULT_GROUP]
2023-08-09 21:27:42.827 WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder :87   [32m                  [0;39m Ignore the empty nacos configuration and get it based on dataId[business-service-dev.properties] & group[DEFAULT_GROUP]
2023-08-09 21:27:42.829 INFO  o.s.c.b.c.PropertySourceBootstrapConfiguration    :108  [32m                  [0;39m Located property source: [BootstrapPropertySource {name='bootstrapProperties-business-service-dev.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-business-service.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-business-service,DEFAULT_GROUP'}]
2023-08-09 21:27:42.876 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:27:42.879 INFO  com.jktickets.BusinessApplication                 :636  [32m                  [0;39m The following 1 profile is active: "dev"
2023-08-09 21:27:44.564 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:27:44.581 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 8.0.0.Final
2023-08-09 21:27:44.716 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:27:44.783 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :250  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-08-09 21:27:45.236 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:27:45.239 INFO  com.alibaba.nacos.client.utils.ParamUtil          :87   [32m                  [0;39m [settings] [req-serv] nacos-server port:8848
2023-08-09 21:27:45.240 INFO  com.alibaba.nacos.client.utils.ParamUtil          :98   [32m                  [0;39m [settings] [http-client] connect timeout:1000
2023-08-09 21:27:45.241 INFO  com.alibaba.nacos.client.utils.ParamUtil          :105  [32m                  [0;39m PER_TASK_CONFIG_SIZE: 3000.0
2023-08-09 21:27:45.287 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:27:45.287 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:27:45.301 INFO  c.a.n.client.auth.ram.identify.CredentialWatcher  :165  [32m                  [0;39m null No credential found
2023-08-09 21:27:45.731 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :294  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode
2023-08-09 21:27:45.735 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :138  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-08-09 21:27:45.780 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :208  [32m                  [0;39m Finished Spring Data repository scanning in 25 ms. Found 0 Redis repository interfaces.
2023-08-09 21:27:46.141 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:27:46.159 INFO  o.springframework.cloud.context.scope.GenericScope:282  [32m                  [0;39m BeanFactory id=2002ce87-f1ba-3f2d-89b2-7013af69be00
2023-08-09 21:27:46.162 INFO  c.a.n.client.config.impl.LocalConfigInfoProcessor :63   [32m                  [0;39m LOCAL_SNAPSHOT_PATH:C:\Users\Administrator\nacos\config
2023-08-09 21:27:46.166 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of fccccf0d-1538-40bb-a04b-2703fe6380dd_config-0
2023-08-09 21:27:46.192 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fccccf0d-1538-40bb-a04b-2703fe6380dd_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$601/0x0000000800f99a28
2023-08-09 21:27:46.193 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fccccf0d-1538-40bb-a04b-2703fe6380dd_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$602/0x0000000800f99e48
2023-08-09 21:27:46.193 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fccccf0d-1538-40bb-a04b-2703fe6380dd_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2023-08-09 21:27:46.194 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fccccf0d-1538-40bb-a04b-2703fe6380dd_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2023-08-09 21:27:46.203 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fccccf0d-1538-40bb-a04b-2703fe6380dd_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:27:46.248 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'com.jktickets.feign.MemberFeign' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:46.253 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:27:46.262 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:46.262 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:46.263 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:46.313 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:46.318 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:46.320 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:46.322 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$741/0x000000080125dff8] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:46.323 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:46.331 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:46.336 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:46.340 INFO  i.s.s.boot.autoconfigure.SeataAutoConfiguration   :63   [32m                  [0;39m Automatically configure Seata
2023-08-09 21:27:46.419 INFO  io.seata.config.ConfigurationFactory              :64   [32m                  [0;39m load Configuration from :Spring Configuration
2023-08-09 21:27:46.427 INFO  io.seata.config.nacos.NacosConfiguration          :233  [32m                  [0;39m Nacos check auth with userName/password.
2023-08-09 21:27:46.438 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:27:46.439 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:27:46.569 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of b51fd9f9-0361-4831-9641-9a8205b5e052_config-0
2023-08-09 21:27:46.569 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [b51fd9f9-0361-4831-9641-9a8205b5e052_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$601/0x0000000800f98a90
2023-08-09 21:27:46.570 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [b51fd9f9-0361-4831-9641-9a8205b5e052_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$602/0x0000000800f98eb0
2023-08-09 21:27:46.570 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [b51fd9f9-0361-4831-9641-9a8205b5e052_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2023-08-09 21:27:46.570 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [b51fd9f9-0361-4831-9641-9a8205b5e052_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2023-08-09 21:27:46.571 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [b51fd9f9-0361-4831-9641-9a8205b5e052_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:27:46.571 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:27:46.685 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [b51fd9f9-0361-4831-9641-9a8205b5e052_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691587666577_127.0.0.1_65133
2023-08-09 21:27:46.685 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [b51fd9f9-0361-4831-9641-9a8205b5e052_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:27:46.685 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [b51fd9f9-0361-4831-9641-9a8205b5e052_config-0] Notify connected event to listeners.
2023-08-09 21:27:46.685 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [b51fd9f9-0361-4831-9641-9a8205b5e052_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010ddaf0
2023-08-09 21:27:46.685 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :639  [32m                  [0;39m [b51fd9f9-0361-4831-9641-9a8205b5e052_config-0] Connected,notify listen context...
2023-08-09 21:27:46.696 INFO  com.alibaba.nacos.client.config.utils.JvmUtil     :54   [32m                  [0;39m isMultiInstance:false
2023-08-09 21:27:46.706 INFO  com.alibaba.nacos.client.config.impl.CacheData    :67   [32m                  [0;39m nacos.cache.data.init.snapshot = true 
2023-08-09 21:27:46.708 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] seataServer.properties+SEATA_GROUP+train
2023-08-09 21:27:46.718 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=seataServer.properties, group=SEATA_GROUP, cnt=1
2023-08-09 21:27:46.733 INFO  i.seata.spring.annotation.GlobalTransactionScanner:211  [32m                  [0;39m Initializing Global Transaction Clients ... 
2023-08-09 21:27:46.880 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] transport.enableTmClientBatchSendRequest+SEATA_GROUP+train
2023-08-09 21:27:46.881 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableTmClientBatchSendRequest, group=SEATA_GROUP, cnt=1
2023-08-09 21:27:46.881 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableTmClientBatchSendRequest, group=SEATA_GROUP, cnt=2
2023-08-09 21:27:46.899 INFO  io.seata.core.rpc.netty.NettyClientBootstrap      :147  [32m                  [0;39m NettyClientBootstrap has started
2023-08-09 21:27:46.900 INFO  io.seata.discovery.registry.RegistryFactory       :50   [32m                  [0;39m use registry center type: nacos
2023-08-09 21:27:46.910 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] service.vgroupMapping.train-group+SEATA_GROUP+train
2023-08-09 21:27:46.911 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=service.vgroupMapping.train-group, group=SEATA_GROUP, cnt=1
2023-08-09 21:27:46.917 INFO  com.alibaba.nacos.client.naming                   :73   [32m                  [0;39m initializer namespace from namespace attribute :null
2023-08-09 21:27:46.930 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:27:46.931 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:27:47.032 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of fbbd3b17-4f16-4b97-ad7b-70ba3ff42425
2023-08-09 21:27:47.034 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fbbd3b17-4f16-4b97-ad7b-70ba3ff42425] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2023-08-09 21:27:47.034 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fbbd3b17-4f16-4b97-ad7b-70ba3ff42425] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2023-08-09 21:27:47.035 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fbbd3b17-4f16-4b97-ad7b-70ba3ff42425] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2023-08-09 21:27:47.036 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fbbd3b17-4f16-4b97-ad7b-70ba3ff42425] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:27:47.036 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:27:47.154 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fbbd3b17-4f16-4b97-ad7b-70ba3ff42425] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691587667044_127.0.0.1_65134
2023-08-09 21:27:47.154 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fbbd3b17-4f16-4b97-ad7b-70ba3ff42425] Notify connected event to listeners.
2023-08-09 21:27:47.154 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fbbd3b17-4f16-4b97-ad7b-70ba3ff42425] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:27:47.155 INFO  com.alibaba.nacos.client.naming                   :78   [32m                  [0;39m Grpc connection connect
2023-08-09 21:27:47.155 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fbbd3b17-4f16-4b97-ad7b-70ba3ff42425] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010ddaf0
2023-08-09 21:27:47.156 INFO  com.alibaba.nacos.client.naming                   :167  [32m                  [0;39m [SUBSCRIBE-SERVICE] service:seata-server, group:SEATA_GROUP, clusters:default 
2023-08-09 21:27:47.175 INFO  com.alibaba.nacos.client.naming                   :184  [32m                  [0;39m init new ips(1) service: SEATA_GROUP@@seata-server@@default -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatTimeOut":15000,"instanceIdGenerator":"simple","instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2023-08-09 21:27:47.178 INFO  com.alibaba.nacos.client.naming                   :169  [32m                  [0;39m current ips:(1) service: SEATA_GROUP@@seata-server@@default -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatTimeOut":15000,"instanceIdGenerator":"simple","instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2023-08-09 21:27:47.183 INFO  com.alibaba.nacos.client.naming                   :167  [32m                  [0;39m [SUBSCRIBE-SERVICE] service:seata-server, group:SEATA_GROUP, clusters:default 
2023-08-09 21:27:47.185 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :105  [32m                  [0;39m will connect to 192.168.0.102:8091
2023-08-09 21:27:47.334 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :56   [32m                  [0;39m NettyPool create channel to transactionRole:TMROLE,address:192.168.0.102:8091,msg:< RegisterTMRequest{version='1.7.0', applicationId='business-service', transactionServiceGroup='train-group', extraData='ak=null
digest=train-group,192.168.0.102,1691587667332
timestamp=1691587667332
authVersion=V4
vgroup=train-group
ip=192.168.0.102
'} >
2023-08-09 21:27:47.637 WARN  i.s.c.l.EnhancedServiceLoader$InnerEnhancedServiceLoader:545  [32m                  [0;39m Load [io.seata.serializer.hessian.HessianSerializer] class fail: com/caucho/hessian/io/AbstractHessianOutput
2023-08-09 21:27:47.663 INFO  io.seata.core.rpc.netty.TmNettyRemotingClient     :224  [32m                  [0;39m register TM success. client version:1.7.0, server version:1.6.1,channel:[id: 0xec82d768, L:/192.168.0.102:65136 - R:/192.168.0.102:8091]
2023-08-09 21:27:47.667 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :81   [32m                  [0;39m register success, cost 63 ms, version:1.6.1,role:TMROLE,channel:[id: 0xec82d768, L:/192.168.0.102:65136 - R:/192.168.0.102:8091]
2023-08-09 21:27:47.668 INFO  i.seata.spring.annotation.GlobalTransactionScanner:225  [32m                  [0;39m Transaction Manager Client is initialized. applicationId[business-service] txServiceGroup[train-group]
2023-08-09 21:27:47.680 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] transport.enableRmClientBatchSendRequest+SEATA_GROUP+train
2023-08-09 21:27:47.681 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableRmClientBatchSendRequest, group=SEATA_GROUP, cnt=1
2023-08-09 21:27:47.681 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableRmClientBatchSendRequest, group=SEATA_GROUP, cnt=2
2023-08-09 21:27:47.698 INFO  io.seata.rm.datasource.AsyncWorker                :73   [32m                  [0;39m Async Commit Buffer Limit: 10000
2023-08-09 21:27:47.699 INFO  io.seata.rm.datasource.xa.ResourceManagerXA       :59   [32m                  [0;39m ResourceManagerXA init ...
2023-08-09 21:27:47.710 INFO  io.seata.core.rpc.netty.NettyClientBootstrap      :147  [32m                  [0;39m NettyClientBootstrap has started
2023-08-09 21:27:47.711 INFO  i.seata.spring.annotation.GlobalTransactionScanner:230  [32m                  [0;39m Resource Manager is initialized. applicationId[business-service] txServiceGroup[train-group]
2023-08-09 21:27:47.711 INFO  i.seata.spring.annotation.GlobalTransactionScanner:234  [32m                  [0;39m Global Transaction Clients are initialized. 
2023-08-09 21:27:47.718 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fccccf0d-1538-40bb-a04b-2703fe6380dd_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691587667506_127.0.0.1_65135
2023-08-09 21:27:47.719 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fccccf0d-1538-40bb-a04b-2703fe6380dd_config-0] Notify connected event to listeners.
2023-08-09 21:27:47.719 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fccccf0d-1538-40bb-a04b-2703fe6380dd_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:27:47.719 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :639  [32m                  [0;39m [fccccf0d-1538-40bb-a04b-2703fe6380dd_config-0] Connected,notify listen context...
2023-08-09 21:27:47.720 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fccccf0d-1538-40bb-a04b-2703fe6380dd_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010de558
2023-08-09 21:27:47.784 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fbbd3b17-4f16-4b97-ad7b-70ba3ff42425] Receive server push request, request = NotifySubscriberRequest, requestId = 15
2023-08-09 21:27:47.785 INFO  com.alibaba.nacos.client.naming                   :184  [32m                  [0;39m init new ips(1) service: SEATA_GROUP@@seata-server -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatTimeOut":15000,"instanceIdGenerator":"simple","instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2023-08-09 21:27:47.786 INFO  com.alibaba.nacos.client.naming                   :169  [32m                  [0;39m current ips:(1) service: SEATA_GROUP@@seata-server -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"instanceHeartBeatTimeOut":15000,"instanceIdGenerator":"simple","instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2023-08-09 21:27:47.787 INFO  com.alibaba.nacos.client.config.impl.Limiter      :62   [32m                  [0;39m limitTime:5.0
2023-08-09 21:27:47.788 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [fbbd3b17-4f16-4b97-ad7b-70ba3ff42425] Ack server push request, request = NotifySubscriberRequest, requestId = 15
2023-08-09 21:27:47.808 WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder :87   [32m                  [0;39m Ignore the empty nacos configuration and get it based on dataId[business-service] & group[DEFAULT_GROUP]
2023-08-09 21:27:47.815 WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder :87   [32m                  [0;39m Ignore the empty nacos configuration and get it based on dataId[business-service.properties] & group[DEFAULT_GROUP]
2023-08-09 21:27:47.823 WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder :87   [32m                  [0;39m Ignore the empty nacos configuration and get it based on dataId[business-service-dev.properties] & group[DEFAULT_GROUP]
2023-08-09 21:27:47.824 INFO  o.s.c.b.c.PropertySourceBootstrapConfiguration    :108  [32m                  [0;39m Located property source: [BootstrapPropertySource {name='bootstrapProperties-business-service-dev.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-business-service.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-business-service,DEFAULT_GROUP'}]
2023-08-09 21:27:47.851 WARN  com.alibaba.nacos.client.logging.NacosLogging     :64   [32m                  [0;39m Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2023-08-09 21:27:47.852 INFO  com.jktickets.BusinessApplication                 :636  [32m                  [0;39m The following 1 profile is active: "dev"
2023-08-09 21:27:49.105 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :114  [32m                  [0;39m Tomcat initialized with port(s): 8002 (http)
2023-08-09 21:27:49.118 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8002"]
2023-08-09 21:27:49.120 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-08-09 21:27:49.120 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-08-09 21:27:49.218 INFO  o.a.c.c.C.[Tomcat].[localhost].[/business]        :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-08-09 21:27:49.219 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :291  [32m                  [0;39m Root WebApplicationContext: initialization completed in 6292 ms
2023-08-09 21:27:49.383 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :294  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode
2023-08-09 21:27:49.388 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :138  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-08-09 21:27:49.433 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :208  [32m                  [0;39m Finished Spring Data repository scanning in 23 ms. Found 0 Redis repository interfaces.
2023-08-09 21:27:49.686 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m                  [0;39m HikariPool-1 - Starting...
2023-08-09 21:27:49.828 INFO  o.springframework.cloud.context.scope.GenericScope:282  [32m                  [0;39m BeanFactory id=2002ce87-f1ba-3f2d-89b2-7013af69be00
2023-08-09 21:27:49.912 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'com.jktickets.feign.MemberFeign' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:49.926 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:49.926 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:49.926 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:49.981 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:49.985 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:49.987 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:49.988 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$741/0x000000080125f1e0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:49.989 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:49.993 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:49.996 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:409  [32m                  [0;39m Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-09 21:27:49.998 INFO  i.s.s.boot.autoconfigure.SeataAutoConfiguration   :63   [32m                  [0;39m Automatically configure Seata
2023-08-09 21:27:50.032 INFO  com.zaxxer.hikari.pool.HikariPool                 :565  [32m                  [0;39m HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7560bfa8
2023-08-09 21:27:50.034 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m                  [0;39m HikariPool-1 - Start completed.
2023-08-09 21:27:50.065 INFO  io.seata.config.ConfigurationFactory              :64   [32m                  [0;39m load Configuration from :Spring Configuration
2023-08-09 21:27:50.074 INFO  io.seata.config.nacos.NacosConfiguration          :233  [32m                  [0;39m Nacos check auth with userName/password.
2023-08-09 21:27:50.085 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:27:50.086 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:27:50.177 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :105  [32m                  [0;39m will connect to 192.168.0.102:8091
2023-08-09 21:27:50.178 INFO  io.seata.core.rpc.netty.RmNettyRemotingClient     :276  [32m                  [0;39m RM will register :jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business
2023-08-09 21:27:50.178 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :56   [32m                  [0;39m NettyPool create channel to transactionRole:RMROLE,address:192.168.0.102:8091,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', version='1.7.0', applicationId='business-service', transactionServiceGroup='train-group', extraData='null'} >
2023-08-09 21:27:50.184 INFO  io.seata.core.rpc.netty.RmNettyRemotingClient     :177  [32m                  [0;39m register RM success. client version:1.7.0, server version:1.6.1,channel:[id: 0x6fc22182, L:/192.168.0.102:65142 - R:/192.168.0.102:8091]
2023-08-09 21:27:50.185 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :81   [32m                  [0;39m register success, cost 5 ms, version:1.6.1,role:RMROLE,channel:[id: 0x6fc22182, L:/192.168.0.102:65142 - R:/192.168.0.102:8091]
2023-08-09 21:27:50.197 INFO  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator:101  [32m                  [0;39m Auto proxy data source 'dataSource' by 'AT' mode.
2023-08-09 21:27:50.224 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of 945820dc-f5f3-47cd-8d29-401be21207f4_config-0
2023-08-09 21:27:50.224 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [945820dc-f5f3-47cd-8d29-401be21207f4_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$601/0x0000000800f99a28
2023-08-09 21:27:50.225 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [945820dc-f5f3-47cd-8d29-401be21207f4_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$602/0x0000000800f99e48
2023-08-09 21:27:50.225 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [945820dc-f5f3-47cd-8d29-401be21207f4_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2023-08-09 21:27:50.225 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [945820dc-f5f3-47cd-8d29-401be21207f4_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2023-08-09 21:27:50.226 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [945820dc-f5f3-47cd-8d29-401be21207f4_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:27:50.226 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:27:50.341 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [945820dc-f5f3-47cd-8d29-401be21207f4_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691587670232_127.0.0.1_65143
2023-08-09 21:27:50.342 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [945820dc-f5f3-47cd-8d29-401be21207f4_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:27:50.342 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [945820dc-f5f3-47cd-8d29-401be21207f4_config-0] Notify connected event to listeners.
2023-08-09 21:27:50.342 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [945820dc-f5f3-47cd-8d29-401be21207f4_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010de558
2023-08-09 21:27:50.342 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :639  [32m                  [0;39m [945820dc-f5f3-47cd-8d29-401be21207f4_config-0] Connected,notify listen context...
2023-08-09 21:27:50.353 INFO  com.alibaba.nacos.client.config.utils.JvmUtil     :54   [32m                  [0;39m isMultiInstance:false
2023-08-09 21:27:50.363 INFO  com.alibaba.nacos.client.config.impl.CacheData    :67   [32m                  [0;39m nacos.cache.data.init.snapshot = true 
2023-08-09 21:27:50.365 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] seataServer.properties+SEATA_GROUP+train
2023-08-09 21:27:50.379 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=seataServer.properties, group=SEATA_GROUP, cnt=1
2023-08-09 21:27:50.398 INFO  i.seata.spring.annotation.GlobalTransactionScanner:211  [32m                  [0;39m Initializing Global Transaction Clients ... 
2023-08-09 21:27:50.563 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] transport.enableTmClientBatchSendRequest+SEATA_GROUP+train
2023-08-09 21:27:50.563 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableTmClientBatchSendRequest, group=SEATA_GROUP, cnt=1
2023-08-09 21:27:50.564 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableTmClientBatchSendRequest, group=SEATA_GROUP, cnt=2
2023-08-09 21:27:50.591 INFO  io.seata.core.rpc.netty.NettyClientBootstrap      :147  [32m                  [0;39m NettyClientBootstrap has started
2023-08-09 21:27:50.593 INFO  io.seata.discovery.registry.RegistryFactory       :50   [32m                  [0;39m use registry center type: nacos
2023-08-09 21:27:50.610 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] service.vgroupMapping.train-group+SEATA_GROUP+train
2023-08-09 21:27:50.611 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=service.vgroupMapping.train-group, group=SEATA_GROUP, cnt=1
2023-08-09 21:27:50.622 INFO  com.alibaba.nacos.client.naming                   :73   [32m                  [0;39m initializer namespace from namespace attribute :null
2023-08-09 21:27:50.634 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:27:50.634 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:27:50.738 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of 18f5e67b-5fb9-4a57-9f79-3cbad665311b
2023-08-09 21:27:50.740 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [18f5e67b-5fb9-4a57-9f79-3cbad665311b] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2023-08-09 21:27:50.741 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [18f5e67b-5fb9-4a57-9f79-3cbad665311b] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2023-08-09 21:27:50.741 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [18f5e67b-5fb9-4a57-9f79-3cbad665311b] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2023-08-09 21:27:50.742 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [18f5e67b-5fb9-4a57-9f79-3cbad665311b] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:27:50.742 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:27:50.866 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [18f5e67b-5fb9-4a57-9f79-3cbad665311b] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691587670749_127.0.0.1_65147
2023-08-09 21:27:50.866 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [18f5e67b-5fb9-4a57-9f79-3cbad665311b] Notify connected event to listeners.
2023-08-09 21:27:50.866 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [18f5e67b-5fb9-4a57-9f79-3cbad665311b] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:27:50.867 INFO  com.alibaba.nacos.client.naming                   :78   [32m                  [0;39m Grpc connection connect
2023-08-09 21:27:50.867 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [18f5e67b-5fb9-4a57-9f79-3cbad665311b] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010de558
2023-08-09 21:27:50.868 INFO  com.alibaba.nacos.client.naming                   :167  [32m                  [0;39m [SUBSCRIBE-SERVICE] service:seata-server, group:SEATA_GROUP, clusters:default 
2023-08-09 21:27:50.890 INFO  com.alibaba.nacos.client.naming                   :184  [32m                  [0;39m init new ips(1) service: SEATA_GROUP@@seata-server@@default -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"ipDeleteTimeout":30000,"instanceIdGenerator":"simple","instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2023-08-09 21:27:50.892 INFO  com.alibaba.nacos.client.naming                   :169  [32m                  [0;39m current ips:(1) service: SEATA_GROUP@@seata-server@@default -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"ipDeleteTimeout":30000,"instanceIdGenerator":"simple","instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2023-08-09 21:27:50.898 INFO  com.alibaba.nacos.client.naming                   :167  [32m                  [0;39m [SUBSCRIBE-SERVICE] service:seata-server, group:SEATA_GROUP, clusters:default 
2023-08-09 21:27:50.900 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :105  [32m                  [0;39m will connect to 192.168.0.102:8091
2023-08-09 21:27:51.055 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :56   [32m                  [0;39m NettyPool create channel to transactionRole:TMROLE,address:192.168.0.102:8091,msg:< RegisterTMRequest{version='1.7.0', applicationId='business-service', transactionServiceGroup='train-group', extraData='ak=null
digest=train-group,192.168.0.102,1691587671052
timestamp=1691587671052
authVersion=V4
vgroup=train-group
ip=192.168.0.102
'} >
2023-08-09 21:27:51.065 WARN  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :62   [32m                  [0;39m Unable to start LiveReload server
2023-08-09 21:27:51.118 INFO  o.s.cloud.openfeign.FeignClientFactoryBean        :437  [32m                  [0;39m For 'member-service' URL not provided. Will try picking an instance via load-balancing.
2023-08-09 21:27:51.301 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] client.tm.degradeCheck+SEATA_GROUP+train
2023-08-09 21:27:51.302 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.tm.degradeCheck, group=SEATA_GROUP, cnt=1
2023-08-09 21:27:51.303 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.tm.degradeCheck, group=SEATA_GROUP, cnt=2
2023-08-09 21:27:51.308 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] service.disableGlobalTransaction+SEATA_GROUP+train
2023-08-09 21:27:51.309 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=service.disableGlobalTransaction, group=SEATA_GROUP, cnt=1
2023-08-09 21:27:51.309 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=service.disableGlobalTransaction, group=SEATA_GROUP, cnt=2
2023-08-09 21:27:51.309 INFO  i.seata.spring.annotation.GlobalTransactionScanner:308  [32m                  [0;39m Bean [com.jktickets.service.impl.AfterConfirmOrderServiceImpl] with name [afterConfirmOrderServiceImpl] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
2023-08-09 21:27:51.337 WARN  o.s.core.LocalVariableTableParameterNameDiscoverer:123  [32m                  [0;39m Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.redisson.spring.starter.RedissonAutoConfiguration
2023-08-09 21:27:51.366 WARN  i.s.c.l.EnhancedServiceLoader$InnerEnhancedServiceLoader:545  [32m                  [0;39m Load [io.seata.serializer.hessian.HessianSerializer] class fail: com/caucho/hessian/io/AbstractHessianOutput
2023-08-09 21:27:51.399 INFO  io.seata.core.rpc.netty.TmNettyRemotingClient     :224  [32m                  [0;39m register TM success. client version:1.7.0, server version:1.6.1,channel:[id: 0x0c875057, L:/192.168.0.102:65152 - R:/192.168.0.102:8091]
2023-08-09 21:27:51.407 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :81   [32m                  [0;39m register success, cost 89 ms, version:1.6.1,role:TMROLE,channel:[id: 0x0c875057, L:/192.168.0.102:65152 - R:/192.168.0.102:8091]
2023-08-09 21:27:51.407 INFO  i.seata.spring.annotation.GlobalTransactionScanner:225  [32m                  [0;39m Transaction Manager Client is initialized. applicationId[business-service] txServiceGroup[train-group]
2023-08-09 21:27:51.419 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] transport.enableRmClientBatchSendRequest+SEATA_GROUP+train
2023-08-09 21:27:51.420 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableRmClientBatchSendRequest, group=SEATA_GROUP, cnt=1
2023-08-09 21:27:51.421 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=transport.enableRmClientBatchSendRequest, group=SEATA_GROUP, cnt=2
2023-08-09 21:27:51.438 INFO  io.seata.rm.datasource.AsyncWorker                :73   [32m                  [0;39m Async Commit Buffer Limit: 10000
2023-08-09 21:27:51.439 INFO  io.seata.rm.datasource.xa.ResourceManagerXA       :59   [32m                  [0;39m ResourceManagerXA init ...
2023-08-09 21:27:51.445 INFO  io.seata.core.rpc.netty.NettyClientBootstrap      :147  [32m                  [0;39m NettyClientBootstrap has started
2023-08-09 21:27:51.445 INFO  i.seata.spring.annotation.GlobalTransactionScanner:230  [32m                  [0;39m Resource Manager is initialized. applicationId[business-service] txServiceGroup[train-group]
2023-08-09 21:27:51.445 INFO  i.seata.spring.annotation.GlobalTransactionScanner:234  [32m                  [0;39m Global Transaction Clients are initialized. 
2023-08-09 21:27:51.479 INFO  org.redisson.Version                              :41   [32m                  [0;39m Redisson 3.21.0
2023-08-09 21:27:51.481 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [18f5e67b-5fb9-4a57-9f79-3cbad665311b] Receive server push request, request = NotifySubscriberRequest, requestId = 16
2023-08-09 21:27:51.482 INFO  com.alibaba.nacos.client.naming                   :184  [32m                  [0;39m init new ips(1) service: SEATA_GROUP@@seata-server -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"ipDeleteTimeout":30000,"instanceIdGenerator":"simple","instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2023-08-09 21:27:51.483 INFO  com.alibaba.nacos.client.naming                   :169  [32m                  [0;39m current ips:(1) service: SEATA_GROUP@@seata-server -> [{"instanceId":"192.168.0.102#8091#default#SEATA_GROUP@@seata-server","ip":"192.168.0.102","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"default","serviceName":"SEATA_GROUP@@seata-server","metadata":{},"ipDeleteTimeout":30000,"instanceIdGenerator":"simple","instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2023-08-09 21:27:51.484 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [18f5e67b-5fb9-4a57-9f79-3cbad665311b] Ack server push request, request = NotifySubscriberRequest, requestId = 16
2023-08-09 21:27:51.917 INFO  o.r.connection.pool.MasterPubSubConnectionPool    :158  [32m                  [0;39m 1 connections initialized for r-bp1e8io6hj1e27e15lpd.redis.rds.aliyuncs.com/47.110.123.191:6379
2023-08-09 21:27:52.688 INFO  org.redisson.connection.pool.MasterConnectionPool :158  [32m                  [0;39m 24 connections initialized for r-bp1e8io6hj1e27e15lpd.redis.rds.aliyuncs.com/47.110.123.191:6379
2023-08-09 21:27:52.755 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :114  [32m                  [0;39m Tomcat initialized with port(s): 18002 (http)
2023-08-09 21:27:52.771 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-18002"]
2023-08-09 21:27:52.772 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-08-09 21:27:52.772 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-08-09 21:27:52.870 INFO  o.a.c.c.C.[Tomcat].[localhost].[/business]        :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-08-09 21:27:52.870 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :291  [32m                  [0;39m Root WebApplicationContext: initialization completed in 4991 ms
2023-08-09 21:27:53.351 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m                  [0;39m HikariPool-1 - Starting...
2023-08-09 21:27:53.676 INFO  com.zaxxer.hikari.pool.HikariPool                 :565  [32m                  [0;39m HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4d8843df
2023-08-09 21:27:53.678 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m                  [0;39m HikariPool-1 - Start completed.
2023-08-09 21:27:53.796 INFO  io.seata.core.rpc.netty.NettyClientChannelManager :105  [32m                  [0;39m will connect to 192.168.0.102:8091
2023-08-09 21:27:53.797 INFO  io.seata.core.rpc.netty.RmNettyRemotingClient     :276  [32m                  [0;39m RM will register :jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business
2023-08-09 21:27:53.798 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :56   [32m                  [0;39m NettyPool create channel to transactionRole:RMROLE,address:192.168.0.102:8091,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://rm-cn-uax39xxd10011clo.rwlb.rds.aliyuncs.com/train-business', version='1.7.0', applicationId='business-service', transactionServiceGroup='train-group', extraData='null'} >
2023-08-09 21:27:53.805 INFO  io.seata.core.rpc.netty.RmNettyRemotingClient     :177  [32m                  [0;39m register RM success. client version:1.7.0, server version:1.6.1,channel:[id: 0x6e21c996, L:/192.168.0.102:65181 - R:/192.168.0.102:8091]
2023-08-09 21:27:53.806 INFO  io.seata.core.rpc.netty.NettyPoolableFactory      :81   [32m                  [0;39m register success, cost 6 ms, version:1.6.1,role:RMROLE,channel:[id: 0x6e21c996, L:/192.168.0.102:65181 - R:/192.168.0.102:8091]
2023-08-09 21:27:53.820 INFO  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator:101  [32m                  [0;39m Auto proxy data source 'dataSource' by 'AT' mode.
2023-08-09 21:27:54.599 WARN  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :62   [32m                  [0;39m Unable to start LiveReload server
2023-08-09 21:27:54.638 INFO  o.s.cloud.openfeign.FeignClientFactoryBean        :437  [32m                  [0;39m For 'member-service' URL not provided. Will try picking an instance via load-balancing.
2023-08-09 21:27:54.818 WARN  o.s.core.LocalVariableTableParameterNameDiscoverer:123  [32m                  [0;39m Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: com.github.pagehelper.autoconfigure.PageHelperStandardProperties
2023-08-09 21:27:54.849 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] client.tm.degradeCheck+SEATA_GROUP+train
2023-08-09 21:27:54.849 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.tm.degradeCheck, group=SEATA_GROUP, cnt=1
2023-08-09 21:27:54.850 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=client.tm.degradeCheck, group=SEATA_GROUP, cnt=2
2023-08-09 21:27:54.856 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] service.disableGlobalTransaction+SEATA_GROUP+train
2023-08-09 21:27:54.856 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=service.disableGlobalTransaction, group=SEATA_GROUP, cnt=1
2023-08-09 21:27:54.857 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=service.disableGlobalTransaction, group=SEATA_GROUP, cnt=2
2023-08-09 21:27:54.857 INFO  i.seata.spring.annotation.GlobalTransactionScanner:308  [32m                  [0;39m Bean [com.jktickets.service.impl.AfterConfirmOrderServiceImpl] with name [afterConfirmOrderServiceImpl] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
2023-08-09 21:27:54.880 WARN  o.s.core.LocalVariableTableParameterNameDiscoverer:123  [32m                  [0;39m Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.redisson.spring.starter.RedissonAutoConfiguration
2023-08-09 21:27:55.012 INFO  org.redisson.Version                              :41   [32m                  [0;39m Redisson 3.21.0
2023-08-09 21:27:55.435 INFO  o.r.connection.pool.MasterPubSubConnectionPool    :158  [32m                  [0;39m 1 connections initialized for r-bp1e8io6hj1e27e15lpd.redis.rds.aliyuncs.com/47.110.123.191:6379
2023-08-09 21:27:56.159 INFO  org.redisson.connection.pool.MasterConnectionPool :158  [32m                  [0;39m 24 connections initialized for r-bp1e8io6hj1e27e15lpd.redis.rds.aliyuncs.com/47.110.123.191:6379
2023-08-09 21:27:56.374 INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver  :58   [32m                  [0;39m Exposing 1 endpoint(s) beneath base path '/actuator'
2023-08-09 21:27:56.526 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8002"]
2023-08-09 21:27:56.545 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :226  [32m                  [0;39m Tomcat started on port(s): 8002 (http) with context path '/business'
2023-08-09 21:27:56.547 INFO  com.alibaba.nacos.client.naming                   :62   [32m                  [0;39m initializer namespace from ans.namespace attribute : null
2023-08-09 21:27:56.548 INFO  com.alibaba.nacos.client.naming                   :66   [32m                  [0;39m initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2023-08-09 21:27:56.549 INFO  com.alibaba.nacos.client.naming                   :73   [32m                  [0;39m initializer namespace from namespace attribute :null
2023-08-09 21:27:56.550 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:27:56.550 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:27:56.551 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of a9609139-c12a-4fe3-b1e2-a6b65bb2ea82
2023-08-09 21:27:56.552 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [a9609139-c12a-4fe3-b1e2-a6b65bb2ea82] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2023-08-09 21:27:56.552 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [a9609139-c12a-4fe3-b1e2-a6b65bb2ea82] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2023-08-09 21:27:56.553 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [a9609139-c12a-4fe3-b1e2-a6b65bb2ea82] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2023-08-09 21:27:56.554 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [a9609139-c12a-4fe3-b1e2-a6b65bb2ea82] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:27:56.555 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:27:56.668 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [a9609139-c12a-4fe3-b1e2-a6b65bb2ea82] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691587676561_127.0.0.1_65217
2023-08-09 21:27:56.668 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [a9609139-c12a-4fe3-b1e2-a6b65bb2ea82] Notify connected event to listeners.
2023-08-09 21:27:56.668 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [a9609139-c12a-4fe3-b1e2-a6b65bb2ea82] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:27:56.668 INFO  com.alibaba.nacos.client.naming                   :78   [32m                  [0;39m Grpc connection connect
2023-08-09 21:27:56.669 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [a9609139-c12a-4fe3-b1e2-a6b65bb2ea82] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010ddaf0
2023-08-09 21:27:56.669 INFO  com.alibaba.nacos.client.naming                   :121  [32m                  [0;39m [REGISTER-SERVICE] train registering service business-service with instance Instance{instanceId='null', ip='192.168.0.102', port=8002, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2023-08-09 21:27:56.678 INFO  c.a.cloud.nacos.registry.NacosServiceRegistry     :76   [32m                  [0;39m nacos registry, DEFAULT_GROUP business-service 192.168.0.102:8002 register finished
2023-08-09 21:27:57.112 INFO  com.jktickets.BusinessApplication                 :57   [32m                  [0;39m Started BusinessApplication in 18.792 seconds (process running for 20.111)
2023-08-09 21:27:57.127 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] business-service+DEFAULT_GROUP+train
2023-08-09 21:27:57.127 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=business-service, group=DEFAULT_GROUP, cnt=1
2023-08-09 21:27:57.127 INFO  c.a.cloud.nacos.refresh.NacosContextRefresher     :129  [32m                  [0;39m [Nacos Config] Listening config: dataId=business-service, group=DEFAULT_GROUP
2023-08-09 21:27:57.127 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] business-service.properties+DEFAULT_GROUP+train
2023-08-09 21:27:57.128 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=business-service.properties, group=DEFAULT_GROUP, cnt=1
2023-08-09 21:27:57.128 INFO  c.a.cloud.nacos.refresh.NacosContextRefresher     :129  [32m                  [0;39m [Nacos Config] Listening config: dataId=business-service.properties, group=DEFAULT_GROUP
2023-08-09 21:27:57.128 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] business-service-dev.properties+DEFAULT_GROUP+train
2023-08-09 21:27:57.128 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=business-service-dev.properties, group=DEFAULT_GROUP, cnt=1
2023-08-09 21:27:57.128 INFO  c.a.cloud.nacos.refresh.NacosContextRefresher     :129  [32m                  [0;39m [Nacos Config] Listening config: dataId=business-service-dev.properties, group=DEFAULT_GROUP
2023-08-09 21:27:57.131 INFO  com.jktickets.BusinessApplication                 :27   [32m                  [0;39m 启动成功！！
2023-08-09 21:27:57.131 INFO  com.jktickets.BusinessApplication                 :29   [32m                  [0;39m 测试地址: 	http://127.0.0.1:8002/business/hello
2023-08-09 21:27:57.687 INFO  o.a.c.c.C.[Tomcat].[localhost].[/business]        :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-08-09 21:27:57.687 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-08-09 21:27:57.690 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 3 ms
2023-08-09 21:27:58.326 WARN  o.s.core.LocalVariableTableParameterNameDiscoverer:123  [32m                  [0;39m Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: com.github.pagehelper.autoconfigure.PageHelperStandardProperties
2023-08-09 21:27:59.823 INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver  :58   [32m                  [0;39m Exposing 1 endpoint(s) beneath base path '/actuator'
2023-08-09 21:27:59.968 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-18002"]
2023-08-09 21:27:59.982 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :226  [32m                  [0;39m Tomcat started on port(s): 18002 (http) with context path '/business'
2023-08-09 21:27:59.984 INFO  com.alibaba.nacos.client.naming                   :62   [32m                  [0;39m initializer namespace from ans.namespace attribute : null
2023-08-09 21:27:59.985 INFO  com.alibaba.nacos.client.naming                   :66   [32m                  [0;39m initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2023-08-09 21:27:59.985 INFO  com.alibaba.nacos.client.naming                   :73   [32m                  [0;39m initializer namespace from namespace attribute :null
2023-08-09 21:27:59.986 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2023-08-09 21:27:59.986 INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager   :56   [32m                  [0;39m [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2023-08-09 21:27:59.987 INFO  com.alibaba.nacos.common.remote.client            :108  [32m                  [0;39m [RpcClientFactory] create a new rpc client of 13127607-b17e-4fc9-8d6c-1c768f1862fc
2023-08-09 21:27:59.987 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [13127607-b17e-4fc9-8d6c-1c768f1862fc] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2023-08-09 21:27:59.987 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [13127607-b17e-4fc9-8d6c-1c768f1862fc] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2023-08-09 21:27:59.987 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [13127607-b17e-4fc9-8d6c-1c768f1862fc] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2023-08-09 21:27:59.988 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [13127607-b17e-4fc9-8d6c-1c768f1862fc] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2023-08-09 21:27:59.988 INFO  c.a.nacos.common.remote.client.grpc.GrpcClient    :182  [32m                  [0;39m grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2023-08-09 21:28:00.100 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [13127607-b17e-4fc9-8d6c-1c768f1862fc] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1691587679993_127.0.0.1_65220
2023-08-09 21:28:00.101 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [13127607-b17e-4fc9-8d6c-1c768f1862fc] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2023-08-09 21:28:00.101 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [13127607-b17e-4fc9-8d6c-1c768f1862fc] Notify connected event to listeners.
2023-08-09 21:28:00.101 INFO  com.alibaba.nacos.client.naming                   :78   [32m                  [0;39m Grpc connection connect
2023-08-09 21:28:00.101 INFO  com.alibaba.nacos.common.remote.client            :63   [32m                  [0;39m [13127607-b17e-4fc9-8d6c-1c768f1862fc] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$618/0x00000008010de558
2023-08-09 21:28:00.101 INFO  com.alibaba.nacos.client.naming                   :121  [32m                  [0;39m [REGISTER-SERVICE] train registering service business-service with instance Instance{instanceId='null', ip='192.168.0.102', port=18002, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2023-08-09 21:28:00.109 INFO  c.a.cloud.nacos.registry.NacosServiceRegistry     :76   [32m                  [0;39m nacos registry, DEFAULT_GROUP business-service 192.168.0.102:18002 register finished
2023-08-09 21:28:00.517 INFO  com.jktickets.BusinessApplication                 :57   [32m                  [0;39m Started BusinessApplication in 17.488 seconds (process running for 18.792)
2023-08-09 21:28:00.525 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] business-service+DEFAULT_GROUP+train
2023-08-09 21:28:00.525 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=business-service, group=DEFAULT_GROUP, cnt=1
2023-08-09 21:28:00.525 INFO  c.a.cloud.nacos.refresh.NacosContextRefresher     :129  [32m                  [0;39m [Nacos Config] Listening config: dataId=business-service, group=DEFAULT_GROUP
2023-08-09 21:28:00.525 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] business-service.properties+DEFAULT_GROUP+train
2023-08-09 21:28:00.526 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=business-service.properties, group=DEFAULT_GROUP, cnt=1
2023-08-09 21:28:00.526 INFO  c.a.cloud.nacos.refresh.NacosContextRefresher     :129  [32m                  [0;39m [Nacos Config] Listening config: dataId=business-service.properties, group=DEFAULT_GROUP
2023-08-09 21:28:00.527 INFO  com.alibaba.nacos.client.config.impl.ClientWorker :380  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [subscribe] business-service-dev.properties+DEFAULT_GROUP+train
2023-08-09 21:28:00.527 INFO  com.alibaba.nacos.client.config.impl.CacheData    :197  [32m                  [0;39m [fixed-train-127.0.0.1_8848] [add-listener] ok, tenant=train, dataId=business-service-dev.properties, group=DEFAULT_GROUP, cnt=1
2023-08-09 21:28:00.527 INFO  c.a.cloud.nacos.refresh.NacosContextRefresher     :129  [32m                  [0;39m [Nacos Config] Listening config: dataId=business-service-dev.properties, group=DEFAULT_GROUP
2023-08-09 21:28:00.529 INFO  com.jktickets.BusinessApplication                 :27   [32m                  [0;39m 启动成功！！
2023-08-09 21:28:00.530 INFO  com.jktickets.BusinessApplication                 :29   [32m                  [0;39m 测试地址: 	http://127.0.0.1:18002/business/hello
2023-08-09 21:28:00.860 INFO  o.a.c.c.C.[Tomcat].[localhost].[/business]        :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-08-09 21:28:00.860 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-08-09 21:28:00.862 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 2 ms
2023-08-09 21:28:22.096 INFO  com.jktickets.interceptor.MemberInterceptor       :32   [32m1691587702089wr6  [0;39m 获取会员登录token：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYmYiOjE2OTE1ODY3NDgsIm1vYmlsZSI6IjEzMDAwMDAwMDAwIiwiaWQiOjE2ODA5MzI5MDI3OTc0NDcxNjgsImV4cCI6MTY5MTY3MzE0OCwiaWF0IjoxNjkxNTg2NzQ4fQ.HD1PVOH_Avy4jkAgx3AqH1MmBlzE-vewA49CMIcdVKI
2023-08-09 21:28:22.362 INFO  com.jktickets.utils.JwtUtil                       :64   [32m1691587702089wr6  [0;39m 根据token获取原始内容：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:28:22.365 INFO  com.jktickets.interceptor.MemberInterceptor       :35   [32m1691587702089wr6  [0;39m 当前登录会员：{"mobile":"13000000000","id":1680932902797447168}
2023-08-09 21:28:22.500 INFO  com.jktickets.aspect.LogAspect                    :57   [32m1691587702089wr6  [0;39m ------------- 开始 -------------
2023-08-09 21:28:22.501 INFO  com.jktickets.aspect.LogAspect                    :58   [32m1691587702089wr6  [0;39m 请求地址: http://192.168.0.102:18002/business/confirmOrder/doConfirm POST
2023-08-09 21:28:22.502 INFO  com.jktickets.aspect.LogAspect                    :59   [32m1691587702089wr6  [0;39m 类名方法: com.jktickets.controller.ConfirmOrderController.doConfirm
2023-08-09 21:28:22.502 INFO  com.jktickets.aspect.LogAspect                    :60   [32m1691587702089wr6  [0;39m 远程地址: 192.168.0.102
2023-08-09 21:28:22.574 INFO  com.jktickets.aspect.LogAspect                    :82   [32m1691587702089wr6  [0;39m 请求参数: [{"dailyTrainTicketId":1688913100071374848,"date":1691424000000,"end":"杭州","start":"温州","tickets":[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}],"trainCode":"01"}]
2023-08-09 21:28:22.682 INFO  com.jktickets.service.ConfirmOrderService         :184  [32m1691587702089wr6  [0;39m 恭喜，抢到锁了
2023-08-09 21:28:22.755 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:30
2023-08-09 21:28:23.787 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:29
2023-08-09 21:28:24.803 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:28
2023-08-09 21:28:25.846 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:27
2023-08-09 21:28:26.908 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:26
2023-08-09 21:28:27.921 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:25
2023-08-09 21:28:28.934 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:24
2023-08-09 21:28:29.948 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:23
2023-08-09 21:28:30.962 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:22
2023-08-09 21:28:31.985 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:21
2023-08-09 21:28:32.998 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:30
2023-08-09 21:28:34.014 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:29
2023-08-09 21:28:35.042 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:28
2023-08-09 21:28:36.059 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:27
2023-08-09 21:28:37.075 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:26
2023-08-09 21:28:38.091 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:25
2023-08-09 21:28:39.104 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:24
2023-08-09 21:28:40.121 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:23
2023-08-09 21:28:41.135 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:22
2023-08-09 21:28:42.151 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:21
2023-08-09 21:28:43.175 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:30
2023-08-09 21:28:44.190 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:29
2023-08-09 21:28:45.205 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:28
2023-08-09 21:28:46.225 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:27
2023-08-09 21:28:47.237 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:26
2023-08-09 21:28:48.251 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:25
2023-08-09 21:28:49.276 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:24
2023-08-09 21:28:50.291 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:23
2023-08-09 21:28:51.305 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:22
2023-08-09 21:28:52.322 INFO  com.jktickets.service.ConfirmOrderService         :188  [32m1691587702089wr6  [0;39m 锁过期时间还有:20
2023-08-09 21:28:53.339 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691587702089wr6  [0;39m 执行SQL:  insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:28:53.340 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691587702089wr6  [0;39m 参数值: ConfirmOrder [Hash = 130327603, id=1689267506738499584, memberId=1680932902797447168, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, end=杭州, dailyTrainTicketId=1688913100071374848, status=I, createTime=2023-08-09 21:28:53, updateTime=2023-08-09 21:28:53, tickets=[{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}]]
2023-08-09 21:28:53.557 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691587702089wr6  [0;39m ==>  Preparing: insert into confirm_order (id, member_id, `date`, train_code, `start`, `end`, daily_train_ticket_id, `status`, create_time, update_time, tickets) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2023-08-09 21:28:53.594 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691587702089wr6  [0;39m ==> Parameters: 1689267506738499584(Long), 1680932902797447168(Long), 2023-08-08(Date), 01(String), 温州(String), 杭州(String), 1688913100071374848(Long), I(String), 2023-08-09 21:28:53.325(Timestamp), 2023-08-09 21:28:53.325(Timestamp), [{"passengerId":1681265704667582464,"passengerIdCard":"1","passengerName":"测试","passengerType":"1","seatTypeCode":"2"}](String)
2023-08-09 21:28:53.630 DEBUG com.jktickets.mapper.ConfirmOrderMapper.insert    :137  [32m1691587702089wr6  [0;39m <==    Updates: 1
2023-08-09 21:28:53.631 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691587702089wr6  [0;39m SQL执行完成: insert | execution(int com.jktickets.mapper.ConfirmOrderMapper.insert(ConfirmOrder))
2023-08-09 21:28:53.647 INFO  com.jktickets.aspect.LogAspect                    :106  [32m1691587702089wr6  [0;39m 执行SQL:  selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:28:53.648 INFO  com.jktickets.aspect.LogAspect                    :111  [32m1691587702089wr6  [0;39m 参数值: com.jktickets.domain.DailyTrainTicketExample@2553634d
2023-08-09 21:28:53.732 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691587702089wr6  [0;39m ==>  Preparing: select id, `date`, train_code, `start`, start_pinyin, start_time, start_index, `end`, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time from daily_train_ticket WHERE ( `date` = ? and train_code = ? and `start` = ? and `end` = ? )
2023-08-09 21:28:53.734 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691587702089wr6  [0;39m ==> Parameters: 2023-08-08(Date), 01(String), 温州(String), 杭州(String)
2023-08-09 21:28:53.773 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691587702089wr6  [0;39m <==    Columns: id, date, train_code, start, start_pinyin, start_time, start_index, end, end_pinyin, end_time, end_index, ydz, ydz_price, edz, edz_price, rw, rw_price, yw, yw_price, create_time, update_time
2023-08-09 21:28:53.812 TRACE c.j.mapper.DailyTrainTicketMapper.selectByExample :143  [32m1691587702089wr6  [0;39m <==        Row: 1688913100071374848, 2023-08-08, 01, 温州, wenzhou, 22:15:03, 1, 杭州, hangzhou, 15:00:00, 2, 0, 5.28, 0, 3.96, -1, 7.92, -1, 6.60, 2023-08-08 22:00:35.973, 2023-08-08 22:00:35.973
2023-08-09 21:28:53.820 DEBUG c.j.mapper.DailyTrainTicketMapper.selectByExample :137  [32m1691587702089wr6  [0;39m <==      Total: 1
2023-08-09 21:28:53.821 INFO  com.jktickets.aspect.LogAspect                    :120  [32m1691587702089wr6  [0;39m SQL执行完成: selectByExample | execution(List com.jktickets.mapper.DailyTrainTicketMapper.selectByExample(DailyTrainTicketExample))
2023-08-09 21:28:53.822 INFO  com.jktickets.service.ConfirmOrderService         :230  [32m1691587702089wr6  [0;39m 查出余票记录:DailyTrainTicket [Hash = 1827879705, id=1688913100071374848, date=Tue Aug 08 00:00:00 CST 2023, trainCode=01, start=温州, startPinyin=wenzhou, startTime=Thu Jan 01 22:15:03 CST 1970, startIndex=1, end=杭州, endPinyin=hangzhou, endTime=Thu Jan 01 15:00:00 CST 1970, endIndex=2, ydz=0, ydzPrice=5.28, edz=0, edzPrice=3.96, rw=-1, rwPrice=7.92, yw=-1, ywPrice=6.60, createTime=Tue Aug 08 22:00:35 CST 2023, updateTime=Tue Aug 08 22:00:35 CST 2023]
2023-08-09 21:28:53.831 INFO  com.jktickets.service.ConfirmOrderService         :326  [32m1691587702089wr6  [0;39m 购票流程结束，释放锁
2023-08-09 21:28:53.869 ERROR c.jktickets.exception.ControllerExceptionHandler  :62   [32m1691587702089wr6  [0;39m 业务异常:余票不足
2023-08-09 21:28:53.904 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m1691587702089wr6  [0;39m Resolved [BusinessException(businessExceptionEnum=BusinessExceptionEnum{desc='余票不足'})]
